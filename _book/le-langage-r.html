<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Le langage R | A Minimal Book on R</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The HTML output format for this example is bookdown::gitbook, set in the _output.yml file." />
  <meta name="generator" content="bookdown 0.38 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Le langage R | A Minimal Book on R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The HTML output format for this example is bookdown::gitbook, set in the _output.yml file." />
  <meta name="github-repo" content="pbessonneau/Cours_R_2024" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Le langage R | A Minimal Book on R" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The HTML output format for this example is bookdown::gitbook, set in the _output.yml file." />
  

<meta name="author" content="Pascal Bessonneau" />


<meta name="date" content="2024-04-04" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="architecture-de-r.html"/>
<link rel="next" href="importation-de-données.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="libs/wordcloud2-0.0.1/wordcloud.css" rel="stylesheet" />
<script src="libs/wordcloud2-0.0.1/wordcloud2-all.js"></script>
<script src="libs/wordcloud2-0.0.1/hover.js"></script>
<script src="libs/wordcloud2-binding-0.2.1/wordcloud2.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Objectif</a></li>
<li class="chapter" data-level="2" data-path="architecture-de-r.html"><a href="architecture-de-r.html"><i class="fa fa-check"></i><b>2</b> Architecture de R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="architecture-de-r.html"><a href="architecture-de-r.html#paquets"><i class="fa fa-check"></i><b>2.1</b> Paquets</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="le-langage-r.html"><a href="le-langage-r.html"><i class="fa fa-check"></i><b>3</b> Le langage R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="le-langage-r.html"><a href="le-langage-r.html#introduction"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="le-langage-r.html"><a href="le-langage-r.html#un-exemple-de-traitement-de-données"><i class="fa fa-check"></i><b>3.2</b> Un exemple de traitement de données</a></li>
<li class="chapter" data-level="3.3" data-path="le-langage-r.html"><a href="le-langage-r.html#vecteurs"><i class="fa fa-check"></i><b>3.3</b> Vecteurs</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="le-langage-r.html"><a href="le-langage-r.html#exemple-de-vecteurs"><i class="fa fa-check"></i><b>3.3.1</b> Exemple de vecteurs</a></li>
<li class="chapter" data-level="3.3.2" data-path="le-langage-r.html"><a href="le-langage-r.html#création-de-vecteurs"><i class="fa fa-check"></i><b>3.3.2</b> Création de vecteurs</a></li>
<li class="chapter" data-level="3.3.3" data-path="le-langage-r.html"><a href="le-langage-r.html#les-types-de-vecteurs"><i class="fa fa-check"></i><b>3.3.3</b> Les types de vecteurs</a></li>
<li class="chapter" data-level="3.3.4" data-path="le-langage-r.html"><a href="le-langage-r.html#pour-résumé"><i class="fa fa-check"></i><b>3.3.4</b> Pour résumé</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="le-langage-r.html"><a href="le-langage-r.html#sélection-des-individus"><i class="fa fa-check"></i><b>3.4</b> Sélection des individus</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="le-langage-r.html"><a href="le-langage-r.html#calcul-de-la-moyenne-et-nouveaux-générateurs"><i class="fa fa-check"></i><b>3.4.1</b> Calcul de la moyenne et nouveaux générateurs</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="importation-de-données.html"><a href="importation-de-données.html"><i class="fa fa-check"></i><b>4</b> Importation de Données</a>
<ul>
<li class="chapter" data-level="4.1" data-path="importation-de-données.html"><a href="importation-de-données.html#parcours-sup."><i class="fa fa-check"></i><b>4.1</b> Parcours Sup.</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="résumés-rapides-descriptives.html"><a href="résumés-rapides-descriptives.html"><i class="fa fa-check"></i><b>5</b> Résumés rapides descriptives</a>
<ul>
<li class="chapter" data-level="5.1" data-path="résumés-rapides-descriptives.html"><a href="résumés-rapides-descriptives.html#les-premières-tables"><i class="fa fa-check"></i><b>5.1</b> Les premières tables</a></li>
<li class="chapter" data-level="5.2" data-path="résumés-rapides-descriptives.html"><a href="résumés-rapides-descriptives.html#tableaux-croisés"><i class="fa fa-check"></i><b>5.2</b> Tableaux croisés</a></li>
<li class="chapter" data-level="5.3" data-path="résumés-rapides-descriptives.html"><a href="résumés-rapides-descriptives.html#themes"><i class="fa fa-check"></i><b>5.3</b> Themes</a></li>
<li class="chapter" data-level="5.4" data-path="résumés-rapides-descriptives.html"><a href="résumés-rapides-descriptives.html#exportation"><i class="fa fa-check"></i><b>5.4</b> Exportation</a></li>
<li class="chapter" data-level="5.5" data-path="résumés-rapides-descriptives.html"><a href="résumés-rapides-descriptives.html#personnalisation-des-statistiques"><i class="fa fa-check"></i><b>5.5</b> Personnalisation des statistiques</a></li>
<li class="chapter" data-level="5.6" data-path="résumés-rapides-descriptives.html"><a href="résumés-rapides-descriptives.html#modèles"><i class="fa fa-check"></i><b>5.6</b> Modèles</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="résumés-rapides-descriptives.html"><a href="résumés-rapides-descriptives.html#exemple-de-modèle-de-régression-linéaire"><i class="fa fa-check"></i><b>5.6.1</b> Exemple de modèle de régression linéaire</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="graphiques-et-ggplot.html"><a href="graphiques-et-ggplot.html"><i class="fa fa-check"></i><b>6</b> Graphiques et ggplot</a>
<ul>
<li class="chapter" data-level="6.1" data-path="graphiques-et-ggplot.html"><a href="graphiques-et-ggplot.html#les-graphiques-de-base"><i class="fa fa-check"></i><b>6.1</b> Les graphiques de base</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="graphiques-et-ggplot.html"><a href="graphiques-et-ggplot.html#pour-les-graphiques-de-chiffres"><i class="fa fa-check"></i><b>6.1.1</b> Pour les graphiques de chiffres</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="graphiques-et-ggplot.html"><a href="graphiques-et-ggplot.html#le-tidyverse-et-ggplot"><i class="fa fa-check"></i><b>6.2</b> le tidyverse et ggplot</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="graphiques-et-ggplot.html"><a href="graphiques-et-ggplot.html#la-base"><i class="fa fa-check"></i><b>6.2.1</b> La base</a></li>
<li class="chapter" data-level="6.2.2" data-path="graphiques-et-ggplot.html"><a href="graphiques-et-ggplot.html#les-autres-graphiques"><i class="fa fa-check"></i><b>6.2.2</b> Les autres graphiques</a></li>
<li class="chapter" data-level="6.2.3" data-path="graphiques-et-ggplot.html"><a href="graphiques-et-ggplot.html#tableaux-de-contingences"><i class="fa fa-check"></i><b>6.2.3</b> Tableaux de contingences</a></li>
<li class="chapter" data-level="6.2.4" data-path="graphiques-et-ggplot.html"><a href="graphiques-et-ggplot.html#les-thèmes"><i class="fa fa-check"></i><b>6.2.4</b> Les thèmes</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="graphiques-et-ggplot.html"><a href="graphiques-et-ggplot.html#liens"><i class="fa fa-check"></i><b>6.3</b> Liens</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="manipulation-avancée-mettre-en-forme-vos-données.html"><a href="manipulation-avancée-mettre-en-forme-vos-données.html"><i class="fa fa-check"></i><b>7</b> Manipulation avancée (mettre en forme vos données)</a>
<ul>
<li class="chapter" data-level="7.1" data-path="manipulation-avancée-mettre-en-forme-vos-données.html"><a href="manipulation-avancée-mettre-en-forme-vos-données.html#transformation-de-plusieurs-variables"><i class="fa fa-check"></i><b>7.1</b> Transformation de plusieurs variables</a></li>
<li class="chapter" data-level="7.2" data-path="manipulation-avancée-mettre-en-forme-vos-données.html"><a href="manipulation-avancée-mettre-en-forme-vos-données.html#opérateurs-et-case_when"><i class="fa fa-check"></i><b>7.2</b> Opérateurs et case_when</a></li>
<li class="chapter" data-level="7.3" data-path="manipulation-avancée-mettre-en-forme-vos-données.html"><a href="manipulation-avancée-mettre-en-forme-vos-données.html#réutilisation-de-statistiques"><i class="fa fa-check"></i><b>7.3</b> Réutilisation de statistiques</a></li>
<li class="chapter" data-level="7.4" data-path="manipulation-avancée-mettre-en-forme-vos-données.html"><a href="manipulation-avancée-mettre-en-forme-vos-données.html#chargement"><i class="fa fa-check"></i><b>7.4</b> Chargement</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="données-des-lycées-pro..html"><a href="données-des-lycées-pro..html"><i class="fa fa-check"></i><b>8</b> Données des lycées pro.</a>
<ul>
<li class="chapter" data-level="8.1" data-path="données-des-lycées-pro..html"><a href="données-des-lycées-pro..html#importation-des-données"><i class="fa fa-check"></i><b>8.1</b> Importation des données</a></li>
<li class="chapter" data-level="8.2" data-path="données-des-lycées-pro..html"><a href="données-des-lycées-pro..html#analyses"><i class="fa fa-check"></i><b>8.2</b> Analyses</a></li>
<li class="chapter" data-level="8.3" data-path="données-des-lycées-pro..html"><a href="données-des-lycées-pro..html#quiz.."><i class="fa fa-check"></i><b>8.3</b> Quiz..</a></li>
<li class="chapter" data-level="8.4" data-path="données-des-lycées-pro..html"><a href="données-des-lycées-pro..html#bénéficiaires"><i class="fa fa-check"></i><b>8.4</b> Bénéficiaires</a></li>
<li class="chapter" data-level="8.5" data-path="données-des-lycées-pro..html"><a href="données-des-lycées-pro..html#par-groupe-politique"><i class="fa fa-check"></i><b>8.5</b> Par groupe politique</a></li>
<li class="chapter" data-level="8.6" data-path="données-des-lycées-pro..html"><a href="données-des-lycées-pro..html#exportation-1"><i class="fa fa-check"></i><b>8.6</b> Exportation</a></li>
<li class="chapter" data-level="8.7" data-path="données-des-lycées-pro..html"><a href="données-des-lycées-pro..html#les-sommes-par-acteurs"><i class="fa fa-check"></i><b>8.7</b> Les sommes par acteurs</a></li>
<li class="chapter" data-level="8.8" data-path="données-des-lycées-pro..html"><a href="données-des-lycées-pro..html#quoi-faire-avec-le-descriptif"><i class="fa fa-check"></i><b>8.8</b> Quoi faire avec le descriptif ?</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="enquête-emploi.html"><a href="enquête-emploi.html"><i class="fa fa-check"></i><b>9</b> Enquête Emploi</a>
<ul>
<li class="chapter" data-level="9.1" data-path="enquête-emploi.html"><a href="enquête-emploi.html#exemple-de-calcul-dindicateurs"><i class="fa fa-check"></i><b>9.1</b> Exemple de calcul d’indicateurs</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="exercices.html"><a href="exercices.html"><i class="fa fa-check"></i><b>10</b> Exercices</a>
<ul>
<li class="chapter" data-level="10.1" data-path="exercices.html"><a href="exercices.html#ask-a-manager"><i class="fa fa-check"></i><b>10.1</b> Ask A Manager</a></li>
<li class="chapter" data-level="10.2" data-path="exercices.html"><a href="exercices.html#pisa"><i class="fa fa-check"></i><b>10.2</b> PISA</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">A Minimal Book on R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="le-langage-r" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Le langage R<a href="le-langage-r.html#le-langage-r" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="introduction" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Introduction<a href="le-langage-r.html#introduction" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Le but est d’aborder des notions et de voir quelques exemples.</p>
<p>R ne fonctionne pas comme JASP, Jamovi, SAS ou SPSS. Par exemple SPSS, vous ouvrez une
source de données et vous voyez vos données sur un tableur.</p>
<p>Quand vous passez une commande sur SPSS, il n’y a pas d’ambiguité, le traitement
se fait sur le tableur actif.</p>
<p>Avec SAS, on ajoute une dose de complexité, car vous avez des bibliothèques
et des tables.</p>
<p>Dans les deux cas, quand vous lancez une procédure statistique vous récupérez
les résultats dans une fenêtre dédié car il y a une séparation des données
et des résultats (dans la quasi-totalité des cas).</p>
<p>Avec R, c’est différent. R est un langage de programmation comme Python, Pascal,
Rust, etc.</p>
<p>La force de R et ce qui le rend compliqué est qu’il n’y a pas de séparation aussi
stricte entre données et résultats.</p>
<p>Vous avez des objets en mémoire dans R et ces objets peuvent servir aussi bien
de sources de données, d’arguments pour sélectionner une partie des résultats ou
bien être des résultats d’une opérations statistiques.</p>
</div>
<div id="un-exemple-de-traitement-de-données" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Un exemple de traitement de données<a href="le-langage-r.html#un-exemple-de-traitement-de-données" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>On va travailler sur une base de données qui sont les iris de Fisher. C’est
plus simple car c’est un jeu de données qui est en mémoire dans R, on verra
comment charger une source de données plus tard.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="le-langage-r.html#cb11-1" tabindex="-1"></a><span class="fu">data</span>(iris)</span></code></pre></div>
<p>Vous pouvez cliquer sur <strong>iris</strong> qui est apparu dans la fenêtre en haut
à droite de RStudio. Elle ouvre un tableur assez frustre mais qui permet
de visualiser les données.</p>
<p>Mais c’est une très mauvaise habitude d’utiliser ce tableur pour visualiser
les données.</p>
<p>Il vaut mieux taper :</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="le-langage-r.html#cb12-1" tabindex="-1"></a><span class="fu">str</span>(iris)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    150 obs. of  5 variables:
##  $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
##  $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
##  $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
##  $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
##  $ Species     : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
<p><strong>str</strong> c’est pour <strong>structure</strong>. Enfin je crois. Elle vous décrit quelle est la
nature de l’objet et de quoi il est composé. Ca peut être rudemment complexe.</p>
<p>Mais là non. Il nous dit que c’est une <strong>data.frame</strong>. Le type <strong>data.frame</strong>
est ce qui se rapproche le plus d’un tableau de données comme dans SPSS ou Jamovi.</p>
<p>R nous dit que la data.frame a 150 observations et 5 variables. La structure est
tabulaire comme dans Jamovi ou JASP: on a 150 relevés de plante (individus) et
on a gardé 5 éléments caractérisant l’individu.</p>
<ul>
<li>Sepal.Length : <strong>num</strong> veut dire <strong>numeric</strong>, c’est une taille de Sépale.</li>
<li>Sepal.Width : <strong>num</strong> veut dire <strong>numeric</strong>, c’est une taille de Sépale.</li>
<li>…</li>
<li>Species : c’est l’espèce, qui peut prendre 3 valeurs. Dans un type appelé
<strong>Factor</strong></li>
</ul>
<p>On voit que R sépare bien chacune des variables. Pour schématiser dans notre cas
nous avons des individus en ligne et des observations en colonne. Comme Jamovi.</p>
</div>
<div id="vecteurs" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Vecteurs<a href="le-langage-r.html#vecteurs" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="exemple-de-vecteurs" class="section level3 hasAnchor" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> Exemple de vecteurs<a href="le-langage-r.html#exemple-de-vecteurs" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Là où ça devient différent c’est que la <strong>data.frame</strong> est en fait un aggrégat
d’élements plus simples.</p>
<p>Vous pouvez extraire par exemple la longueur des sépales pour tous les individus:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="le-langage-r.html#cb14-1" tabindex="-1"></a>iris[,<span class="st">&quot;Sepal.Length&quot;</span>]</span></code></pre></div>
<pre><code>##   [1] 5.1 4.9 4.7 4.6 5.0 5.4 4.6 5.0 4.4 4.9 5.4 4.8 4.8 4.3 5.8 5.7 5.4 5.1 5.7 5.1 5.4 5.1 4.6 5.1 4.8 5.0 5.0
##  [28] 5.2 5.2 4.7 4.8 5.4 5.2 5.5 4.9 5.0 5.5 4.9 4.4 5.1 5.0 4.5 4.4 5.0 5.1 4.8 5.1 4.6 5.3 5.0 7.0 6.4 6.9 5.5
##  [55] 6.5 5.7 6.3 4.9 6.6 5.2 5.0 5.9 6.0 6.1 5.6 6.7 5.6 5.8 6.2 5.6 5.9 6.1 6.3 6.1 6.4 6.6 6.8 6.7 6.0 5.7 5.5
##  [82] 5.5 5.8 6.0 5.4 6.0 6.7 6.3 5.6 5.5 5.5 6.1 5.8 5.0 5.6 5.7 5.7 6.2 5.1 5.7 6.3 5.8 7.1 6.3 6.5 7.6 4.9 7.3
## [109] 6.7 7.2 6.5 6.4 6.8 5.7 5.8 6.4 6.5 7.7 7.7 6.0 6.9 5.6 7.7 6.3 6.7 7.2 6.2 6.1 6.4 7.2 7.4 7.9 6.4 6.3 6.1
## [136] 7.7 6.3 6.4 6.0 6.9 6.7 6.9 5.8 6.8 6.7 6.7 6.3 6.5 6.2 5.9</code></pre>
<p>Vous regardez par colonne, vous obtenez les valeurs pour les 150 individus.</p>
<p>Si vous regardez la structure de ce que vous avez obtenu :</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="le-langage-r.html#cb16-1" tabindex="-1"></a><span class="fu">str</span>(iris[,<span class="st">&quot;Sepal.Length&quot;</span>])</span></code></pre></div>
<pre><code>##  num [1:150] 5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...</code></pre>
<p>Vous voyez que ce qui s’affichait tout à l’heure sur la <strong>data.frame</strong>.</p>
<p>Vous pouvez calculer la moyenne des longueurs:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="le-langage-r.html#cb18-1" tabindex="-1"></a><span class="fu">mean</span>(iris[,<span class="st">&quot;Sepal.Length&quot;</span>])</span></code></pre></div>
<pre><code>## [1] 5.843333</code></pre>
<p>Vous venez de faire une opération sur un vecteur. C’est un ensemble qui est typé
ici des numériques mais ça peut être du texte, des entiers, etc. respectivement
<strong>character</strong>, <strong>integer</strong>, etc.</p>
<p>Vous pouvez extraire ce vecteur :</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="le-langage-r.html#cb20-1" tabindex="-1"></a>longueur.sepale <span class="ot">&lt;-</span> iris[,<span class="st">&quot;Sepal.Length&quot;</span>]</span></code></pre></div>
<p>Vous remarquez que R n’affiche pas le résultat de l’opération car on ne lui demande
pas de résultat. On affecte la partie à droite de “&lt;-” à la partie gauche.</p>
<p>Si on fait:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="le-langage-r.html#cb21-1" tabindex="-1"></a>longueur.sepale</span></code></pre></div>
<pre><code>##   [1] 5.1 4.9 4.7 4.6 5.0 5.4 4.6 5.0 4.4 4.9 5.4 4.8 4.8 4.3 5.8 5.7 5.4 5.1 5.7 5.1 5.4 5.1 4.6 5.1 4.8 5.0 5.0
##  [28] 5.2 5.2 4.7 4.8 5.4 5.2 5.5 4.9 5.0 5.5 4.9 4.4 5.1 5.0 4.5 4.4 5.0 5.1 4.8 5.1 4.6 5.3 5.0 7.0 6.4 6.9 5.5
##  [55] 6.5 5.7 6.3 4.9 6.6 5.2 5.0 5.9 6.0 6.1 5.6 6.7 5.6 5.8 6.2 5.6 5.9 6.1 6.3 6.1 6.4 6.6 6.8 6.7 6.0 5.7 5.5
##  [82] 5.5 5.8 6.0 5.4 6.0 6.7 6.3 5.6 5.5 5.5 6.1 5.8 5.0 5.6 5.7 5.7 6.2 5.1 5.7 6.3 5.8 7.1 6.3 6.5 7.6 4.9 7.3
## [109] 6.7 7.2 6.5 6.4 6.8 5.7 5.8 6.4 6.5 7.7 7.7 6.0 6.9 5.6 7.7 6.3 6.7 7.2 6.2 6.1 6.4 7.2 7.4 7.9 6.4 6.3 6.1
## [136] 7.7 6.3 6.4 6.0 6.9 6.7 6.9 5.8 6.8 6.7 6.7 6.3 6.5 6.2 5.9</code></pre>
<p>On retrouve bien nos longueurs.</p>
<p>On peut en calculer la moyenne :</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="le-langage-r.html#cb23-1" tabindex="-1"></a><span class="fu">mean</span>(longueur.sepale)</span></code></pre></div>
<pre><code>## [1] 5.843333</code></pre>
<p>Qu’est ce qui se passe ? En fait on a indexé notre <strong>data.frame</strong>.</p>
<p>On a dit à R, renvoie nous la variable “Sepal.Length” et nous avons décidé de le
stocker dans une variable autre.</p>
</div>
<div id="création-de-vecteurs" class="section level3 hasAnchor" number="3.3.2">
<h3><span class="header-section-number">3.3.2</span> Création de vecteurs<a href="le-langage-r.html#création-de-vecteurs" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Pour créer un vecteur, il faut utiliser la fonction <strong>c</strong> pour <strong>concatenate</strong>.</p>
<p>Exemple :</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="le-langage-r.html#cb25-1" tabindex="-1"></a><span class="fu">c</span>(<span class="st">&quot;Sepal.Length&quot;</span>,<span class="st">&quot;Petal.Length&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Sepal.Length&quot; &quot;Petal.Length&quot;</code></pre>
<p>On peut l’affecter à une variable:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="le-langage-r.html#cb27-1" tabindex="-1"></a>longueurs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Sepal.Length&quot;</span>,<span class="st">&quot;Petal.Length&quot;</span>)</span></code></pre></div>
<p>C’est un vecteur :</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="le-langage-r.html#cb28-1" tabindex="-1"></a><span class="fu">str</span>(longueurs)</span></code></pre></div>
<pre><code>##  chr [1:2] &quot;Sepal.Length&quot; &quot;Petal.Length&quot;</code></pre>
<p>Maintenant on peut faire:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="le-langage-r.html#cb30-1" tabindex="-1"></a>iris[,longueurs]</span></code></pre></div>
<pre><code>##     Sepal.Length Petal.Length
## 1            5.1          1.4
## 2            4.9          1.4
## 3            4.7          1.3
## 4            4.6          1.5
## 5            5.0          1.4
## 6            5.4          1.7
## 7            4.6          1.4
## 8            5.0          1.5
## 9            4.4          1.4
## 10           4.9          1.5
## 11           5.4          1.5
## 12           4.8          1.6
## 13           4.8          1.4
## 14           4.3          1.1
## 15           5.8          1.2
## 16           5.7          1.5
## 17           5.4          1.3
## 18           5.1          1.4
## 19           5.7          1.7
## 20           5.1          1.5
## 21           5.4          1.7
## 22           5.1          1.5
## 23           4.6          1.0
## 24           5.1          1.7
## 25           4.8          1.9
## 26           5.0          1.6
## 27           5.0          1.6
## 28           5.2          1.5
## 29           5.2          1.4
## 30           4.7          1.6
## 31           4.8          1.6
## 32           5.4          1.5
## 33           5.2          1.5
## 34           5.5          1.4
## 35           4.9          1.5
## 36           5.0          1.2
## 37           5.5          1.3
## 38           4.9          1.4
## 39           4.4          1.3
## 40           5.1          1.5
## 41           5.0          1.3
## 42           4.5          1.3
## 43           4.4          1.3
## 44           5.0          1.6
## 45           5.1          1.9
## 46           4.8          1.4
## 47           5.1          1.6
## 48           4.6          1.4
## 49           5.3          1.5
## 50           5.0          1.4
## 51           7.0          4.7
## 52           6.4          4.5
## 53           6.9          4.9
## 54           5.5          4.0
## 55           6.5          4.6
## 56           5.7          4.5
## 57           6.3          4.7
## 58           4.9          3.3
## 59           6.6          4.6
## 60           5.2          3.9
## 61           5.0          3.5
## 62           5.9          4.2
## 63           6.0          4.0
## 64           6.1          4.7
## 65           5.6          3.6
## 66           6.7          4.4
## 67           5.6          4.5
## 68           5.8          4.1
## 69           6.2          4.5
## 70           5.6          3.9
## 71           5.9          4.8
## 72           6.1          4.0
## 73           6.3          4.9
## 74           6.1          4.7
## 75           6.4          4.3
## 76           6.6          4.4
## 77           6.8          4.8
## 78           6.7          5.0
## 79           6.0          4.5
## 80           5.7          3.5
## 81           5.5          3.8
## 82           5.5          3.7
## 83           5.8          3.9
## 84           6.0          5.1
## 85           5.4          4.5
## 86           6.0          4.5
## 87           6.7          4.7
## 88           6.3          4.4
## 89           5.6          4.1
## 90           5.5          4.0
## 91           5.5          4.4
## 92           6.1          4.6
## 93           5.8          4.0
## 94           5.0          3.3
## 95           5.6          4.2
## 96           5.7          4.2
## 97           5.7          4.2
## 98           6.2          4.3
## 99           5.1          3.0
## 100          5.7          4.1
## 101          6.3          6.0
## 102          5.8          5.1
## 103          7.1          5.9
## 104          6.3          5.6
## 105          6.5          5.8
## 106          7.6          6.6
## 107          4.9          4.5
## 108          7.3          6.3
## 109          6.7          5.8
## 110          7.2          6.1
## 111          6.5          5.1
## 112          6.4          5.3
## 113          6.8          5.5
## 114          5.7          5.0
## 115          5.8          5.1
## 116          6.4          5.3
## 117          6.5          5.5
## 118          7.7          6.7
## 119          7.7          6.9
## 120          6.0          5.0
## 121          6.9          5.7
## 122          5.6          4.9
## 123          7.7          6.7
## 124          6.3          4.9
## 125          6.7          5.7
## 126          7.2          6.0
## 127          6.2          4.8
## 128          6.1          4.9
## 129          6.4          5.6
## 130          7.2          5.8
## 131          7.4          6.1
## 132          7.9          6.4
## 133          6.4          5.6
## 134          6.3          5.1
## 135          6.1          5.6
## 136          7.7          6.1
## 137          6.3          5.6
## 138          6.4          5.5
## 139          6.0          4.8
## 140          6.9          5.4
## 141          6.7          5.6
## 142          6.9          5.1
## 143          5.8          5.1
## 144          6.8          5.9
## 145          6.7          5.7
## 146          6.7          5.2
## 147          6.3          5.0
## 148          6.5          5.2
## 149          6.2          5.4
## 150          5.9          5.1</code></pre>
<p>On vient d’indexer iris avec un vecteur composé de deux noms qui sont les noms
des variables.</p>
<p>R lit la partie droite de la virgule et comprends que nous voulons les deux variables.
Quelle est la structure de ce que l’on récupère :</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="le-langage-r.html#cb32-1" tabindex="-1"></a><span class="fu">str</span>(iris[,longueurs])</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    150 obs. of  2 variables:
##  $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
##  $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...</code></pre>
<p>C’est une <strong>data.frame</strong> les informations sur nos 150 individus pour les longueurs.</p>
<p>on peut faire:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="le-langage-r.html#cb34-1" tabindex="-1"></a>iris.longueurs <span class="ot">&lt;-</span> iris[,longueurs]</span>
<span id="cb34-2"><a href="le-langage-r.html#cb34-2" tabindex="-1"></a><span class="fu">str</span>(iris.longueurs)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    150 obs. of  2 variables:
##  $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
##  $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="le-langage-r.html#cb36-1" tabindex="-1"></a>iris.longueurs[,<span class="st">&quot;Sepal.Length&quot;</span>]</span></code></pre></div>
<pre><code>##   [1] 5.1 4.9 4.7 4.6 5.0 5.4 4.6 5.0 4.4 4.9 5.4 4.8 4.8 4.3 5.8 5.7 5.4 5.1 5.7 5.1 5.4 5.1 4.6 5.1 4.8 5.0 5.0
##  [28] 5.2 5.2 4.7 4.8 5.4 5.2 5.5 4.9 5.0 5.5 4.9 4.4 5.1 5.0 4.5 4.4 5.0 5.1 4.8 5.1 4.6 5.3 5.0 7.0 6.4 6.9 5.5
##  [55] 6.5 5.7 6.3 4.9 6.6 5.2 5.0 5.9 6.0 6.1 5.6 6.7 5.6 5.8 6.2 5.6 5.9 6.1 6.3 6.1 6.4 6.6 6.8 6.7 6.0 5.7 5.5
##  [82] 5.5 5.8 6.0 5.4 6.0 6.7 6.3 5.6 5.5 5.5 6.1 5.8 5.0 5.6 5.7 5.7 6.2 5.1 5.7 6.3 5.8 7.1 6.3 6.5 7.6 4.9 7.3
## [109] 6.7 7.2 6.5 6.4 6.8 5.7 5.8 6.4 6.5 7.7 7.7 6.0 6.9 5.6 7.7 6.3 6.7 7.2 6.2 6.1 6.4 7.2 7.4 7.9 6.4 6.3 6.1
## [136] 7.7 6.3 6.4 6.0 6.9 6.7 6.9 5.8 6.8 6.7 6.7 6.3 6.5 6.2 5.9</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="le-langage-r.html#cb38-1" tabindex="-1"></a><span class="fu">mean</span>(iris.longueurs[,<span class="st">&quot;Sepal.Length&quot;</span>])</span></code></pre></div>
<pre><code>## [1] 5.843333</code></pre>
</div>
<div id="les-types-de-vecteurs" class="section level3 hasAnchor" number="3.3.3">
<h3><span class="header-section-number">3.3.3</span> Les types de vecteurs<a href="le-langage-r.html#les-types-de-vecteurs" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>les vecteurs en résumé peuvent être :
- des numéros entiers, <strong>int</strong>
- des chaines de caractères, <strong>chr</strong>
- des logiques, <strong>logi</strong>
- des réels, <strong>num</strong>
- …</p>
<p>On peut créer un vecteur d’entiers</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="le-langage-r.html#cb40-1" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] 1 3</code></pre>
<p>Un vecteur de logique: (T pour vrai, F pour faux)</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="le-langage-r.html#cb42-1" tabindex="-1"></a><span class="fu">c</span>(T,F,T,F,F)</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE  TRUE FALSE FALSE</code></pre>
<p>Et là surprise : si on demande à R de nous retourner la première et la troisième
variable de iris</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="le-langage-r.html#cb44-1" tabindex="-1"></a><span class="fu">str</span>(iris[,<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)])</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    150 obs. of  2 variables:
##  $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
##  $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...</code></pre>
<p>Plus compliqué. On sait qu’il y a 5 variables dans iris ? On est d’accord ?
Donc si on lui demande de nous renvoyer la variable quand c’est vrai et de ne pas
nous la renvoyer quand c’est faux ?</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="le-langage-r.html#cb46-1" tabindex="-1"></a><span class="fu">str</span>(iris[,<span class="fu">c</span>(T,F,T,F,F)])</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    150 obs. of  2 variables:
##  $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
##  $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...</code></pre>
<p>En fait les <strong>data.frame</strong>s sont des agrégats de vecteurs que l’on peut indexer
avec des vecteurs.</p>
<p>Pourquoi on ne peut pas faire :</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="le-langage-r.html#cb48-1" tabindex="-1"></a><span class="fu">mean</span>(iris.longueurs)</span></code></pre></div>
<p>parce qu’on a deux variables ? R refuse de faire ce qui n’a pas de sens.</p>
<p>Après tout on voudrait faire la moyenne de sépale et de pétale. Déjà mais
ça pourrait être pire :</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="le-langage-r.html#cb49-1" tabindex="-1"></a><span class="fu">mean</span>(iris[,<span class="fu">c</span>(<span class="st">&quot;Sepal.Length&quot;</span>,<span class="st">&quot;Species&quot;</span>)])</span></code></pre></div>
<p>C’est la catastrophe. Vous essayez de faire une moyenne sur une variable texte
et une variable continue. C’est faux.</p>
<p>Pour faire le résumer d’une variable texte:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="le-langage-r.html#cb50-1" tabindex="-1"></a><span class="fu">table</span>(iris[,<span class="st">&quot;Species&quot;</span>])</span></code></pre></div>
<pre><code>## 
##     setosa versicolor  virginica 
##         50         50         50</code></pre>
</div>
<div id="pour-résumé" class="section level3 hasAnchor" number="3.3.4">
<h3><span class="header-section-number">3.3.4</span> Pour résumé<a href="le-langage-r.html#pour-résumé" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>On a les <strong>data.frame</strong>, on a les <strong>vector</strong> de différents types. On sait qu’on
peut sélectionner les variables par l’intermédiaire de vecteurs.</p>
</div>
</div>
<div id="sélection-des-individus" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> Sélection des individus<a href="le-langage-r.html#sélection-des-individus" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Intuitivement, comment sélectionner des individus ?</p>
<p>Ca marche comme pour les variables, on utilise des vecteurs ?</p>
<p>On veut les individus de 1 et 5.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="le-langage-r.html#cb52-1" tabindex="-1"></a><span class="fu">str</span>(iris[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span>),])</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    2 obs. of  5 variables:
##  $ Sepal.Length: num  5.1 5
##  $ Sepal.Width : num  3.5 3.6
##  $ Petal.Length: num  1.4 1.4
##  $ Petal.Width : num  0.2 0.2
##  $ Species     : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1</code></pre>
<p>Attention à la place de la virgule. Cette fois on sélectionne des lignes. A gauche
de la virgule pour des lignes et à droite pour les colonnes.</p>
<p>C’est tout bon.</p>
<p>On a vu qu’il y avait trois espèces. Si on veut sélectionner ceux qui sont du type
<strong>versicolor</strong> ?</p>
<p>On se rappele des vecteurs de logique: là où iris[,“Species”] vaudra <strong>versicolor</strong>
on sélectionne et là où ce n’est pas <strong>versicolor</strong> on ne sélectionne pas.</p>
<p>On ne va pas le faire à la main. On ne fait rien à la main sous R.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="le-langage-r.html#cb54-1" tabindex="-1"></a>especes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;versicolor&quot;</span>,<span class="st">&quot;truc&quot;</span>,<span class="st">&quot;versicolor&quot;</span>,<span class="st">&quot;setosa&quot;</span>)</span>
<span id="cb54-2"><a href="le-langage-r.html#cb54-2" tabindex="-1"></a>especes</span></code></pre></div>
<pre><code>## [1] &quot;versicolor&quot; &quot;truc&quot;       &quot;versicolor&quot; &quot;setosa&quot;</code></pre>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="le-langage-r.html#cb56-1" tabindex="-1"></a>especes<span class="sc">==</span><span class="st">&quot;versicolor&quot;</span></span></code></pre></div>
<pre><code>## [1]  TRUE FALSE  TRUE FALSE</code></pre>
<p>On l’adapte pour notre cas :</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="le-langage-r.html#cb58-1" tabindex="-1"></a>iris[,<span class="st">&quot;Species&quot;</span>]<span class="sc">==</span><span class="st">&quot;versicolor&quot;</span></span></code></pre></div>
<pre><code>##   [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [19] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [37] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE
##  [55]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [91]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [127] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [145] FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
<p>Donc on indexe les individus :</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="le-langage-r.html#cb60-1" tabindex="-1"></a>versicolor <span class="ot">&lt;-</span> iris[iris[,<span class="st">&quot;Species&quot;</span>]<span class="sc">==</span><span class="st">&quot;versicolor&quot;</span>,]</span></code></pre></div>
<p>Faites un point pour voir si tout est conforme dans votre esprit sur la place
des accolades, etc. En fait c’est le <strong>old-fashioned</strong> R.</p>
<p>En fait ça commence à devenir compliqué, alors des gens on fait des fonctions
qui génère des vecteurs… à partir de mots anglais.</p>
<p>On va créer ainsi de gauche à droite des sous espaces pour ne retenir que ce
qui nous intéresse.</p>
<p>Exemple :
from iris, filter Species==“versicolor”,</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="le-langage-r.html#cb61-1" tabindex="-1"></a><span class="fu">require</span>(tidyverse)</span></code></pre></div>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="le-langage-r.html#cb62-1" tabindex="-1"></a>iris <span class="sc">|&gt;</span> <span class="fu">filter</span>(Species<span class="sc">==</span><span class="st">&quot;setosa&quot;</span>)</span></code></pre></div>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1           5.1         3.5          1.4         0.2  setosa
## 2           4.9         3.0          1.4         0.2  setosa
## 3           4.7         3.2          1.3         0.2  setosa
## 4           4.6         3.1          1.5         0.2  setosa
## 5           5.0         3.6          1.4         0.2  setosa
## 6           5.4         3.9          1.7         0.4  setosa
## 7           4.6         3.4          1.4         0.3  setosa
## 8           5.0         3.4          1.5         0.2  setosa
## 9           4.4         2.9          1.4         0.2  setosa
## 10          4.9         3.1          1.5         0.1  setosa
## 11          5.4         3.7          1.5         0.2  setosa
## 12          4.8         3.4          1.6         0.2  setosa
## 13          4.8         3.0          1.4         0.1  setosa
## 14          4.3         3.0          1.1         0.1  setosa
## 15          5.8         4.0          1.2         0.2  setosa
## 16          5.7         4.4          1.5         0.4  setosa
## 17          5.4         3.9          1.3         0.4  setosa
## 18          5.1         3.5          1.4         0.3  setosa
## 19          5.7         3.8          1.7         0.3  setosa
## 20          5.1         3.8          1.5         0.3  setosa
## 21          5.4         3.4          1.7         0.2  setosa
## 22          5.1         3.7          1.5         0.4  setosa
## 23          4.6         3.6          1.0         0.2  setosa
## 24          5.1         3.3          1.7         0.5  setosa
## 25          4.8         3.4          1.9         0.2  setosa
## 26          5.0         3.0          1.6         0.2  setosa
## 27          5.0         3.4          1.6         0.4  setosa
## 28          5.2         3.5          1.5         0.2  setosa
## 29          5.2         3.4          1.4         0.2  setosa
## 30          4.7         3.2          1.6         0.2  setosa
## 31          4.8         3.1          1.6         0.2  setosa
## 32          5.4         3.4          1.5         0.4  setosa
## 33          5.2         4.1          1.5         0.1  setosa
## 34          5.5         4.2          1.4         0.2  setosa
## 35          4.9         3.1          1.5         0.2  setosa
## 36          5.0         3.2          1.2         0.2  setosa
## 37          5.5         3.5          1.3         0.2  setosa
## 38          4.9         3.6          1.4         0.1  setosa
## 39          4.4         3.0          1.3         0.2  setosa
## 40          5.1         3.4          1.5         0.2  setosa
## 41          5.0         3.5          1.3         0.3  setosa
## 42          4.5         2.3          1.3         0.3  setosa
## 43          4.4         3.2          1.3         0.2  setosa
## 44          5.0         3.5          1.6         0.6  setosa
## 45          5.1         3.8          1.9         0.4  setosa
## 46          4.8         3.0          1.4         0.3  setosa
## 47          5.1         3.8          1.6         0.2  setosa
## 48          4.6         3.2          1.4         0.2  setosa
## 49          5.3         3.7          1.5         0.2  setosa
## 50          5.0         3.3          1.4         0.2  setosa</code></pre>
<div id="calcul-de-la-moyenne-et-nouveaux-générateurs" class="section level3 hasAnchor" number="3.4.1">
<h3><span class="header-section-number">3.4.1</span> Calcul de la moyenne et nouveaux générateurs<a href="le-langage-r.html#calcul-de-la-moyenne-et-nouveaux-générateurs" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Pour la moyenne des longueurs de sépales ?</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="le-langage-r.html#cb64-1" tabindex="-1"></a>iris <span class="sc">|&gt;</span> <span class="fu">summarise</span>(<span class="at">moyenne=</span><span class="fu">mean</span>(Sepal.Length))  </span></code></pre></div>
<pre><code>##    moyenne
## 1 5.843333</code></pre>
<p>Ce qui devient :</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="le-langage-r.html#cb66-1" tabindex="-1"></a>iris <span class="sc">|&gt;</span> <span class="fu">filter</span>(Species<span class="sc">==</span><span class="st">&quot;setosa&quot;</span>) <span class="sc">|&gt;</span> <span class="fu">summarise</span>(<span class="at">moyenne=</span><span class="fu">mean</span>(Sepal.Length))</span></code></pre></div>
<pre><code>##   moyenne
## 1   5.006</code></pre>
<p>Mais y’a des choses plus pratique.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="le-langage-r.html#cb68-1" tabindex="-1"></a>iris <span class="sc">|&gt;</span> <span class="fu">group_by</span>(Species) <span class="sc">|&gt;</span> <span class="fu">summarise</span>(<span class="at">moyenne=</span><span class="fu">mean</span>(Sepal.Length))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##   Species    moyenne
##   &lt;fct&gt;        &lt;dbl&gt;
## 1 setosa        5.01
## 2 versicolor    5.94
## 3 virginica     6.59</code></pre>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="le-langage-r.html#cb70-1" tabindex="-1"></a><span class="fu">quantile</span>(iris[,<span class="st">&quot;Sepal.Length&quot;</span>])</span></code></pre></div>
<pre><code>##   0%  25%  50%  75% 100% 
##  4.3  5.1  5.8  6.4  7.9</code></pre>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="le-langage-r.html#cb72-1" tabindex="-1"></a>iris <span class="sc">|&gt;</span> <span class="fu">group_by</span>(Species) <span class="sc">|&gt;</span> <span class="fu">summarise</span>(<span class="at">moy.Sepal.Length=</span><span class="fu">mean</span>(Sepal.Length),<span class="at">ec=</span><span class="fu">sd</span>(Sepal.Length),<span class="at">mediane=</span><span class="fu">quantile</span>(Sepal.Length,<span class="at">probs=</span><span class="fl">0.5</span>))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 4
##   Species    moy.Sepal.Length    ec mediane
##   &lt;fct&gt;                 &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
## 1 setosa                 5.01 0.352     5  
## 2 versicolor             5.94 0.516     5.9
## 3 virginica              6.59 0.636     6.5</code></pre>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="le-langage-r.html#cb74-1" tabindex="-1"></a>iris <span class="sc">|&gt;</span> <span class="fu">group_by</span>(Species) <span class="sc">|&gt;</span> <span class="fu">summarise</span>(<span class="at">moy.Sepal.Length=</span><span class="fu">mean</span>(Sepal.Length),<span class="at">ec=</span><span class="fu">sd</span>(Sepal.Length),<span class="at">mediane=</span><span class="fu">quantile</span>(Sepal.Length,<span class="at">probs=</span><span class="fl">0.5</span>),<span class="at">q90=</span><span class="fu">quantile</span>(Sepal.Length,<span class="at">probs=</span><span class="fl">0.9</span>))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 5
##   Species    moy.Sepal.Length    ec mediane   q90
##   &lt;fct&gt;                 &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;
## 1 setosa                 5.01 0.352     5    5.41
## 2 versicolor             5.94 0.516     5.9  6.7 
## 3 virginica              6.59 0.636     6.5  7.61</code></pre>
<p>Etc…</p>
<p>Ah au fait c’est quoi comme vient de retourner ?</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="le-langage-r.html#cb76-1" tabindex="-1"></a><span class="fu">str</span>(iris <span class="sc">|&gt;</span> <span class="fu">group_by</span>(Species) <span class="sc">|&gt;</span> <span class="fu">summarise</span>(<span class="at">sepal.length=</span><span class="fu">mean</span>(Sepal.Length),</span>
<span id="cb76-2"><a href="le-langage-r.html#cb76-2" tabindex="-1"></a>                                       <span class="at">sepal.width=</span><span class="fu">mean</span>(Sepal.Width)))</span></code></pre></div>
<pre><code>## tibble [3 × 3] (S3: tbl_df/tbl/data.frame)
##  $ Species     : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 2 3
##  $ sepal.length: num [1:3] 5.01 5.94 6.59
##  $ sepal.width : num [1:3] 3.43 2.77 2.97</code></pre>
<p>Calculer la moyenne de toutes les colonnes sauf Species ?</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="le-langage-r.html#cb78-1" tabindex="-1"></a>iris <span class="sc">|&gt;</span> <span class="fu">group_by</span>(Species) <span class="sc">|&gt;</span> <span class="fu">summarise</span>(<span class="fu">across</span>(Sepal.Length<span class="sc">:</span>Petal.Width,mean))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 5
##   Species    Sepal.Length Sepal.Width Petal.Length Petal.Width
##   &lt;fct&gt;             &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
## 1 setosa             5.01        3.43         1.46       0.246
## 2 versicolor         5.94        2.77         4.26       1.33 
## 3 virginica          6.59        2.97         5.55       2.03</code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="architecture-de-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="importation-de-données.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/01-intro.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
