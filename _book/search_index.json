[["index.html", "A Minimal Book on R Chapter 1 Objectif", " A Minimal Book on R Pascal Bessonneau 2024-04-04 Chapter 1 Objectif Ce document constitue la trame du cours sur R pour les doctorants “orientation” du CRTD du CNAM. Il n’est pas exhaustif et se place plutôt en appui du cours de M. Kilani. Il est construit sur les bases et sur les difficultés du langage. "],["architecture-de-r.html", "Chapter 2 Architecture de R 2.1 Paquets", " Chapter 2 Architecture de R R est à l’origine un logiciel de statistiques. Pour en faciliter l’usage il y avait une interface très rugueuse qui était livré avec sous Windows. Pour l’utiliser, en fait, il fallait écrire le code dans un bloc-notes (le code est du texte brut) et le coller dans la console de R. Vous pouvez toujours voir ce que ça donne en lançant R et non pas RStudio sur votre bureau. En prenant la mesure qu’il y a eu beaucoup de progrès de fait. Maintenant il existe RStudio, racheté par Posit. En fait c’est éditeur de texte grandement amélioré. Vous tapez le script dans la fenêtre en haut à gauche et vous l’exécutez en cliquant sur l’icone ou CTRL+ENTREE. Vous pouvez limiter ce que vous exécutez en sélectionnant du texte dans l’éditeur, seul le texte sélectionné sera soumis. En clair, comme RStudio est un éditeur amélioré : - le code qui n’est pas soumis, R ne le reconnait pas. Si vous créez une variable en ligne 4 mais que vous ne le soumettez pas, quand vous aurez besoin de la variable en ligne 30, elle n’existera pas. - l’éditeur de texte peut contenir autre chose que du texte simple. Par exemple du RMarkdown comme c’est le cas pour ce document. C’est un langage qui produit de l’HTML c’est-à-dire des pages web. Le Markdown est très simple, le langage tient sur une feuille : ici. - ou du LaTeX avec le mode knitr - On peut des graphiques R dans la fenêtre RStudio (en bas à droite) - RStudio peut servir pour la gestion de paquets - … RStudio fait donc beaucoup de choses. A noter que Jamovi et JASP utilisent aussi R sauf que pour eux ce n’est presque plus visible. A part dans les extensions et/ou les modules. Il y a des modules Jamovi pour écrire du code R ou pour faire des modèles structuraux directement en R dans Jamovi. Vous allez avoir une démonstration enregistré pour l’utilisation de RStudio. Les autres choses à rappeler, c’est que R est un langage cassee dépendant : - les noms de fonctions de R sont à écrire en minuscules - un objet n’est pas le même si une ou plusieurs lettres sont en majuscule au lieu d’être en minuscule. aAa &lt;- 2 AAa &lt;- 4 donc AAa ## [1] 4 et aAa ## [1] 2 Les commentaires dans R sont à noter avec des #. Tout ce qui suit le # est un commentaire. Comme RStudio vous l’aurez remarqué vous aide en analysant et en colorant le code, n’utilisez pas un script R pour mettre des remarques (et non du code) en dehors de commentaires. Sinon c’est la catastrophe… Utiliser toujours RStudio en mode Projet 2.1 Paquets Les fonctionnalités de R sont finalement assez limitées. Il fait un certain nombre de statistiques et surtout fourni des outils mathématiques puissants mais ça grande force est de proposer des paquets qui ajoute des fonctionnalités. Ces paquets sont développés par des gens (qui font ça sur leur temps personnel ou professionnel), des entreprises, des fondations, … La liste des paquets officiels est là Ils sont maintenant pléthoriques et je vous conseille de vous reportez à cette page. Elles répertorient les paquets utiles par domaine d’application. De plus les paquets un peu douteux en qualité n’y figure pas. Donc c’est du solide. Pour cela je vous recommande de l’utiliser pour se faire, suivez les instructions ci-dessous: install.packages(&quot;ctv&quot;) Puis quand vous voulez installer une vue (SocialSciences par exemple) : library(ctv) install.views(&quot;SocialSciences&quot;) On vient de voir comment appeler un paquet : library(tidyverse) ou require(tidyverse) Cela revient presque au même. Presque. Pour commencer vous pouvez utiliser library en priorité. Essayez d’installer un paquet : install.packages(&quot;readxl&quot;) Maintenant vous pouvez lire les fichiers Excel. Vous n’avez besoin d’installer le paquet qu’une fois mais vous devez le réclamer avec library la première fois que vous l’utilisez dans un script. La politique est de charger tous les paquets que vous utilisez en tête du script. Maintenant on va faire des statistiques. "],["le-langage-r.html", "Chapter 3 Le langage R 3.1 Introduction 3.2 Un exemple de traitement de données 3.3 Vecteurs 3.4 Sélection des individus", " Chapter 3 Le langage R 3.1 Introduction Le but est d’aborder des notions et de voir quelques exemples. R ne fonctionne pas comme JASP, Jamovi, SAS ou SPSS. Par exemple SPSS, vous ouvrez une source de données et vous voyez vos données sur un tableur. Quand vous passez une commande sur SPSS, il n’y a pas d’ambiguité, le traitement se fait sur le tableur actif. Avec SAS, on ajoute une dose de complexité, car vous avez des bibliothèques et des tables. Dans les deux cas, quand vous lancez une procédure statistique vous récupérez les résultats dans une fenêtre dédié car il y a une séparation des données et des résultats (dans la quasi-totalité des cas). Avec R, c’est différent. R est un langage de programmation comme Python, Pascal, Rust, etc. La force de R et ce qui le rend compliqué est qu’il n’y a pas de séparation aussi stricte entre données et résultats. Vous avez des objets en mémoire dans R et ces objets peuvent servir aussi bien de sources de données, d’arguments pour sélectionner une partie des résultats ou bien être des résultats d’une opérations statistiques. 3.2 Un exemple de traitement de données On va travailler sur une base de données qui sont les iris de Fisher. C’est plus simple car c’est un jeu de données qui est en mémoire dans R, on verra comment charger une source de données plus tard. data(iris) Vous pouvez cliquer sur iris qui est apparu dans la fenêtre en haut à droite de RStudio. Elle ouvre un tableur assez frustre mais qui permet de visualiser les données. Mais c’est une très mauvaise habitude d’utiliser ce tableur pour visualiser les données. Il vaut mieux taper : str(iris) ## &#39;data.frame&#39;: 150 obs. of 5 variables: ## $ Sepal.Length: num 5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ... ## $ Sepal.Width : num 3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ... ## $ Petal.Length: num 1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ... ## $ Petal.Width : num 0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ... ## $ Species : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ... str c’est pour structure. Enfin je crois. Elle vous décrit quelle est la nature de l’objet et de quoi il est composé. Ca peut être rudemment complexe. Mais là non. Il nous dit que c’est une data.frame. Le type data.frame est ce qui se rapproche le plus d’un tableau de données comme dans SPSS ou Jamovi. R nous dit que la data.frame a 150 observations et 5 variables. La structure est tabulaire comme dans Jamovi ou JASP: on a 150 relevés de plante (individus) et on a gardé 5 éléments caractérisant l’individu. Sepal.Length : num veut dire numeric, c’est une taille de Sépale. Sepal.Width : num veut dire numeric, c’est une taille de Sépale. … Species : c’est l’espèce, qui peut prendre 3 valeurs. Dans un type appelé Factor On voit que R sépare bien chacune des variables. Pour schématiser dans notre cas nous avons des individus en ligne et des observations en colonne. Comme Jamovi. 3.3 Vecteurs 3.3.1 Exemple de vecteurs Là où ça devient différent c’est que la data.frame est en fait un aggrégat d’élements plus simples. Vous pouvez extraire par exemple la longueur des sépales pour tous les individus: iris[,&quot;Sepal.Length&quot;] ## [1] 5.1 4.9 4.7 4.6 5.0 5.4 4.6 5.0 4.4 4.9 5.4 4.8 4.8 4.3 5.8 5.7 5.4 5.1 5.7 5.1 5.4 5.1 4.6 5.1 4.8 5.0 5.0 ## [28] 5.2 5.2 4.7 4.8 5.4 5.2 5.5 4.9 5.0 5.5 4.9 4.4 5.1 5.0 4.5 4.4 5.0 5.1 4.8 5.1 4.6 5.3 5.0 7.0 6.4 6.9 5.5 ## [55] 6.5 5.7 6.3 4.9 6.6 5.2 5.0 5.9 6.0 6.1 5.6 6.7 5.6 5.8 6.2 5.6 5.9 6.1 6.3 6.1 6.4 6.6 6.8 6.7 6.0 5.7 5.5 ## [82] 5.5 5.8 6.0 5.4 6.0 6.7 6.3 5.6 5.5 5.5 6.1 5.8 5.0 5.6 5.7 5.7 6.2 5.1 5.7 6.3 5.8 7.1 6.3 6.5 7.6 4.9 7.3 ## [109] 6.7 7.2 6.5 6.4 6.8 5.7 5.8 6.4 6.5 7.7 7.7 6.0 6.9 5.6 7.7 6.3 6.7 7.2 6.2 6.1 6.4 7.2 7.4 7.9 6.4 6.3 6.1 ## [136] 7.7 6.3 6.4 6.0 6.9 6.7 6.9 5.8 6.8 6.7 6.7 6.3 6.5 6.2 5.9 Vous regardez par colonne, vous obtenez les valeurs pour les 150 individus. Si vous regardez la structure de ce que vous avez obtenu : str(iris[,&quot;Sepal.Length&quot;]) ## num [1:150] 5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ... Vous voyez que ce qui s’affichait tout à l’heure sur la data.frame. Vous pouvez calculer la moyenne des longueurs: mean(iris[,&quot;Sepal.Length&quot;]) ## [1] 5.843333 Vous venez de faire une opération sur un vecteur. C’est un ensemble qui est typé ici des numériques mais ça peut être du texte, des entiers, etc. respectivement character, integer, etc. Vous pouvez extraire ce vecteur : longueur.sepale &lt;- iris[,&quot;Sepal.Length&quot;] Vous remarquez que R n’affiche pas le résultat de l’opération car on ne lui demande pas de résultat. On affecte la partie à droite de “&lt;-” à la partie gauche. Si on fait: longueur.sepale ## [1] 5.1 4.9 4.7 4.6 5.0 5.4 4.6 5.0 4.4 4.9 5.4 4.8 4.8 4.3 5.8 5.7 5.4 5.1 5.7 5.1 5.4 5.1 4.6 5.1 4.8 5.0 5.0 ## [28] 5.2 5.2 4.7 4.8 5.4 5.2 5.5 4.9 5.0 5.5 4.9 4.4 5.1 5.0 4.5 4.4 5.0 5.1 4.8 5.1 4.6 5.3 5.0 7.0 6.4 6.9 5.5 ## [55] 6.5 5.7 6.3 4.9 6.6 5.2 5.0 5.9 6.0 6.1 5.6 6.7 5.6 5.8 6.2 5.6 5.9 6.1 6.3 6.1 6.4 6.6 6.8 6.7 6.0 5.7 5.5 ## [82] 5.5 5.8 6.0 5.4 6.0 6.7 6.3 5.6 5.5 5.5 6.1 5.8 5.0 5.6 5.7 5.7 6.2 5.1 5.7 6.3 5.8 7.1 6.3 6.5 7.6 4.9 7.3 ## [109] 6.7 7.2 6.5 6.4 6.8 5.7 5.8 6.4 6.5 7.7 7.7 6.0 6.9 5.6 7.7 6.3 6.7 7.2 6.2 6.1 6.4 7.2 7.4 7.9 6.4 6.3 6.1 ## [136] 7.7 6.3 6.4 6.0 6.9 6.7 6.9 5.8 6.8 6.7 6.7 6.3 6.5 6.2 5.9 On retrouve bien nos longueurs. On peut en calculer la moyenne : mean(longueur.sepale) ## [1] 5.843333 Qu’est ce qui se passe ? En fait on a indexé notre data.frame. On a dit à R, renvoie nous la variable “Sepal.Length” et nous avons décidé de le stocker dans une variable autre. 3.3.2 Création de vecteurs Pour créer un vecteur, il faut utiliser la fonction c pour concatenate. Exemple : c(&quot;Sepal.Length&quot;,&quot;Petal.Length&quot;) ## [1] &quot;Sepal.Length&quot; &quot;Petal.Length&quot; On peut l’affecter à une variable: longueurs &lt;- c(&quot;Sepal.Length&quot;,&quot;Petal.Length&quot;) C’est un vecteur : str(longueurs) ## chr [1:2] &quot;Sepal.Length&quot; &quot;Petal.Length&quot; Maintenant on peut faire: iris[,longueurs] ## Sepal.Length Petal.Length ## 1 5.1 1.4 ## 2 4.9 1.4 ## 3 4.7 1.3 ## 4 4.6 1.5 ## 5 5.0 1.4 ## 6 5.4 1.7 ## 7 4.6 1.4 ## 8 5.0 1.5 ## 9 4.4 1.4 ## 10 4.9 1.5 ## 11 5.4 1.5 ## 12 4.8 1.6 ## 13 4.8 1.4 ## 14 4.3 1.1 ## 15 5.8 1.2 ## 16 5.7 1.5 ## 17 5.4 1.3 ## 18 5.1 1.4 ## 19 5.7 1.7 ## 20 5.1 1.5 ## 21 5.4 1.7 ## 22 5.1 1.5 ## 23 4.6 1.0 ## 24 5.1 1.7 ## 25 4.8 1.9 ## 26 5.0 1.6 ## 27 5.0 1.6 ## 28 5.2 1.5 ## 29 5.2 1.4 ## 30 4.7 1.6 ## 31 4.8 1.6 ## 32 5.4 1.5 ## 33 5.2 1.5 ## 34 5.5 1.4 ## 35 4.9 1.5 ## 36 5.0 1.2 ## 37 5.5 1.3 ## 38 4.9 1.4 ## 39 4.4 1.3 ## 40 5.1 1.5 ## 41 5.0 1.3 ## 42 4.5 1.3 ## 43 4.4 1.3 ## 44 5.0 1.6 ## 45 5.1 1.9 ## 46 4.8 1.4 ## 47 5.1 1.6 ## 48 4.6 1.4 ## 49 5.3 1.5 ## 50 5.0 1.4 ## 51 7.0 4.7 ## 52 6.4 4.5 ## 53 6.9 4.9 ## 54 5.5 4.0 ## 55 6.5 4.6 ## 56 5.7 4.5 ## 57 6.3 4.7 ## 58 4.9 3.3 ## 59 6.6 4.6 ## 60 5.2 3.9 ## 61 5.0 3.5 ## 62 5.9 4.2 ## 63 6.0 4.0 ## 64 6.1 4.7 ## 65 5.6 3.6 ## 66 6.7 4.4 ## 67 5.6 4.5 ## 68 5.8 4.1 ## 69 6.2 4.5 ## 70 5.6 3.9 ## 71 5.9 4.8 ## 72 6.1 4.0 ## 73 6.3 4.9 ## 74 6.1 4.7 ## 75 6.4 4.3 ## 76 6.6 4.4 ## 77 6.8 4.8 ## 78 6.7 5.0 ## 79 6.0 4.5 ## 80 5.7 3.5 ## 81 5.5 3.8 ## 82 5.5 3.7 ## 83 5.8 3.9 ## 84 6.0 5.1 ## 85 5.4 4.5 ## 86 6.0 4.5 ## 87 6.7 4.7 ## 88 6.3 4.4 ## 89 5.6 4.1 ## 90 5.5 4.0 ## 91 5.5 4.4 ## 92 6.1 4.6 ## 93 5.8 4.0 ## 94 5.0 3.3 ## 95 5.6 4.2 ## 96 5.7 4.2 ## 97 5.7 4.2 ## 98 6.2 4.3 ## 99 5.1 3.0 ## 100 5.7 4.1 ## 101 6.3 6.0 ## 102 5.8 5.1 ## 103 7.1 5.9 ## 104 6.3 5.6 ## 105 6.5 5.8 ## 106 7.6 6.6 ## 107 4.9 4.5 ## 108 7.3 6.3 ## 109 6.7 5.8 ## 110 7.2 6.1 ## 111 6.5 5.1 ## 112 6.4 5.3 ## 113 6.8 5.5 ## 114 5.7 5.0 ## 115 5.8 5.1 ## 116 6.4 5.3 ## 117 6.5 5.5 ## 118 7.7 6.7 ## 119 7.7 6.9 ## 120 6.0 5.0 ## 121 6.9 5.7 ## 122 5.6 4.9 ## 123 7.7 6.7 ## 124 6.3 4.9 ## 125 6.7 5.7 ## 126 7.2 6.0 ## 127 6.2 4.8 ## 128 6.1 4.9 ## 129 6.4 5.6 ## 130 7.2 5.8 ## 131 7.4 6.1 ## 132 7.9 6.4 ## 133 6.4 5.6 ## 134 6.3 5.1 ## 135 6.1 5.6 ## 136 7.7 6.1 ## 137 6.3 5.6 ## 138 6.4 5.5 ## 139 6.0 4.8 ## 140 6.9 5.4 ## 141 6.7 5.6 ## 142 6.9 5.1 ## 143 5.8 5.1 ## 144 6.8 5.9 ## 145 6.7 5.7 ## 146 6.7 5.2 ## 147 6.3 5.0 ## 148 6.5 5.2 ## 149 6.2 5.4 ## 150 5.9 5.1 On vient d’indexer iris avec un vecteur composé de deux noms qui sont les noms des variables. R lit la partie droite de la virgule et comprends que nous voulons les deux variables. Quelle est la structure de ce que l’on récupère : str(iris[,longueurs]) ## &#39;data.frame&#39;: 150 obs. of 2 variables: ## $ Sepal.Length: num 5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ... ## $ Petal.Length: num 1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ... C’est une data.frame les informations sur nos 150 individus pour les longueurs. on peut faire: iris.longueurs &lt;- iris[,longueurs] str(iris.longueurs) ## &#39;data.frame&#39;: 150 obs. of 2 variables: ## $ Sepal.Length: num 5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ... ## $ Petal.Length: num 1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ... iris.longueurs[,&quot;Sepal.Length&quot;] ## [1] 5.1 4.9 4.7 4.6 5.0 5.4 4.6 5.0 4.4 4.9 5.4 4.8 4.8 4.3 5.8 5.7 5.4 5.1 5.7 5.1 5.4 5.1 4.6 5.1 4.8 5.0 5.0 ## [28] 5.2 5.2 4.7 4.8 5.4 5.2 5.5 4.9 5.0 5.5 4.9 4.4 5.1 5.0 4.5 4.4 5.0 5.1 4.8 5.1 4.6 5.3 5.0 7.0 6.4 6.9 5.5 ## [55] 6.5 5.7 6.3 4.9 6.6 5.2 5.0 5.9 6.0 6.1 5.6 6.7 5.6 5.8 6.2 5.6 5.9 6.1 6.3 6.1 6.4 6.6 6.8 6.7 6.0 5.7 5.5 ## [82] 5.5 5.8 6.0 5.4 6.0 6.7 6.3 5.6 5.5 5.5 6.1 5.8 5.0 5.6 5.7 5.7 6.2 5.1 5.7 6.3 5.8 7.1 6.3 6.5 7.6 4.9 7.3 ## [109] 6.7 7.2 6.5 6.4 6.8 5.7 5.8 6.4 6.5 7.7 7.7 6.0 6.9 5.6 7.7 6.3 6.7 7.2 6.2 6.1 6.4 7.2 7.4 7.9 6.4 6.3 6.1 ## [136] 7.7 6.3 6.4 6.0 6.9 6.7 6.9 5.8 6.8 6.7 6.7 6.3 6.5 6.2 5.9 mean(iris.longueurs[,&quot;Sepal.Length&quot;]) ## [1] 5.843333 3.3.3 Les types de vecteurs les vecteurs en résumé peuvent être : - des numéros entiers, int - des chaines de caractères, chr - des logiques, logi - des réels, num - … On peut créer un vecteur d’entiers c(1,3) ## [1] 1 3 Un vecteur de logique: (T pour vrai, F pour faux) c(T,F,T,F,F) ## [1] TRUE FALSE TRUE FALSE FALSE Et là surprise : si on demande à R de nous retourner la première et la troisième variable de iris str(iris[,c(1,3)]) ## &#39;data.frame&#39;: 150 obs. of 2 variables: ## $ Sepal.Length: num 5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ... ## $ Petal.Length: num 1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ... Plus compliqué. On sait qu’il y a 5 variables dans iris ? On est d’accord ? Donc si on lui demande de nous renvoyer la variable quand c’est vrai et de ne pas nous la renvoyer quand c’est faux ? str(iris[,c(T,F,T,F,F)]) ## &#39;data.frame&#39;: 150 obs. of 2 variables: ## $ Sepal.Length: num 5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ... ## $ Petal.Length: num 1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ... En fait les data.frames sont des agrégats de vecteurs que l’on peut indexer avec des vecteurs. Pourquoi on ne peut pas faire : mean(iris.longueurs) parce qu’on a deux variables ? R refuse de faire ce qui n’a pas de sens. Après tout on voudrait faire la moyenne de sépale et de pétale. Déjà mais ça pourrait être pire : mean(iris[,c(&quot;Sepal.Length&quot;,&quot;Species&quot;)]) C’est la catastrophe. Vous essayez de faire une moyenne sur une variable texte et une variable continue. C’est faux. Pour faire le résumer d’une variable texte: table(iris[,&quot;Species&quot;]) ## ## setosa versicolor virginica ## 50 50 50 3.3.4 Pour résumé On a les data.frame, on a les vector de différents types. On sait qu’on peut sélectionner les variables par l’intermédiaire de vecteurs. 3.4 Sélection des individus Intuitivement, comment sélectionner des individus ? Ca marche comme pour les variables, on utilise des vecteurs ? On veut les individus de 1 et 5. str(iris[c(1,5),]) ## &#39;data.frame&#39;: 2 obs. of 5 variables: ## $ Sepal.Length: num 5.1 5 ## $ Sepal.Width : num 3.5 3.6 ## $ Petal.Length: num 1.4 1.4 ## $ Petal.Width : num 0.2 0.2 ## $ Species : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 Attention à la place de la virgule. Cette fois on sélectionne des lignes. A gauche de la virgule pour des lignes et à droite pour les colonnes. C’est tout bon. On a vu qu’il y avait trois espèces. Si on veut sélectionner ceux qui sont du type versicolor ? On se rappele des vecteurs de logique: là où iris[,“Species”] vaudra versicolor on sélectionne et là où ce n’est pas versicolor on ne sélectionne pas. On ne va pas le faire à la main. On ne fait rien à la main sous R. especes &lt;- c(&quot;versicolor&quot;,&quot;truc&quot;,&quot;versicolor&quot;,&quot;setosa&quot;) especes ## [1] &quot;versicolor&quot; &quot;truc&quot; &quot;versicolor&quot; &quot;setosa&quot; especes==&quot;versicolor&quot; ## [1] TRUE FALSE TRUE FALSE On l’adapte pour notre cas : iris[,&quot;Species&quot;]==&quot;versicolor&quot; ## [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE ## [19] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE ## [37] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE TRUE TRUE TRUE TRUE ## [55] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE ## [73] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE ## [91] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE ## [109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE ## [127] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE ## [145] FALSE FALSE FALSE FALSE FALSE FALSE Donc on indexe les individus : versicolor &lt;- iris[iris[,&quot;Species&quot;]==&quot;versicolor&quot;,] Faites un point pour voir si tout est conforme dans votre esprit sur la place des accolades, etc. En fait c’est le old-fashioned R. En fait ça commence à devenir compliqué, alors des gens on fait des fonctions qui génère des vecteurs… à partir de mots anglais. On va créer ainsi de gauche à droite des sous espaces pour ne retenir que ce qui nous intéresse. Exemple : from iris, filter Species==“versicolor”, require(tidyverse) iris |&gt; filter(Species==&quot;setosa&quot;) ## Sepal.Length Sepal.Width Petal.Length Petal.Width Species ## 1 5.1 3.5 1.4 0.2 setosa ## 2 4.9 3.0 1.4 0.2 setosa ## 3 4.7 3.2 1.3 0.2 setosa ## 4 4.6 3.1 1.5 0.2 setosa ## 5 5.0 3.6 1.4 0.2 setosa ## 6 5.4 3.9 1.7 0.4 setosa ## 7 4.6 3.4 1.4 0.3 setosa ## 8 5.0 3.4 1.5 0.2 setosa ## 9 4.4 2.9 1.4 0.2 setosa ## 10 4.9 3.1 1.5 0.1 setosa ## 11 5.4 3.7 1.5 0.2 setosa ## 12 4.8 3.4 1.6 0.2 setosa ## 13 4.8 3.0 1.4 0.1 setosa ## 14 4.3 3.0 1.1 0.1 setosa ## 15 5.8 4.0 1.2 0.2 setosa ## 16 5.7 4.4 1.5 0.4 setosa ## 17 5.4 3.9 1.3 0.4 setosa ## 18 5.1 3.5 1.4 0.3 setosa ## 19 5.7 3.8 1.7 0.3 setosa ## 20 5.1 3.8 1.5 0.3 setosa ## 21 5.4 3.4 1.7 0.2 setosa ## 22 5.1 3.7 1.5 0.4 setosa ## 23 4.6 3.6 1.0 0.2 setosa ## 24 5.1 3.3 1.7 0.5 setosa ## 25 4.8 3.4 1.9 0.2 setosa ## 26 5.0 3.0 1.6 0.2 setosa ## 27 5.0 3.4 1.6 0.4 setosa ## 28 5.2 3.5 1.5 0.2 setosa ## 29 5.2 3.4 1.4 0.2 setosa ## 30 4.7 3.2 1.6 0.2 setosa ## 31 4.8 3.1 1.6 0.2 setosa ## 32 5.4 3.4 1.5 0.4 setosa ## 33 5.2 4.1 1.5 0.1 setosa ## 34 5.5 4.2 1.4 0.2 setosa ## 35 4.9 3.1 1.5 0.2 setosa ## 36 5.0 3.2 1.2 0.2 setosa ## 37 5.5 3.5 1.3 0.2 setosa ## 38 4.9 3.6 1.4 0.1 setosa ## 39 4.4 3.0 1.3 0.2 setosa ## 40 5.1 3.4 1.5 0.2 setosa ## 41 5.0 3.5 1.3 0.3 setosa ## 42 4.5 2.3 1.3 0.3 setosa ## 43 4.4 3.2 1.3 0.2 setosa ## 44 5.0 3.5 1.6 0.6 setosa ## 45 5.1 3.8 1.9 0.4 setosa ## 46 4.8 3.0 1.4 0.3 setosa ## 47 5.1 3.8 1.6 0.2 setosa ## 48 4.6 3.2 1.4 0.2 setosa ## 49 5.3 3.7 1.5 0.2 setosa ## 50 5.0 3.3 1.4 0.2 setosa 3.4.1 Calcul de la moyenne et nouveaux générateurs Pour la moyenne des longueurs de sépales ? iris |&gt; summarise(moyenne=mean(Sepal.Length)) ## moyenne ## 1 5.843333 Ce qui devient : iris |&gt; filter(Species==&quot;setosa&quot;) |&gt; summarise(moyenne=mean(Sepal.Length)) ## moyenne ## 1 5.006 Mais y’a des choses plus pratique. iris |&gt; group_by(Species) |&gt; summarise(moyenne=mean(Sepal.Length)) ## # A tibble: 3 × 2 ## Species moyenne ## &lt;fct&gt; &lt;dbl&gt; ## 1 setosa 5.01 ## 2 versicolor 5.94 ## 3 virginica 6.59 quantile(iris[,&quot;Sepal.Length&quot;]) ## 0% 25% 50% 75% 100% ## 4.3 5.1 5.8 6.4 7.9 iris |&gt; group_by(Species) |&gt; summarise(moy.Sepal.Length=mean(Sepal.Length),ec=sd(Sepal.Length),mediane=quantile(Sepal.Length,probs=0.5)) ## # A tibble: 3 × 4 ## Species moy.Sepal.Length ec mediane ## &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 setosa 5.01 0.352 5 ## 2 versicolor 5.94 0.516 5.9 ## 3 virginica 6.59 0.636 6.5 iris |&gt; group_by(Species) |&gt; summarise(moy.Sepal.Length=mean(Sepal.Length),ec=sd(Sepal.Length),mediane=quantile(Sepal.Length,probs=0.5),q90=quantile(Sepal.Length,probs=0.9)) ## # A tibble: 3 × 5 ## Species moy.Sepal.Length ec mediane q90 ## &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 setosa 5.01 0.352 5 5.41 ## 2 versicolor 5.94 0.516 5.9 6.7 ## 3 virginica 6.59 0.636 6.5 7.61 Etc… Ah au fait c’est quoi comme vient de retourner ? str(iris |&gt; group_by(Species) |&gt; summarise(sepal.length=mean(Sepal.Length), sepal.width=mean(Sepal.Width))) ## tibble [3 × 3] (S3: tbl_df/tbl/data.frame) ## $ Species : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 2 3 ## $ sepal.length: num [1:3] 5.01 5.94 6.59 ## $ sepal.width : num [1:3] 3.43 2.77 2.97 Calculer la moyenne de toutes les colonnes sauf Species ? iris |&gt; group_by(Species) |&gt; summarise(across(Sepal.Length:Petal.Width,mean)) ## # A tibble: 3 × 5 ## Species Sepal.Length Sepal.Width Petal.Length Petal.Width ## &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 setosa 5.01 3.43 1.46 0.246 ## 2 versicolor 5.94 2.77 4.26 1.33 ## 3 virginica 6.59 2.97 5.55 2.03 "],["importation-de-données.html", "Chapter 4 Importation de Données 4.1 Parcours Sup.", " Chapter 4 Importation de Données 4.1 Parcours Sup. Les données de ParcourSup viennent de là : Parcoursup 2023 - vœux de poursuite d’études et de réorientation dans l’enseignement supérieur et réponses des établissements sinon vous avez les métiers en tensions : Taux de pression et d’emploi pour les diplômes de la voie professionnelle En suivant les liens vous pouvez télécharger les fichiers Excel. Déplacer le fichier Excel à la racine de votre projet. puis library(readxl) parcours &lt;- read_excel(&quot;data/fr-esr-parcoursup.xlsx&quot;) Je viens de créer une data.frame du nom de parcours avec le contenu du fichier Excel. Pour sélectionner les variables, utiliser le raccourci TAB. Pour charger un fichier SPSS, il faut aussi un paquet supplémentaire : require(haven) patient &lt;- read_sav(&quot;data/patient.sav&quot;) C’est le même paquet pour les formats SAS (sas7bdat) et STATA. On trouve le chargement des mêmes types de fichier dans le paquet foreign mais attention ce sont pour les vieux formats de fichiers. Par exemple pour SAS, il suffit de changer de fonction : patient &lt;- read_sas(&quot;patient.sas7bdat&quot;) Lors de l’import, de SAS, SPSS, il conserve le type de la variable. Quand on veux importer un fichier Excel ou un fichier texte, cela est différent. On va prendre l’exemple de fichier texte : l’importation se fait en fait en trois temps. library(readr) patient &lt;- read_csv(&quot;data/patient.csv&quot;) ## Rows: 200 Columns: 17 ## ── Column specification ─────────────────────────────────────────────────────────────────────────────────────────── ## Delimiter: &quot;,&quot; ## chr (5): UID, Hopital, sexe, scoliose, drepano ## dbl (12): poids, vitaux, CIM2, age, dureeopmin, postopj, ACP, peridurale, periACP, nbttt, totalechelle, nbechelle ## ## ℹ Use `spec()` to retrieve the full column specification for this data. ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message. table(patient$scoliose) ## ## ante autre post ## 3 2 20 Dans un premier temps, la fonction read_csv va parcourir les 1000 premières lignes du fichier à la découverte de : - du séparateur entre les champs - du séparateur de décimales - le type de chaque colonne. Si par exemple il trouve que des chiffres dans une colonne, le type sera dbl. Par contre s’il trouve un mélange de charactères et de chiffres, là rien ne va plus. Ca peut se produire par exemple lorsque vous avez des chiffres mélangés à des valeurs manquantes qui sont représentés par des valeurs textes ou bien des symboles textuels. Les petites machines qui transforment les données en données typées sont des parser. Elles sont d’ailleurs disponible à part : str(parse_double(c(&quot;1.56&quot;, &quot;NA&quot;, &quot;NA&quot;))) ## num [1:3] 1.56 NA NA NA est reconnu comme valeur manquante alors pas de souci, le 1.56 est reconnu. et si on mettait 1,56 ? str(parse_double(c(&quot;1,56&quot;, &quot;NA&quot;, &quot;NA&quot;))) ## Warning: 1 parsing failure. ## row col expected actual ## 1 -- no trailing characters 1,56 ## num [1:3] NA NA NA ## - attr(*, &quot;problems&quot;)= tibble [1 × 4] (S3: tbl_df/tbl/data.frame) ## ..$ row : int 1 ## ..$ col : int NA ## ..$ expected: chr &quot;no trailing characters&quot; ## ..$ actual : chr &quot;1,56&quot; pas terrible ce qui suit : str(parse_double(c(&quot;1.56&quot;, &quot;NR&quot;, &quot;NR&quot;))) ## Warning: 2 parsing failures. ## row col expected actual ## 2 -- a double NR ## 3 -- a double NR ## num [1:3] 1.56 NA NA ## - attr(*, &quot;problems&quot;)= tibble [2 × 4] (S3: tbl_df/tbl/data.frame) ## ..$ row : int [1:2] 2 3 ## ..$ col : int [1:2] NA NA ## ..$ expected: chr [1:2] &quot;a double&quot; &quot;a double&quot; ## ..$ actual : chr [1:2] &quot;NR&quot; &quot;NR&quot; On rétablit la situation normale en mettant na = NR : str(parse_double(c(&quot;1.56&quot;, &quot;NA&quot;, &quot;NA&quot;),na = &quot;NR&quot;)) ## Warning: 2 parsing failures. ## row col expected actual ## 2 -- a double -- ## 3 -- a double -- ## num [1:3] 1.56 NA NA ## - attr(*, &quot;problems&quot;)= tibble [2 × 4] (S3: tbl_df/tbl/data.frame) ## ..$ row : int [1:2] 2 3 ## ..$ col : int [1:2] NA NA ## ..$ expected: chr [1:2] &quot;a double&quot; &quot;a double&quot; ## ..$ actual : chr [1:2] &quot;NA&quot; &quot;NA&quot; Dans la jungle des parsers, on a les parsers : - parse_logical() - parse_integer() - parse_double() - parse_character() - parse_number() - parse_factor() - parse_datetime() (may be the force with you) - … Si vous avez bien suivi, la machine va lire les n premières lignes et à chaque colonne essayer de deviner le type de variable et appeler le parser qui va bien : ce sont les fonctions guess_. Ceux sont eux qui vont décider du type de variable que vous importez. Pour le faire vous même, il suffit de spécificier chaque à la main : read_csv(&quot;data/iris.csv&quot;, col_types = list( Sepal.Length = col_double(), Sepal.Width = col_double(), Petal.Length = col_double(), Petal.Width = col_double(), Species = col_factor(c(&quot;setosa&quot;, &quot;versicolor&quot;, &quot;virginica&quot;)) )) ## Warning: The following named parsers don&#39;t match the column names: Sepal.Length, Sepal.Width, Petal.Length, ## Petal.Width, Species ## Warning: One or more parsing issues, call `problems()` on your data frame for details, e.g.: ## dat &lt;- vroom(...) ## problems(dat) ## # A tibble: 150 × 1 ## `Sepal.Length;Sepal.Width;Petal.Length;Petal.Width;Species` ## &lt;chr&gt; ## 1 5,1;3,5;1,4;NA;setosa ## 2 4,9;3;1,4;NA;setosa ## 3 4,7;3,2;1,3;NA;setosa ## 4 4,6;3,1;1,5;NA;setosa ## 5 5;3,6;1,4;NA;setosa ## 6 5,4;3,9;1,7;0,4;setosa ## 7 4,6;3,4;1,4;0,3;setosa ## 8 5;3,4;1,5;0,2;setosa ## 9 4,4;2,9;1,4;0,2;setosa ## 10 4,9;3,1;1,5;0,1;setosa ## # ℹ 140 more rows Sur cette ligne, c’est un peu complexe et surtout cela fait appel à deux élements que vous connaissez pas. Les lists et les factors. Un factor est un ensemble de valeurs fini : c’est comme ça que vous pouvez coder un ensemble de valeurs que vous pouvez énumérer et que vous utiliseriez par exemple dans une expérience. Par exemple, on peut avoir comme facteur : le nombre de cylindres de mtcars 4, 6 ou 8 les médicaments dans une expérience en double aveugle: A, B, C … L’idée est qu’un facteur est à utiliser dans une ANOVA (un test de différences de moyennes sur 1 à k groupes). La liste est une data.frame libertaire : par libértaire j’entends qu’on peut mettre n’importe objet et l’indexer (presque) comme une data.frame. a &lt;- list(iris,c(1,2,3),LETTERS,mtcars[,c(&quot;cyl&quot;,&quot;mpg&quot;)]) str(a) ## List of 4 ## $ :&#39;data.frame&#39;: 150 obs. of 5 variables: ## ..$ Sepal.Length: num [1:150] 5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ... ## ..$ Sepal.Width : num [1:150] 3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ... ## ..$ Petal.Length: num [1:150] 1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ... ## ..$ Petal.Width : num [1:150] 0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ... ## ..$ Species : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ... ## $ : num [1:3] 1 2 3 ## $ : chr [1:26] &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot; ... ## $ :&#39;data.frame&#39;: 32 obs. of 2 variables: ## ..$ cyl: num [1:32] 6 6 4 6 8 6 8 4 4 6 ... ## ..$ mpg: num [1:32] 21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ... On voit que c’est un type list, les data.frame. "],["résumés-rapides-descriptives.html", "Chapter 5 Résumés rapides descriptives 5.1 Les premières tables 5.2 Tableaux croisés 5.3 Themes 5.4 Exportation 5.5 Personnalisation des statistiques 5.6 Modèles", " Chapter 5 Résumés rapides descriptives 5.1 Les premières tables library(gtsummary) tbl_summary(mtcars) #irjisgqwvd table { font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } #irjisgqwvd thead, #irjisgqwvd tbody, #irjisgqwvd tfoot, #irjisgqwvd tr, #irjisgqwvd td, #irjisgqwvd th { border-style: none; } #irjisgqwvd p { margin: 0; padding: 0; } #irjisgqwvd .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #irjisgqwvd .gt_caption { padding-top: 4px; padding-bottom: 4px; } #irjisgqwvd .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #irjisgqwvd .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #irjisgqwvd .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #irjisgqwvd .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #irjisgqwvd .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #irjisgqwvd .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #irjisgqwvd .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #irjisgqwvd .gt_column_spanner_outer:first-child { padding-left: 0; } #irjisgqwvd .gt_column_spanner_outer:last-child { padding-right: 0; } #irjisgqwvd .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #irjisgqwvd .gt_spanner_row { border-bottom-style: hidden; } #irjisgqwvd .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; } #irjisgqwvd .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #irjisgqwvd .gt_from_md > :first-child { margin-top: 0; } #irjisgqwvd .gt_from_md > :last-child { margin-bottom: 0; } #irjisgqwvd .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #irjisgqwvd .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #irjisgqwvd .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #irjisgqwvd .gt_row_group_first td { border-top-width: 2px; } #irjisgqwvd .gt_row_group_first th { border-top-width: 2px; } #irjisgqwvd .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #irjisgqwvd .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #irjisgqwvd .gt_first_summary_row.thick { border-top-width: 2px; } #irjisgqwvd .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #irjisgqwvd .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #irjisgqwvd .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #irjisgqwvd .gt_last_grand_summary_row_top { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; } #irjisgqwvd .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #irjisgqwvd .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #irjisgqwvd .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #irjisgqwvd .gt_footnote { margin: 0px; font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #irjisgqwvd .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #irjisgqwvd .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #irjisgqwvd .gt_left { text-align: left; } #irjisgqwvd .gt_center { text-align: center; } #irjisgqwvd .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #irjisgqwvd .gt_font_normal { font-weight: normal; } #irjisgqwvd .gt_font_bold { font-weight: bold; } #irjisgqwvd .gt_font_italic { font-style: italic; } #irjisgqwvd .gt_super { font-size: 65%; } #irjisgqwvd .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; } #irjisgqwvd .gt_asterisk { font-size: 100%; vertical-align: 0; } #irjisgqwvd .gt_indent_1 { text-indent: 5px; } #irjisgqwvd .gt_indent_2 { text-indent: 10px; } #irjisgqwvd .gt_indent_3 { text-indent: 15px; } #irjisgqwvd .gt_indent_4 { text-indent: 20px; } #irjisgqwvd .gt_indent_5 { text-indent: 25px; } Characteristic N = 321 mpg 19.2 (15.4, 22.8) cyl     4 11 (34%)     6 7 (22%)     8 14 (44%) disp 196 (121, 326) hp 123 (97, 180) drat 3.70 (3.08, 3.92) wt 3.33 (2.58, 3.61) qsec 17.71 (16.89, 18.90) vs 14 (44%) am 13 (41%) gear     3 15 (47%)     4 12 (38%)     5 5 (16%) carb     1 7 (22%)     2 10 (31%)     3 3 (9.4%)     4 10 (31%)     6 1 (3.1%)     8 1 (3.1%) 1 Median (IQR); n (%) tbl_summary(iris) #rkzjkheitv table { font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } #rkzjkheitv thead, #rkzjkheitv tbody, #rkzjkheitv tfoot, #rkzjkheitv tr, #rkzjkheitv td, #rkzjkheitv th { border-style: none; } #rkzjkheitv p { margin: 0; padding: 0; } #rkzjkheitv .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #rkzjkheitv .gt_caption { padding-top: 4px; padding-bottom: 4px; } #rkzjkheitv .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #rkzjkheitv .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #rkzjkheitv .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #rkzjkheitv .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #rkzjkheitv .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #rkzjkheitv .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #rkzjkheitv .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #rkzjkheitv .gt_column_spanner_outer:first-child { padding-left: 0; } #rkzjkheitv .gt_column_spanner_outer:last-child { padding-right: 0; } #rkzjkheitv .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #rkzjkheitv .gt_spanner_row { border-bottom-style: hidden; } #rkzjkheitv .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; } #rkzjkheitv .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #rkzjkheitv .gt_from_md > :first-child { margin-top: 0; } #rkzjkheitv .gt_from_md > :last-child { margin-bottom: 0; } #rkzjkheitv .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #rkzjkheitv .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #rkzjkheitv .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #rkzjkheitv .gt_row_group_first td { border-top-width: 2px; } #rkzjkheitv .gt_row_group_first th { border-top-width: 2px; } #rkzjkheitv .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #rkzjkheitv .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #rkzjkheitv .gt_first_summary_row.thick { border-top-width: 2px; } #rkzjkheitv .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #rkzjkheitv .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #rkzjkheitv .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #rkzjkheitv .gt_last_grand_summary_row_top { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; } #rkzjkheitv .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #rkzjkheitv .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #rkzjkheitv .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #rkzjkheitv .gt_footnote { margin: 0px; font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #rkzjkheitv .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #rkzjkheitv .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #rkzjkheitv .gt_left { text-align: left; } #rkzjkheitv .gt_center { text-align: center; } #rkzjkheitv .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #rkzjkheitv .gt_font_normal { font-weight: normal; } #rkzjkheitv .gt_font_bold { font-weight: bold; } #rkzjkheitv .gt_font_italic { font-style: italic; } #rkzjkheitv .gt_super { font-size: 65%; } #rkzjkheitv .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; } #rkzjkheitv .gt_asterisk { font-size: 100%; vertical-align: 0; } #rkzjkheitv .gt_indent_1 { text-indent: 5px; } #rkzjkheitv .gt_indent_2 { text-indent: 10px; } #rkzjkheitv .gt_indent_3 { text-indent: 15px; } #rkzjkheitv .gt_indent_4 { text-indent: 20px; } #rkzjkheitv .gt_indent_5 { text-indent: 25px; } Characteristic N = 1501 Sepal.Length 5.80 (5.10, 6.40) Sepal.Width 3.00 (2.80, 3.30) Petal.Length 4.35 (1.60, 5.10) Petal.Width 1.30 (0.30, 1.80) Species     setosa 50 (33%)     versicolor 50 (33%)     virginica 50 (33%) 1 Median (IQR); n (%) Plus fort, tbl_summary(iris,by=&quot;Species&quot;) #chzuwfdlpm table { font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } #chzuwfdlpm thead, #chzuwfdlpm tbody, #chzuwfdlpm tfoot, #chzuwfdlpm tr, #chzuwfdlpm td, #chzuwfdlpm th { border-style: none; } #chzuwfdlpm p { margin: 0; padding: 0; } #chzuwfdlpm .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #chzuwfdlpm .gt_caption { padding-top: 4px; padding-bottom: 4px; } #chzuwfdlpm .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #chzuwfdlpm .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #chzuwfdlpm .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #chzuwfdlpm .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #chzuwfdlpm .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #chzuwfdlpm .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #chzuwfdlpm .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #chzuwfdlpm .gt_column_spanner_outer:first-child { padding-left: 0; } #chzuwfdlpm .gt_column_spanner_outer:last-child { padding-right: 0; } #chzuwfdlpm .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #chzuwfdlpm .gt_spanner_row { border-bottom-style: hidden; } #chzuwfdlpm .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; } #chzuwfdlpm .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #chzuwfdlpm .gt_from_md > :first-child { margin-top: 0; } #chzuwfdlpm .gt_from_md > :last-child { margin-bottom: 0; } #chzuwfdlpm .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #chzuwfdlpm .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #chzuwfdlpm .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #chzuwfdlpm .gt_row_group_first td { border-top-width: 2px; } #chzuwfdlpm .gt_row_group_first th { border-top-width: 2px; } #chzuwfdlpm .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #chzuwfdlpm .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #chzuwfdlpm .gt_first_summary_row.thick { border-top-width: 2px; } #chzuwfdlpm .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #chzuwfdlpm .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #chzuwfdlpm .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #chzuwfdlpm .gt_last_grand_summary_row_top { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; } #chzuwfdlpm .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #chzuwfdlpm .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #chzuwfdlpm .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #chzuwfdlpm .gt_footnote { margin: 0px; font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #chzuwfdlpm .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #chzuwfdlpm .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #chzuwfdlpm .gt_left { text-align: left; } #chzuwfdlpm .gt_center { text-align: center; } #chzuwfdlpm .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #chzuwfdlpm .gt_font_normal { font-weight: normal; } #chzuwfdlpm .gt_font_bold { font-weight: bold; } #chzuwfdlpm .gt_font_italic { font-style: italic; } #chzuwfdlpm .gt_super { font-size: 65%; } #chzuwfdlpm .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; } #chzuwfdlpm .gt_asterisk { font-size: 100%; vertical-align: 0; } #chzuwfdlpm .gt_indent_1 { text-indent: 5px; } #chzuwfdlpm .gt_indent_2 { text-indent: 10px; } #chzuwfdlpm .gt_indent_3 { text-indent: 15px; } #chzuwfdlpm .gt_indent_4 { text-indent: 20px; } #chzuwfdlpm .gt_indent_5 { text-indent: 25px; } Characteristic setosa, N = 501 versicolor, N = 501 virginica, N = 501 Sepal.Length 5.00 (4.80, 5.20) 5.90 (5.60, 6.30) 6.50 (6.23, 6.90) Sepal.Width 3.40 (3.20, 3.68) 2.80 (2.53, 3.00) 3.00 (2.80, 3.18) Petal.Length 1.50 (1.40, 1.58) 4.35 (4.00, 4.60) 5.55 (5.10, 5.88) Petal.Width 0.20 (0.20, 0.30) 1.30 (1.20, 1.50) 2.00 (1.80, 2.30) 1 Median (IQR) On peut rajouter un test statistique: tbl_summary(iris,by=&quot;Species&quot; ) %&gt;% add_p() %&gt;% add_overall() #eotprnjfix table { font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } #eotprnjfix thead, #eotprnjfix tbody, #eotprnjfix tfoot, #eotprnjfix tr, #eotprnjfix td, #eotprnjfix th { border-style: none; } #eotprnjfix p { margin: 0; padding: 0; } #eotprnjfix .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #eotprnjfix .gt_caption { padding-top: 4px; padding-bottom: 4px; } #eotprnjfix .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #eotprnjfix .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #eotprnjfix .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #eotprnjfix .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #eotprnjfix .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #eotprnjfix .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #eotprnjfix .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #eotprnjfix .gt_column_spanner_outer:first-child { padding-left: 0; } #eotprnjfix .gt_column_spanner_outer:last-child { padding-right: 0; } #eotprnjfix .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #eotprnjfix .gt_spanner_row { border-bottom-style: hidden; } #eotprnjfix .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; } #eotprnjfix .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #eotprnjfix .gt_from_md > :first-child { margin-top: 0; } #eotprnjfix .gt_from_md > :last-child { margin-bottom: 0; } #eotprnjfix .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #eotprnjfix .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #eotprnjfix .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #eotprnjfix .gt_row_group_first td { border-top-width: 2px; } #eotprnjfix .gt_row_group_first th { border-top-width: 2px; } #eotprnjfix .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #eotprnjfix .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #eotprnjfix .gt_first_summary_row.thick { border-top-width: 2px; } #eotprnjfix .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #eotprnjfix .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #eotprnjfix .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #eotprnjfix .gt_last_grand_summary_row_top { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; } #eotprnjfix .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #eotprnjfix .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #eotprnjfix .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #eotprnjfix .gt_footnote { margin: 0px; font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #eotprnjfix .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #eotprnjfix .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #eotprnjfix .gt_left { text-align: left; } #eotprnjfix .gt_center { text-align: center; } #eotprnjfix .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #eotprnjfix .gt_font_normal { font-weight: normal; } #eotprnjfix .gt_font_bold { font-weight: bold; } #eotprnjfix .gt_font_italic { font-style: italic; } #eotprnjfix .gt_super { font-size: 65%; } #eotprnjfix .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; } #eotprnjfix .gt_asterisk { font-size: 100%; vertical-align: 0; } #eotprnjfix .gt_indent_1 { text-indent: 5px; } #eotprnjfix .gt_indent_2 { text-indent: 10px; } #eotprnjfix .gt_indent_3 { text-indent: 15px; } #eotprnjfix .gt_indent_4 { text-indent: 20px; } #eotprnjfix .gt_indent_5 { text-indent: 25px; } Characteristic Overall, N = 1501 setosa, N = 501 versicolor, N = 501 virginica, N = 501 p-value2 Sepal.Length 5.80 (5.10, 6.40) 5.00 (4.80, 5.20) 5.90 (5.60, 6.30) 6.50 (6.23, 6.90) Sepal.Width 3.00 (2.80, 3.30) 3.40 (3.20, 3.68) 2.80 (2.53, 3.00) 3.00 (2.80, 3.18) Petal.Length 4.35 (1.60, 5.10) 1.50 (1.40, 1.58) 4.35 (4.00, 4.60) 5.55 (5.10, 5.88) Petal.Width 1.30 (0.30, 1.80) 0.20 (0.20, 0.30) 1.30 (1.20, 1.50) 2.00 (1.80, 2.30) 1 Median (IQR) 2 Kruskal-Wallis rank sum test trial %&gt;% tbl_cross(row = stage, col = trt, percent = &quot;cell&quot;) %&gt;% add_p() %&gt;% bold_labels() #uutacftlxg table { font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } #uutacftlxg thead, #uutacftlxg tbody, #uutacftlxg tfoot, #uutacftlxg tr, #uutacftlxg td, #uutacftlxg th { border-style: none; } #uutacftlxg p { margin: 0; padding: 0; } #uutacftlxg .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #uutacftlxg .gt_caption { padding-top: 4px; padding-bottom: 4px; } #uutacftlxg .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #uutacftlxg .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #uutacftlxg .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #uutacftlxg .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #uutacftlxg .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #uutacftlxg .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #uutacftlxg .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #uutacftlxg .gt_column_spanner_outer:first-child { padding-left: 0; } #uutacftlxg .gt_column_spanner_outer:last-child { padding-right: 0; } #uutacftlxg .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #uutacftlxg .gt_spanner_row { border-bottom-style: hidden; } #uutacftlxg .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; } #uutacftlxg .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #uutacftlxg .gt_from_md > :first-child { margin-top: 0; } #uutacftlxg .gt_from_md > :last-child { margin-bottom: 0; } #uutacftlxg .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #uutacftlxg .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #uutacftlxg .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #uutacftlxg .gt_row_group_first td { border-top-width: 2px; } #uutacftlxg .gt_row_group_first th { border-top-width: 2px; } #uutacftlxg .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #uutacftlxg .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #uutacftlxg .gt_first_summary_row.thick { border-top-width: 2px; } #uutacftlxg .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #uutacftlxg .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #uutacftlxg .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #uutacftlxg .gt_last_grand_summary_row_top { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; } #uutacftlxg .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #uutacftlxg .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #uutacftlxg .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #uutacftlxg .gt_footnote { margin: 0px; font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #uutacftlxg .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #uutacftlxg .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #uutacftlxg .gt_left { text-align: left; } #uutacftlxg .gt_center { text-align: center; } #uutacftlxg .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #uutacftlxg .gt_font_normal { font-weight: normal; } #uutacftlxg .gt_font_bold { font-weight: bold; } #uutacftlxg .gt_font_italic { font-style: italic; } #uutacftlxg .gt_super { font-size: 65%; } #uutacftlxg .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; } #uutacftlxg .gt_asterisk { font-size: 100%; vertical-align: 0; } #uutacftlxg .gt_indent_1 { text-indent: 5px; } #uutacftlxg .gt_indent_2 { text-indent: 10px; } #uutacftlxg .gt_indent_3 { text-indent: 15px; } #uutacftlxg .gt_indent_4 { text-indent: 20px; } #uutacftlxg .gt_indent_5 { text-indent: 25px; } Chemotherapy Treatment Total p-value1 Drug A Drug B T Stage 0.9     T1 28 (14%) 25 (13%) 53 (27%)     T2 25 (13%) 29 (15%) 54 (27%)     T3 22 (11%) 21 (11%) 43 (22%)     T4 23 (12%) 27 (14%) 50 (25%) Total 98 (49%) 102 (51%) 200 (100%) 1 Pearson’s Chi-squared test 5.2 Tableaux croisés On peut faire des tris croisés et choisir le sens des pourcentages : par cellule, par ligne ou par colonne. patient %&gt;% tbl_cross(row = Hopital, col = sexe, percent = &quot;col&quot;) %&gt;% add_p() %&gt;% bold_labels() #ylgdwzugce table { font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } #ylgdwzugce thead, #ylgdwzugce tbody, #ylgdwzugce tfoot, #ylgdwzugce tr, #ylgdwzugce td, #ylgdwzugce th { border-style: none; } #ylgdwzugce p { margin: 0; padding: 0; } #ylgdwzugce .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #ylgdwzugce .gt_caption { padding-top: 4px; padding-bottom: 4px; } #ylgdwzugce .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #ylgdwzugce .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #ylgdwzugce .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #ylgdwzugce .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #ylgdwzugce .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #ylgdwzugce .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #ylgdwzugce .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #ylgdwzugce .gt_column_spanner_outer:first-child { padding-left: 0; } #ylgdwzugce .gt_column_spanner_outer:last-child { padding-right: 0; } #ylgdwzugce .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #ylgdwzugce .gt_spanner_row { border-bottom-style: hidden; } #ylgdwzugce .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; } #ylgdwzugce .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #ylgdwzugce .gt_from_md > :first-child { margin-top: 0; } #ylgdwzugce .gt_from_md > :last-child { margin-bottom: 0; } #ylgdwzugce .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #ylgdwzugce .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #ylgdwzugce .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #ylgdwzugce .gt_row_group_first td { border-top-width: 2px; } #ylgdwzugce .gt_row_group_first th { border-top-width: 2px; } #ylgdwzugce .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #ylgdwzugce .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #ylgdwzugce .gt_first_summary_row.thick { border-top-width: 2px; } #ylgdwzugce .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #ylgdwzugce .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #ylgdwzugce .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #ylgdwzugce .gt_last_grand_summary_row_top { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; } #ylgdwzugce .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #ylgdwzugce .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #ylgdwzugce .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #ylgdwzugce .gt_footnote { margin: 0px; font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #ylgdwzugce .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #ylgdwzugce .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #ylgdwzugce .gt_left { text-align: left; } #ylgdwzugce .gt_center { text-align: center; } #ylgdwzugce .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #ylgdwzugce .gt_font_normal { font-weight: normal; } #ylgdwzugce .gt_font_bold { font-weight: bold; } #ylgdwzugce .gt_font_italic { font-style: italic; } #ylgdwzugce .gt_super { font-size: 65%; } #ylgdwzugce .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; } #ylgdwzugce .gt_asterisk { font-size: 100%; vertical-align: 0; } #ylgdwzugce .gt_indent_1 { text-indent: 5px; } #ylgdwzugce .gt_indent_2 { text-indent: 10px; } #ylgdwzugce .gt_indent_3 { text-indent: 15px; } #ylgdwzugce .gt_indent_4 { text-indent: 20px; } #ylgdwzugce .gt_indent_5 { text-indent: 25px; } sexe Total p-value1 Feminin Masculin Hopital 0.007     A 48 (42%) 52 (61%) 100 (50%)     B 67 (58%) 33 (39%) 100 (50%) Total 115 (100%) 85 (100%) 200 (100%) 1 Pearson’s Chi-squared test 5.3 Themes theme_gtsummary_compact(set_theme = TRUE, font_size = NULL) patient %&gt;% tbl_cross(row = Hopital, col = sexe, percent = &quot;col&quot;) %&gt;% add_p() %&gt;% bold_labels() #tegibpqcjd table { font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } #tegibpqcjd thead, #tegibpqcjd tbody, #tegibpqcjd tfoot, #tegibpqcjd tr, #tegibpqcjd td, #tegibpqcjd th { border-style: none; } #tegibpqcjd p { margin: 0; padding: 0; } #tegibpqcjd .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 13px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #tegibpqcjd .gt_caption { padding-top: 4px; padding-bottom: 4px; } #tegibpqcjd .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #tegibpqcjd .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #tegibpqcjd .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #tegibpqcjd .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #tegibpqcjd .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #tegibpqcjd .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #tegibpqcjd .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #tegibpqcjd .gt_column_spanner_outer:first-child { padding-left: 0; } #tegibpqcjd .gt_column_spanner_outer:last-child { padding-right: 0; } #tegibpqcjd .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #tegibpqcjd .gt_spanner_row { border-bottom-style: hidden; } #tegibpqcjd .gt_group_heading { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; } #tegibpqcjd .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #tegibpqcjd .gt_from_md > :first-child { margin-top: 0; } #tegibpqcjd .gt_from_md > :last-child { margin-bottom: 0; } #tegibpqcjd .gt_row { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #tegibpqcjd .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #tegibpqcjd .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #tegibpqcjd .gt_row_group_first td { border-top-width: 2px; } #tegibpqcjd .gt_row_group_first th { border-top-width: 2px; } #tegibpqcjd .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #tegibpqcjd .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #tegibpqcjd .gt_first_summary_row.thick { border-top-width: 2px; } #tegibpqcjd .gt_last_summary_row { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #tegibpqcjd .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #tegibpqcjd .gt_first_grand_summary_row { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #tegibpqcjd .gt_last_grand_summary_row_top { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; } #tegibpqcjd .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #tegibpqcjd .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #tegibpqcjd .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #tegibpqcjd .gt_footnote { margin: 0px; font-size: 90%; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #tegibpqcjd .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #tegibpqcjd .gt_sourcenote { font-size: 90%; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #tegibpqcjd .gt_left { text-align: left; } #tegibpqcjd .gt_center { text-align: center; } #tegibpqcjd .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #tegibpqcjd .gt_font_normal { font-weight: normal; } #tegibpqcjd .gt_font_bold { font-weight: bold; } #tegibpqcjd .gt_font_italic { font-style: italic; } #tegibpqcjd .gt_super { font-size: 65%; } #tegibpqcjd .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; } #tegibpqcjd .gt_asterisk { font-size: 100%; vertical-align: 0; } #tegibpqcjd .gt_indent_1 { text-indent: 5px; } #tegibpqcjd .gt_indent_2 { text-indent: 10px; } #tegibpqcjd .gt_indent_3 { text-indent: 15px; } #tegibpqcjd .gt_indent_4 { text-indent: 20px; } #tegibpqcjd .gt_indent_5 { text-indent: 25px; } sexe Total p-value1 Feminin Masculin Hopital 0.007     A 48 (42%) 52 (61%) 100 (50%)     B 67 (58%) 33 (39%) 100 (50%) Total 115 (100%) 85 (100%) 200 (100%) 1 Pearson’s Chi-squared test reset_gtsummary_theme() 5.4 Exportation Pour les exporter avec le paquet writexl : iris %&gt;% tbl_summary(by=Species) %&gt;% gtsummary::as_tibble() %&gt;% writexl::write_xlsx(., &quot;example_gtsummary1.xlsx&quot;) Sinon iris %&gt;% tbl_summary(by=Species) %&gt;% gtsummary::as_gt() %&gt;% gt::gtsave(., &quot;example_gtsummary3.rtf&quot;) 5.5 Personnalisation des statistiques Sans qu’il soit nécessaire de fonction, vous pouvez personnaliser les sortie. Il suffit de changer la valeur de statistic. Les mots-clefs sont, pour les variables quantitatives et qualtitatives : - {N_obs} total number of observations {N_miss} number of missing observations {N_nonmiss} number of non-missing observations {p_miss} percentage of observations missing {p_nonmiss} percentage of observations not missing Pour les variables quantitatives : - {mean} {median} {sd} les quantiles {pDD} avec DD un chiffre sur 100 comme {p25} {min} {max} Pour les variables qualitatives : - {p} le pourcentage {n}, nombre d’observations dans la cellule nombre total {N} Il suffit alors de préciser les statistiques à afficher : iris %&gt;% tbl_summary(statistic = list( all_continuous() ~ &quot;{mean} ({sd}) {min} {max}&quot;, all_categorical() ~ &quot;{n} / {N} ({p}%)&quot;)) %&gt;% modify_footnote( all_stat_cols() ~ &quot;Moyenne (EC) Min. Max.; Effectif cellule / Total (%)&quot;) #embaelqpxi table { font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } #embaelqpxi thead, #embaelqpxi tbody, #embaelqpxi tfoot, #embaelqpxi tr, #embaelqpxi td, #embaelqpxi th { border-style: none; } #embaelqpxi p { margin: 0; padding: 0; } #embaelqpxi .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #embaelqpxi .gt_caption { padding-top: 4px; padding-bottom: 4px; } #embaelqpxi .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #embaelqpxi .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #embaelqpxi .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #embaelqpxi .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #embaelqpxi .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #embaelqpxi .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #embaelqpxi .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #embaelqpxi .gt_column_spanner_outer:first-child { padding-left: 0; } #embaelqpxi .gt_column_spanner_outer:last-child { padding-right: 0; } #embaelqpxi .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #embaelqpxi .gt_spanner_row { border-bottom-style: hidden; } #embaelqpxi .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; } #embaelqpxi .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #embaelqpxi .gt_from_md > :first-child { margin-top: 0; } #embaelqpxi .gt_from_md > :last-child { margin-bottom: 0; } #embaelqpxi .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #embaelqpxi .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #embaelqpxi .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #embaelqpxi .gt_row_group_first td { border-top-width: 2px; } #embaelqpxi .gt_row_group_first th { border-top-width: 2px; } #embaelqpxi .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #embaelqpxi .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #embaelqpxi .gt_first_summary_row.thick { border-top-width: 2px; } #embaelqpxi .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #embaelqpxi .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #embaelqpxi .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #embaelqpxi .gt_last_grand_summary_row_top { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; } #embaelqpxi .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #embaelqpxi .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #embaelqpxi .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #embaelqpxi .gt_footnote { margin: 0px; font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #embaelqpxi .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #embaelqpxi .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #embaelqpxi .gt_left { text-align: left; } #embaelqpxi .gt_center { text-align: center; } #embaelqpxi .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #embaelqpxi .gt_font_normal { font-weight: normal; } #embaelqpxi .gt_font_bold { font-weight: bold; } #embaelqpxi .gt_font_italic { font-style: italic; } #embaelqpxi .gt_super { font-size: 65%; } #embaelqpxi .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; } #embaelqpxi .gt_asterisk { font-size: 100%; vertical-align: 0; } #embaelqpxi .gt_indent_1 { text-indent: 5px; } #embaelqpxi .gt_indent_2 { text-indent: 10px; } #embaelqpxi .gt_indent_3 { text-indent: 15px; } #embaelqpxi .gt_indent_4 { text-indent: 20px; } #embaelqpxi .gt_indent_5 { text-indent: 25px; } Characteristic N = 1501 Sepal.Length 5.84 (0.83) 4.30 7.90 Sepal.Width 3.06 (0.44) 2.00 4.40 Petal.Length 3.76 (1.77) 1.00 6.90 Petal.Width 1.20 (0.76) 0.10 2.50 Species     setosa 50 / 150 (33%)     versicolor 50 / 150 (33%)     virginica 50 / 150 (33%) 1 Moyenne (EC) Min. Max.; Effectif cellule / Total (%) Vous pouvez également le faire sur plusieurs lignes en spécifiant que vous voulez les statistiques sur plusieurs lignes avec un argument supplémentaire : iris %&gt;% tbl_summary( type = all_continuous() ~ &quot;continuous2&quot;, statistic = list(all_continuous() ~ c( &quot;{N_nonmiss}&quot;, &quot;{mean} ({sd})&quot;, &quot;{median} ({p25}, {p75})&quot;, &quot;{min}, {max}&quot; ), all_categorical() ~ &quot;{n} / {N} ({p}%)&quot;)) #dgqrtjsgqb table { font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } #dgqrtjsgqb thead, #dgqrtjsgqb tbody, #dgqrtjsgqb tfoot, #dgqrtjsgqb tr, #dgqrtjsgqb td, #dgqrtjsgqb th { border-style: none; } #dgqrtjsgqb p { margin: 0; padding: 0; } #dgqrtjsgqb .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #dgqrtjsgqb .gt_caption { padding-top: 4px; padding-bottom: 4px; } #dgqrtjsgqb .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #dgqrtjsgqb .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #dgqrtjsgqb .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #dgqrtjsgqb .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #dgqrtjsgqb .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #dgqrtjsgqb .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #dgqrtjsgqb .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #dgqrtjsgqb .gt_column_spanner_outer:first-child { padding-left: 0; } #dgqrtjsgqb .gt_column_spanner_outer:last-child { padding-right: 0; } #dgqrtjsgqb .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #dgqrtjsgqb .gt_spanner_row { border-bottom-style: hidden; } #dgqrtjsgqb .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; } #dgqrtjsgqb .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #dgqrtjsgqb .gt_from_md > :first-child { margin-top: 0; } #dgqrtjsgqb .gt_from_md > :last-child { margin-bottom: 0; } #dgqrtjsgqb .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #dgqrtjsgqb .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #dgqrtjsgqb .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #dgqrtjsgqb .gt_row_group_first td { border-top-width: 2px; } #dgqrtjsgqb .gt_row_group_first th { border-top-width: 2px; } #dgqrtjsgqb .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #dgqrtjsgqb .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #dgqrtjsgqb .gt_first_summary_row.thick { border-top-width: 2px; } #dgqrtjsgqb .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #dgqrtjsgqb .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #dgqrtjsgqb .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #dgqrtjsgqb .gt_last_grand_summary_row_top { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; } #dgqrtjsgqb .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #dgqrtjsgqb .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #dgqrtjsgqb .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #dgqrtjsgqb .gt_footnote { margin: 0px; font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #dgqrtjsgqb .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #dgqrtjsgqb .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #dgqrtjsgqb .gt_left { text-align: left; } #dgqrtjsgqb .gt_center { text-align: center; } #dgqrtjsgqb .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #dgqrtjsgqb .gt_font_normal { font-weight: normal; } #dgqrtjsgqb .gt_font_bold { font-weight: bold; } #dgqrtjsgqb .gt_font_italic { font-style: italic; } #dgqrtjsgqb .gt_super { font-size: 65%; } #dgqrtjsgqb .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; } #dgqrtjsgqb .gt_asterisk { font-size: 100%; vertical-align: 0; } #dgqrtjsgqb .gt_indent_1 { text-indent: 5px; } #dgqrtjsgqb .gt_indent_2 { text-indent: 10px; } #dgqrtjsgqb .gt_indent_3 { text-indent: 15px; } #dgqrtjsgqb .gt_indent_4 { text-indent: 20px; } #dgqrtjsgqb .gt_indent_5 { text-indent: 25px; } Characteristic N = 1501 Sepal.Length     N 150     Mean (SD) 5.84 (0.83)     Median (IQR) 5.80 (5.10, 6.40)     Range 4.30, 7.90 Sepal.Width     N 150     Mean (SD) 3.06 (0.44)     Median (IQR) 3.00 (2.80, 3.30)     Range 2.00, 4.40 Petal.Length     N 150     Mean (SD) 3.76 (1.77)     Median (IQR) 4.35 (1.60, 5.10)     Range 1.00, 6.90 Petal.Width     N 150     Mean (SD) 1.20 (0.76)     Median (IQR) 1.30 (0.30, 1.80)     Range 0.10, 2.50 Species     setosa 50 / 150 (33%)     versicolor 50 / 150 (33%)     virginica 50 / 150 (33%) 1 n / N (%) Vous pouvez de même personnaliser en adaptant la langue : theme_gtsummary_language(language = &quot;fr&quot;, decimal.mark = &quot;,&quot;, big.mark = &quot; &quot;) iris %&gt;% tbl_summary( type = all_continuous() ~ &quot;continuous2&quot;, statistic = list(all_continuous() ~ c( &quot;{N_nonmiss}&quot;, &quot;{mean} ({sd})&quot;, &quot;{median} ({p25}, {p75})&quot;, &quot;{min}, {max}&quot; ), all_categorical() ~ &quot;{n} / {N} ({p}%)&quot;)) #boopvajxig table { font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } #boopvajxig thead, #boopvajxig tbody, #boopvajxig tfoot, #boopvajxig tr, #boopvajxig td, #boopvajxig th { border-style: none; } #boopvajxig p { margin: 0; padding: 0; } #boopvajxig .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #boopvajxig .gt_caption { padding-top: 4px; padding-bottom: 4px; } #boopvajxig .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #boopvajxig .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #boopvajxig .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #boopvajxig .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #boopvajxig .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #boopvajxig .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #boopvajxig .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #boopvajxig .gt_column_spanner_outer:first-child { padding-left: 0; } #boopvajxig .gt_column_spanner_outer:last-child { padding-right: 0; } #boopvajxig .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #boopvajxig .gt_spanner_row { border-bottom-style: hidden; } #boopvajxig .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; } #boopvajxig .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #boopvajxig .gt_from_md > :first-child { margin-top: 0; } #boopvajxig .gt_from_md > :last-child { margin-bottom: 0; } #boopvajxig .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #boopvajxig .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #boopvajxig .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #boopvajxig .gt_row_group_first td { border-top-width: 2px; } #boopvajxig .gt_row_group_first th { border-top-width: 2px; } #boopvajxig .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #boopvajxig .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #boopvajxig .gt_first_summary_row.thick { border-top-width: 2px; } #boopvajxig .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #boopvajxig .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #boopvajxig .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #boopvajxig .gt_last_grand_summary_row_top { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; } #boopvajxig .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #boopvajxig .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #boopvajxig .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #boopvajxig .gt_footnote { margin: 0px; font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #boopvajxig .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #boopvajxig .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #boopvajxig .gt_left { text-align: left; } #boopvajxig .gt_center { text-align: center; } #boopvajxig .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #boopvajxig .gt_font_normal { font-weight: normal; } #boopvajxig .gt_font_bold { font-weight: bold; } #boopvajxig .gt_font_italic { font-style: italic; } #boopvajxig .gt_super { font-size: 65%; } #boopvajxig .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; } #boopvajxig .gt_asterisk { font-size: 100%; vertical-align: 0; } #boopvajxig .gt_indent_1 { text-indent: 5px; } #boopvajxig .gt_indent_2 { text-indent: 10px; } #boopvajxig .gt_indent_3 { text-indent: 15px; } #boopvajxig .gt_indent_4 { text-indent: 20px; } #boopvajxig .gt_indent_5 { text-indent: 25px; } Caractéristique N = 1501 Sepal.Length     N 150     Moyenne (ET) 5,84 (0,83)     Médiane (EI) 5,80 (5,10, 6,40)     Étendue 4,30, 7,90 Sepal.Width     N 150     Moyenne (ET) 3,06 (0,44)     Médiane (EI) 3,00 (2,80, 3,30)     Étendue 2,00, 4,40 Petal.Length     N 150     Moyenne (ET) 3,76 (1,77)     Médiane (EI) 4,35 (1,60, 5,10)     Étendue 1,00, 6,90 Petal.Width     N 150     Moyenne (ET) 1,20 (0,76)     Médiane (EI) 1,30 (0,30, 1,80)     Étendue 0,10, 2,50 Species     setosa 50 / 150 (33%)     versicolor 50 / 150 (33%)     virginica 50 / 150 (33%) 1 n / N (%) 5.6 Modèles 5.6.1 Exemple de modèle de régression linéaire On peut faire aussi des modèles avec gtsummary : tbl_merge(list( tbl_regression( lm(totalechelle~sexe+vitaux+dureeopmin,data=patient[patient$Hopital==&quot;A&quot;,]) ), tbl_regression( lm(totalechelle~sexe+vitaux+dureeopmin,data=patient[patient$Hopital==&quot;B&quot;,]) )) ) #dbopjyymix table { font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } #dbopjyymix thead, #dbopjyymix tbody, #dbopjyymix tfoot, #dbopjyymix tr, #dbopjyymix td, #dbopjyymix th { border-style: none; } #dbopjyymix p { margin: 0; padding: 0; } #dbopjyymix .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #dbopjyymix .gt_caption { padding-top: 4px; padding-bottom: 4px; } #dbopjyymix .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #dbopjyymix .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #dbopjyymix .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #dbopjyymix .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #dbopjyymix .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #dbopjyymix .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #dbopjyymix .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #dbopjyymix .gt_column_spanner_outer:first-child { padding-left: 0; } #dbopjyymix .gt_column_spanner_outer:last-child { padding-right: 0; } #dbopjyymix .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #dbopjyymix .gt_spanner_row { border-bottom-style: hidden; } #dbopjyymix .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; } #dbopjyymix .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #dbopjyymix .gt_from_md > :first-child { margin-top: 0; } #dbopjyymix .gt_from_md > :last-child { margin-bottom: 0; } #dbopjyymix .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #dbopjyymix .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #dbopjyymix .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #dbopjyymix .gt_row_group_first td { border-top-width: 2px; } #dbopjyymix .gt_row_group_first th { border-top-width: 2px; } #dbopjyymix .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #dbopjyymix .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #dbopjyymix .gt_first_summary_row.thick { border-top-width: 2px; } #dbopjyymix .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #dbopjyymix .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #dbopjyymix .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #dbopjyymix .gt_last_grand_summary_row_top { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; } #dbopjyymix .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #dbopjyymix .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #dbopjyymix .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #dbopjyymix .gt_footnote { margin: 0px; font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #dbopjyymix .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #dbopjyymix .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #dbopjyymix .gt_left { text-align: left; } #dbopjyymix .gt_center { text-align: center; } #dbopjyymix .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #dbopjyymix .gt_font_normal { font-weight: normal; } #dbopjyymix .gt_font_bold { font-weight: bold; } #dbopjyymix .gt_font_italic { font-style: italic; } #dbopjyymix .gt_super { font-size: 65%; } #dbopjyymix .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; } #dbopjyymix .gt_asterisk { font-size: 100%; vertical-align: 0; } #dbopjyymix .gt_indent_1 { text-indent: 5px; } #dbopjyymix .gt_indent_2 { text-indent: 10px; } #dbopjyymix .gt_indent_3 { text-indent: 15px; } #dbopjyymix .gt_indent_4 { text-indent: 20px; } #dbopjyymix .gt_indent_5 { text-indent: 25px; } Caractéristique Table 1 Table 2 Beta 95% IC1 p-valeur Beta 95% IC1 p-valeur sexe     Feminin — — — —     Masculin -345 -528 – -162 -314 -634 – 6,3 0,055 vitaux 18 11 – 25 4,0 -7,8 – 16 0,5 dureeopmin 0,29 -0,58 – 1,2 0,5 1,2 -0,16 – 2,5 0,084 1 IC = intervalle de confiance Une liste des fonctionnalités est disponible là : Ici "],["graphiques-et-ggplot.html", "Chapter 6 Graphiques et ggplot 6.1 Les graphiques de base 6.2 le tidyverse et ggplot 6.3 Liens", " Chapter 6 Graphiques et ggplot Les graphiques sont une composante de R qui est en partie à l’origine de son succès car on peut de très beaux et ce depuis la création de R. 6.1 Les graphiques de base Certaines sont très simples d’autres un peu plus compliquées. Nous verrons dans un premier temps les graphiques de base c’est-à-dire qui ne nécessitent pas de charger un package. 6.1.1 Pour les graphiques de chiffres Les premières fonctions présentées sont les plus usuelles comme les histogrammes. hist(patient$poids) Ce n’est pas très esthétique. Il y a des arguments aux fonctions qui permettent d’améliorer les choses. Déjà changer les noms des axes X et y, notamment se débarasser de Frequency qui est un faux ami en français. hist(patient$poids,xlab=&quot;Poids&quot;,ylab=&quot;Effectifs&quot;) Ensuite le titre : hist(patient$poids,xlab=&quot;Poids&quot;,ylab=&quot;Effectifs&quot;,main=&quot;Poids des patients&quot;) Pour la couleur, c’est un peu plus compliqué. En effet il y a simple des couleurs qui répondent à leurs mots en anglais, la liste est là. Mais les couleurs correspondent au codage web des couleurs qui sont en fait des hexadécimaux. Si vous voulez personnaliser plus les couleurs, je vous conseille le paquet RColorBrewer qui possède de jolis (et intelligents) assortiments de couleurs et de la lecture hist(patient$poids,xlab=&quot;Poids&quot;,ylab=&quot;Effectifs&quot;,main=&quot;Poids des patients&quot;,col=&quot;lightblue&quot;) Ensuite il y a les boxplots ou boîtes à moustache pour les variables continues. boxplot(patient$poids) De même on arrange un peu : boxplot(patient$poids,ylab=&quot;Poids&quot;,main=&quot;Poids des patients&quot;) Pour les boxplots on peut faire un peu mieux, par exemple pour segmenter par type de pathologies. On passe la data.frame patient et on précise le nom de la variable qualitative qui doit “séparer” les tracés. boxplot(poids ~ CIM2, data = patient,ylab=&quot;Poids&quot;,main=&quot;Poids des patients en fonction du CIM2&quot;) Le premier argument doit vous paraître un peu abstrait. En fait c’est une formule sous R. C’est l’équivalent de “patient=CIM2”. A gauche du ~ on place la variable à expliquer et à droite la ou les variables explicatives. Ici on en a une de chaque côté. Le graphique le plus simple serait le scatterplot. On aurait pu commencer par lui : Cette fois on a deux arguments qui sont la variable numérique des x en premier et la variable numérique des y en second. plot(patient$poids,patient$dureeopmin) plot(patient$poids,patient$dureeopmin,xlab=&quot;Poids&quot;,ylab=&quot;Durée opération en minutes&quot;) Qui aurait pu s’écrire : plot(dureeopmin ~ poids,data=patient,xlab=&quot;Poids&quot;,ylab=&quot;Durée opération en minutes&quot;) Si on veut tracer une ligne pour la régression linéaire, il faut faire appel à la fonction lm qui calcule la régression et R se charge du reste. coefficients &lt;- lm(dureeopmin ~ poids,data=patient) plot(patient$poids,patient$dureeopmin,xlab=&quot;Poids&quot;,ylab=&quot;Durée opération en minutes&quot;) abline(coefficients) On voit ici que j’ai appellé abline après le plot. En effet, il est nécessaire de faire un plot, un hist ou une boxplot avant pour que R initialise le graphique notamment le calcul des coordonnées maximales et minimales. D’ailleurs on peut les spécifier nous mêmes : coefficients &lt;- lm(dureeopmin~poids,data=patient) plot(patient$poids,patient$dureeopmin,xlab=&quot;Poids&quot;,ylab=&quot;Durée opération en minutes&quot;, xlim=c(0,150),ylim=c(0,600),type=&quot;n&quot;) abline(coefficients) text(patient$poids,patient$dureeopmin,patient$UID) Pour sauvegarder un graphique, on doit le faire avant d’appeler la fonction principale et refermer le fichier avec la commande dev.off: La dernière fonction à connaître pour les graphiques de base est le barplot. Il s’agit de représenter des tableaux de contingence, le plus simple étant à une dimension : tableau &lt;- table(patient$sexe) barplot(tableau, main = &quot;sexe&quot;, ylab = &quot;Effectifs&quot;) On peut lui passer un argument à deux dimensions mais la table devient tout de suite difficile à lire. tableau &lt;- table(patient$CIM2,patient$sexe) barplot(tableau, main = &quot;CIM2&quot;, ylab = &quot;Effectifs&quot;) 6.2 le tidyverse et ggplot Vous pourrez comme précédemment entendre parler des graphiques de base de même que des graphiques lattice mais le choucou du tidyverse c’est ggplot2. C’est un éco-système de packages qui permet de faire la plupart des graphiques plus simplement et qui est basé sur le paquet gplot2. Un livre gratuit lui est consacré là et une page en français là On va reprendre notre grammaire. Il faut saisir que ggplot2 fonctionne par couche. Sur une base, vous additionner des couches qui apporte la personnalisation des graphiques. 6.2.1 La base Au tout départ, il faut lui passer une data.frame, c’est le passage obligé. ggplot(patient) Ensuite on précise les variables de travail. Pour l’histogramme, on en a qu’une : ggplot(patient,aes(poids)) Vous pouvez constater, que le logiciel a calculé et positionner les légendes pour créer un graphique avec poids comme variable des abscisses (horizontal). On personnalise en demandant un graphique de type histogramme. En additionnant littéralement: ggplot(patient,aes(poids))+geom_histogram() Pour modifier les limtes du graphiques, on rajoute : ggplot(patient,aes(poids))+geom_histogram()+ scale_x_continuous(limits = c(0,150)) + scale_y_continuous(limits = c(0,20)) Si on veut modifier le nombre de barres verticales (la précision de l’histogramme), on précise l’option dans la couche de l’histogramme : ggplot(patient,aes(poids))+geom_histogram(bins=10)+ scale_x_continuous(limits = c(0,150)) Pour les titres, c’est pareil, on ajoute des couches : ggplot(patient,aes(poids))+geom_histogram()+ scale_x_continuous(limits = c(0,150)) + ggtitle(&quot;Poids des patients&quot;) + xlab(&quot;Poids&quot;) + ylab(&quot;Effectifs&quot;) On peut ajouter des propriétés esthétiques comme la couleur, par exemple : ggplot(patient,aes(poids))+geom_histogram(fill =&quot;lightblue&quot;, colour = &quot;black&quot;)+ scale_x_continuous(limits = c(0,150)) + ggtitle(&quot;Poids des patients&quot;) + xlab(&quot;Poids&quot;) + ylab(&quot;Effectifs&quot;) Là où ggplot2 sort du lot, c’est sa capacité à segmenter et à représenter avec une bonne grammaire graphique ggplot(patient,aes(poids,fill=sexe))+geom_histogram(color=&quot;black&quot;)+ scale_x_continuous(limits = c(0,150)) + ggtitle(&quot;Poids des patients&quot;) + xlab(&quot;Poids&quot;) + ylab(&quot;Effectifs&quot;) On a l’ajout de couleurs ou alors deux graphiques avec des unités bien choisies: ggplot(patient,aes(poids,fill=sexe))+geom_histogram(color=&quot;black&quot;)+ scale_x_continuous(limits = c(0,150)) + ggtitle(&quot;Poids des patients&quot;) + xlab(&quot;Poids&quot;) + ylab(&quot;Effectifs&quot;) + facet_grid(sexe ~ .) On a de nouveau une formule. Cette fois, c’est à gauche du ~ les lignes et à droite les colonnes : ggplot(patient,aes(poids))+geom_histogram(color=&quot;black&quot;)+ scale_x_continuous(limits = c(0,150)) + ggtitle(&quot;Poids des patients&quot;) + xlab(&quot;Poids&quot;) + ylab(&quot;Effectifs&quot;) + facet_grid(sexe ~ Hopital) On peut vouloir calculer la densité et non les effectifs dans ce cas : ggplot(patient,aes(poids))+geom_histogram(aes(y = ..density..),color=&quot;black&quot;)+ scale_x_continuous(limits = c(0,150)) + ggtitle(&quot;Poids des patients&quot;) + xlab(&quot;Poids&quot;) + ylab(&quot;Densité&quot;) + facet_grid(sexe ~ Hopital) 6.2.2 Les autres graphiques Le boxplot : ggplot(patient,aes(x=poids,fill=sexe))+geom_boxplot()+ ggtitle(&quot;Poids des patients&quot;) + xlab(&quot;Poids&quot;) + ylab(&quot;Densité&quot;) + facet_grid(Hopital ~ .) ggplot(patient,aes(x=sexe,y=poids))+geom_boxplot()+ ggtitle(&quot;Poids des patients&quot;) + xlab(&quot;Poids&quot;) + ylab(&quot;Densité&quot;) + facet_grid(Hopital ~ .) ggplot(patient,aes(poids))+geom_boxplot()+ ggtitle(&quot;Poids des patients&quot;) + xlab(&quot;Poids&quot;) + ylab(&quot;Densité&quot;) + facet_grid(sexe ~ Hopital) D’où des graphiques en scatterplot comme : ggplot(patient,aes(x=poids,y=dureeopmin))+geom_point(aes(col=sexe))+ ggtitle(&quot;Caractéristiques des patients&quot;) + xlab(&quot;Poids&quot;) + ylab(&quot;Durée de l&#39;opération en minutes&quot;) ou en rajoutant plein de trucs : ggplot(patient,aes(x=poids,y=dureeopmin))+geom_point(aes(col=sexe))+ ggtitle(&quot;Caractéristiques des patients&quot;) + xlab(&quot;Poids&quot;) + ylab(&quot;Durée de l&#39;opération en minutes&quot;) + facet_grid(CIM2 ~ Hopital) Si on veut ajouter une variable de gravité inversée par rapport à la variable CIM2, avec 1 l’opération la plus grave et 4 l’opération bénigne: patient$Gravité &lt;- LETTERS[5 - patient$CIM2] ggplot(patient,aes(x=poids,y=dureeopmin))+geom_point(aes(col=sexe))+ ggtitle(&quot;Caractéristiques des patients&quot;) + xlab(&quot;Poids&quot;) + ylab(&quot;Durée de l&#39;opération en minutes&quot;) + facet_grid(Gravité ~ Hopital) Pour rajouter une droite de régression : ggplot(patient,aes(x=poids,y=dureeopmin))+geom_point(aes(col=sexe))+ geom_smooth(method=&quot;lm&quot;) + ggtitle(&quot;Caractéristiques des patients&quot;) + xlab(&quot;Poids&quot;) + ylab(&quot;Durée de l&#39;opération en minutes&quot;) + facet_grid(CIM2 ~ Hopital) Des courbes de tendances : ggplot(patient,aes(x=poids,y=dureeopmin))+geom_point(aes(col=sexe))+ geom_smooth() + ggtitle(&quot;Caractéristiques des patients&quot;) + xlab(&quot;Poids&quot;) + ylab(&quot;Durée de l&#39;opération en minutes&quot;) + facet_grid(CIM2 ~ Hopital) Sans l’intervalle de confiance : ggplot(patient,aes(x=vitaux,y=totalechelle))+geom_point(aes(col=sexe))+ geom_smooth(se=FALSE) + ggtitle(&quot;Caractéristiques des patients&quot;) + xlab(&quot;Poids&quot;) + ylab(&quot;Durée de l&#39;opération en minutes&quot;) + facet_grid(CIM2 ~ Hopital) Avec l’intervalle de confiance et la droite de régression : ggplot(patient,aes(x=dureeopmin,y=totalechelle))+geom_point(aes(col=sexe))+ geom_smooth(method=&quot;lm&quot;,se=FALSE) + ggtitle(&quot;Total des échelles de douleur et durée opération&quot;) + xlab(&quot;Durée de l&#39;opération en minutes&quot;) + ylab(&quot;Total des échelles de douleur&quot;) + facet_grid(CIM2 ~ Hopital) Pour ajouter des étiquettes, il existe la librairie ggrepel qui permet de faire en sorte que la superposition des étiquettes soit minimale : ggplot(patient,aes(x=dureeopmin,y=totalechelle,label=UID))+geom_point(aes(col=sexe))+ geom_smooth(method=&quot;lm&quot;,se=FALSE) + geom_text_repel() + ggtitle(&quot;Total des échelles de douleur et durée opération&quot;) + xlab(&quot;Durée de l&#39;opération en minutes&quot;) + ylab(&quot;Total des échelles de douleur&quot;) Evidemment toutes les étiquettes ne sont pas dessinés car il y a trop d’individus mais cela permet de repérer les individus atypiques. 6.2.3 Tableaux de contingences Pour les tableaux de fréquences, on peut faire très simple : ggplot(patient,aes(sexe))+geom_bar() ggplot(patient,aes(sexe))+geom_bar()+ facet_grid(.~Hopital) Là où ggplot2 commence à devenir compliqué, c’est que geom_bar ne va pas marcher car il faut lui fournir la data.frame avec les statistiques en ligne. Soit : ## sexe CIM2 effectif ## 1 Feminin 1 20 ## 2 Masculin 1 30 ## 3 Feminin 2 26 ## 4 Masculin 2 24 ## 5 Feminin 3 28 ## 6 Masculin 3 22 ## 7 Feminin 4 41 ## 8 Masculin 4 9 Pour faire ce tableau, il faut faire appel au package reshape2. require(reshape2) tableau &lt;- table(patient$sexe,patient$CIM2) tableau ## ## 1 2 3 4 ## Feminin 20 26 28 41 ## Masculin 30 24 22 9 De ce tableau on passe au long en une commande : long &lt;- melt(tableau,varnames = c(&quot;sexe&quot;,&quot;CIM2&quot;),value.name = &quot;value&quot;) Il faut spécifier le nom à donner aux deux variables et spécifier le résultat du croisement des deux variables qui est le nombre d’observations c’est-à-dire le contenu de chaque cellule de tableau. ggplot(long,aes(x=sexe,y=value,fill=CIM2))+geom_bar(position = &quot;stack&quot;,stat=&quot;identity&quot;) Je dois faire de CIM2 une variable qualitative explicitement. En effet, CIM2 est numérique (un entier de 1 à 4). Aussi quand je donne le CIM2 à l’argument fill= il ne sait pas s’il s’agit de la couleur (qui peut être un code numérique aussi) ou d’une variable qualitative. ggplot(long,aes(x=sexe,y=value,fill=factor(CIM2)))+geom_bar(position = &quot;dodge&quot;,stat=&quot;identity&quot;) D’où le graphique : tableau &lt;- table(patient$Hopital,patient$sexe,patient$CIM2) long &lt;- melt(tableau,varnames = c(&quot;Hopital&quot;,&quot;sexe&quot;,&quot;CIM2&quot;),value.name = &quot;effectif&quot;) ggplot(long,aes(x=CIM2,y=effectif,fill=sexe))+ geom_bar(position = &quot;dodge&quot;,stat=&quot;identity&quot;)+ facet_grid(Hopital ~ . ) Pour sauvegarder un graphique ggplot2, la syntaxe est différente et surtout on l’appelle une fois que le graphique est terminé, c’est-à-dire en dernier : Et ainsi de suite… 6.2.4 Les thèmes Les graphiques de ggplot peuvent changer selon des thèmes qui définissent des styles de graphique différents. Celui à retenir est minimal qui fait que le graphique est épuré au maximum : tableau &lt;- table(patient$Hopital,patient$sexe,patient$CIM2) long &lt;- melt(tableau,varnames = c(&quot;Hopital&quot;,&quot;sexe&quot;,&quot;CIM2&quot;),value.name = &quot;effectif&quot;) ggplot(long,aes(x=CIM2,y=effectif,fill=sexe))+ geom_bar(position = &quot;dodge&quot;,stat=&quot;identity&quot;)+ facet_grid(Hopital ~ . ) + theme_minimal() Il y a 10 à 20 thèmes par défaut et il y a des variantes supplémentaires et de quoi personnaliser ses propres thèmes dans le package ggthemes. 6.3 Liens Il y a de nombreuses galleries sur le web avec toutes les possiblités offertes par les graphiques de base comme les graphiques avec ggplot2. r-graph-gallery r-chart … On peut en parcourir ensemble… tableau &lt;- dcast(patient, UID + sexe ~ Hopital, value.var = &quot;nbechelle&quot;) tableau$poids &lt;- ifelse(!is.na(tableau$A),tableau$A,tableau$B) ggplot(tableau, aes(x=nbechelle) ) + geom_density( aes(x = A, y = ..density..), fill=&quot;#69b3a2&quot; ) + geom_label(aes(x=90, y=0.01, label=&quot;Hopital A&quot;), color=&quot;#69b3a2&quot;) + geom_density( aes(x = B, y = -..density..), fill= &quot;#404080&quot;) + geom_label(aes(x=90,y=-0.01, label=&quot;Hopital B&quot;), color=&quot;#404080&quot;) "],["manipulation-avancée-mettre-en-forme-vos-données.html", "Chapter 7 Manipulation avancée (mettre en forme vos données) 7.1 Transformation de plusieurs variables 7.2 Opérateurs et case_when 7.3 Réutilisation de statistiques 7.4 Chargement", " Chapter 7 Manipulation avancée (mettre en forme vos données) Le but de cette partie qui ne sera pas très longue sur le papier mais beaucoup plus à l’apprentissage est de vous montrer comment automatiser les choses. Pour prendre un exemple qui nous est familier, transformer en facteur ou en variable ordinale des items de plusieurs échelles. Sous SPSS ou sous R, c’est pénible si vous n’utilisez pas les macros pour SPSS ou la programmation sous R. On peut automatiser beaucoup de choses sous R. Il y a des paquets sous R qui permettent d’analyser des modèles structuraux ou faire des pages web interactives. Sans aller jusque là, on peut se rendre la vie plus facile. 7.1 Transformation de plusieurs variables On va charger le fichier de données en ligne : file.name &lt;- &quot;https://personality-project.org/r/psych/HowTo/scoring.tutorial/small.msq.txt&quot; msq &lt;- read_table(file.name) ## ## ── Column specification ─────────────────────────────────────────────────────────────────────────────────────────── ## cols( ## `&quot;active&quot;` = col_double(), ## `&quot;alert&quot;` = col_double(), ## `&quot;aroused&quot;` = col_double(), ## `&quot;sleepy&quot;` = col_double(), ## `&quot;tired&quot;` = col_double(), ## `&quot;drowsy&quot;` = col_double(), ## `&quot;anxious&quot;` = col_double(), ## `&quot;jittery&quot;` = col_double(), ## `&quot;nervous&quot;` = col_double(), ## `&quot;calm&quot;` = col_double(), ## `&quot;relaxed&quot;` = col_double(), ## `&quot;at.ease&quot;` = col_double(), ## `&quot;gender&quot;` = col_double(), ## `&quot;drug&quot;` = col_double() ## ) Oui au passage on peut lire des fichiers de données directement en ligne. Dans ce cas, on a utilisé la commande read_table du package readr, car le séparateur de champs est l’espace. str(msq) ## spc_tbl_ [200 × 14] (S3: spec_tbl_df/tbl_df/tbl/data.frame) ## $ &quot;active&quot; : num [1:200] 2 1 1 1 1 3 1 0 3 1 ... ## $ &quot;alert&quot; : num [1:200] 2 1 1 2 2 3 1 1 3 1 ... ## $ &quot;aroused&quot;: num [1:200] 0 0 1 0 1 2 0 0 3 0 ... ## $ &quot;sleepy&quot; : num [1:200] 0 2 3 1 1 0 2 1 0 1 ... ## $ &quot;tired&quot; : num [1:200] 1 2 3 1 1 0 2 1 0 1 ... ## $ &quot;drowsy&quot; : num [1:200] 1 2 2 0 0 0 3 1 0 1 ... ## $ &quot;anxious&quot;: num [1:200] 1 1 2 0 0 1 0 0 3 0 ... ## $ &quot;jittery&quot;: num [1:200] 1 0 0 0 1 0 0 0 3 0 ... ## $ &quot;nervous&quot;: num [1:200] 0 1 1 0 0 0 0 0 1 0 ... ## $ &quot;calm&quot; : num [1:200] 2 2 2 2 3 2 1 3 0 1 ... ## $ &quot;relaxed&quot;: num [1:200] 2 2 2 2 2 3 2 2 0 2 ... ## $ &quot;at.ease&quot;: num [1:200] 2 2 2 2 3 3 1 2 0 2 ... ## $ &quot;gender&quot; : num [1:200] 2 2 1 2 1 1 2 2 1 1 ... ## $ &quot;drug&quot; : num [1:200] 2 1 1 2 1 2 2 1 2 1 ... ## - attr(*, &quot;spec&quot;)= ## .. cols( ## .. `&quot;active&quot;` = col_double(), ## .. `&quot;alert&quot;` = col_double(), ## .. `&quot;aroused&quot;` = col_double(), ## .. `&quot;sleepy&quot;` = col_double(), ## .. `&quot;tired&quot;` = col_double(), ## .. `&quot;drowsy&quot;` = col_double(), ## .. `&quot;anxious&quot;` = col_double(), ## .. `&quot;jittery&quot;` = col_double(), ## .. `&quot;nervous&quot;` = col_double(), ## .. `&quot;calm&quot;` = col_double(), ## .. `&quot;relaxed&quot;` = col_double(), ## .. `&quot;at.ease&quot;` = col_double(), ## .. `&quot;gender&quot;` = col_double(), ## .. `&quot;drug&quot;` = col_double() ## .. ) On voit que les guillemets ont été importés et parasite la ligne des noms de colonnes. Pour ça on utilise gsub, une fonction qui remplace les caractéères dans le premier argument par les caractères dans le deuxième. Le troisième argument est vecteur dans lequel on veut remplacer le texte. Ici on va remplacer un guillemet double, partout, par aucun caractère. Et on applique ça aux noms de variables de msq, ce qui nous donne : colnames(msq) &lt;- gsub(&#39;&quot;&#39;,&#39;&#39;,colnames(msq),fixed=T) msq ## # A tibble: 200 × 14 ## active alert aroused sleepy tired drowsy anxious jittery nervous calm relaxed at.ease gender drug ## &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 2 2 0 0 1 1 1 1 0 2 2 2 2 2 ## 2 1 1 0 2 2 2 1 0 1 2 2 2 2 1 ## 3 1 1 1 3 3 2 2 0 1 2 2 2 1 1 ## 4 1 2 0 1 1 0 0 0 0 2 2 2 2 2 ## 5 1 2 1 1 1 0 0 1 0 3 2 3 1 1 ## 6 3 3 2 0 0 0 1 0 0 2 3 3 1 2 ## 7 1 1 0 2 2 3 0 0 0 1 2 1 2 2 ## 8 0 1 0 1 1 1 0 0 0 3 2 2 2 1 ## 9 3 3 3 0 0 0 3 3 1 0 0 0 1 2 ## 10 1 1 0 1 1 1 0 0 0 1 2 2 1 1 ## # ℹ 190 more rows Les commentaires de read.table indique que les colonnes sont toutes des nombres réels de double précision. C’est très bien pour les analyses psychométriques primaires avec psych mais pas avec lavaan qui réclame des facteurs. On va utiliser la machine à automatiser mutate_at qui permet d’appliquer une transformation sur une série de variable. Dans le premier argument, on mets vars() et à l’intérieur quelque chose pour définir une ou des variables comme avec un select. Le deuxième argument est la fonction à appliquer et après les arguments optionnels. msq_fact &lt;- msq msq_fact &lt;- msq_fact %&gt;% mutate(across(active:at.ease,~ factor(.x,ordered=T))) Pour être vraiment propre, on spécifierait les niveaux : msq_fact &lt;- msq_fact %&gt;% mutate(across(active:at.ease, ~ factor(.x,levels=c(0,1,2,3),ordered=T))) str(msq_fact) ## tibble [200 × 14] (S3: tbl_df/tbl/data.frame) ## $ active : Ord.factor w/ 4 levels &quot;0&quot;&lt;&quot;1&quot;&lt;&quot;2&quot;&lt;&quot;3&quot;: 3 2 2 2 2 4 2 1 4 2 ... ## $ alert : Ord.factor w/ 4 levels &quot;0&quot;&lt;&quot;1&quot;&lt;&quot;2&quot;&lt;&quot;3&quot;: 3 2 2 3 3 4 2 2 4 2 ... ## $ aroused: Ord.factor w/ 4 levels &quot;0&quot;&lt;&quot;1&quot;&lt;&quot;2&quot;&lt;&quot;3&quot;: 1 1 2 1 2 3 1 1 4 1 ... ## $ sleepy : Ord.factor w/ 4 levels &quot;0&quot;&lt;&quot;1&quot;&lt;&quot;2&quot;&lt;&quot;3&quot;: 1 3 4 2 2 1 3 2 1 2 ... ## $ tired : Ord.factor w/ 4 levels &quot;0&quot;&lt;&quot;1&quot;&lt;&quot;2&quot;&lt;&quot;3&quot;: 2 3 4 2 2 1 3 2 1 2 ... ## $ drowsy : Ord.factor w/ 4 levels &quot;0&quot;&lt;&quot;1&quot;&lt;&quot;2&quot;&lt;&quot;3&quot;: 2 3 3 1 1 1 4 2 1 2 ... ## $ anxious: Ord.factor w/ 4 levels &quot;0&quot;&lt;&quot;1&quot;&lt;&quot;2&quot;&lt;&quot;3&quot;: 2 2 3 1 1 2 1 1 4 1 ... ## $ jittery: Ord.factor w/ 4 levels &quot;0&quot;&lt;&quot;1&quot;&lt;&quot;2&quot;&lt;&quot;3&quot;: 2 1 1 1 2 1 1 1 4 1 ... ## $ nervous: Ord.factor w/ 4 levels &quot;0&quot;&lt;&quot;1&quot;&lt;&quot;2&quot;&lt;&quot;3&quot;: 1 2 2 1 1 1 1 1 2 1 ... ## $ calm : Ord.factor w/ 4 levels &quot;0&quot;&lt;&quot;1&quot;&lt;&quot;2&quot;&lt;&quot;3&quot;: 3 3 3 3 4 3 2 4 1 2 ... ## $ relaxed: Ord.factor w/ 4 levels &quot;0&quot;&lt;&quot;1&quot;&lt;&quot;2&quot;&lt;&quot;3&quot;: 3 3 3 3 3 4 3 3 1 3 ... ## $ at.ease: Ord.factor w/ 4 levels &quot;0&quot;&lt;&quot;1&quot;&lt;&quot;2&quot;&lt;&quot;3&quot;: 3 3 3 3 4 4 2 3 1 3 ... ## $ gender : num [1:200] 2 2 1 2 1 1 2 2 1 1 ... ## $ drug : num [1:200] 2 1 1 2 1 2 2 1 2 1 ... Il y a des variantes à mutate_at comme mutate_if. Par exemple, pour centrer/réduire les variables numériques : iris &lt;- iris %&gt;% mutate(across(where(is.numeric),scale)) Si la variable est numérique alors R va centrer/réduire la variable. Donc pas de problème avec Species qui est un facteur : str(iris) ## &#39;data.frame&#39;: 150 obs. of 5 variables: ## $ Sepal.Length: num [1:150, 1] -0.898 -1.139 -1.381 -1.501 -1.018 ... ## ..- attr(*, &quot;scaled:center&quot;)= num 5.84 ## ..- attr(*, &quot;scaled:scale&quot;)= num 0.828 ## $ Sepal.Width : num [1:150, 1] 1.0156 -0.1315 0.3273 0.0979 1.245 ... ## ..- attr(*, &quot;scaled:center&quot;)= num 3.06 ## ..- attr(*, &quot;scaled:scale&quot;)= num 0.436 ## $ Petal.Length: num [1:150, 1] -1.34 -1.34 -1.39 -1.28 -1.34 ... ## ..- attr(*, &quot;scaled:center&quot;)= num 3.76 ## ..- attr(*, &quot;scaled:scale&quot;)= num 1.77 ## $ Petal.Width : num [1:150, 1] -1.31 -1.31 -1.31 -1.31 -1.31 ... ## ..- attr(*, &quot;scaled:center&quot;)= num 1.2 ## ..- attr(*, &quot;scaled:scale&quot;)= num 0.762 ## $ Species : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ... Soit : iris %&gt;% tbl_summary(statistic = list( all_continuous() ~ &quot;{mean} ({sd})&quot;),type = c(Sepal.Length:Petal.Width) ~ &quot;continuous&quot;) #jpiylbdbfm table { font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } #jpiylbdbfm thead, #jpiylbdbfm tbody, #jpiylbdbfm tfoot, #jpiylbdbfm tr, #jpiylbdbfm td, #jpiylbdbfm th { border-style: none; } #jpiylbdbfm p { margin: 0; padding: 0; } #jpiylbdbfm .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #jpiylbdbfm .gt_caption { padding-top: 4px; padding-bottom: 4px; } #jpiylbdbfm .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #jpiylbdbfm .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #jpiylbdbfm .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #jpiylbdbfm .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #jpiylbdbfm .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #jpiylbdbfm .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #jpiylbdbfm .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #jpiylbdbfm .gt_column_spanner_outer:first-child { padding-left: 0; } #jpiylbdbfm .gt_column_spanner_outer:last-child { padding-right: 0; } #jpiylbdbfm .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #jpiylbdbfm .gt_spanner_row { border-bottom-style: hidden; } #jpiylbdbfm .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; } #jpiylbdbfm .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #jpiylbdbfm .gt_from_md > :first-child { margin-top: 0; } #jpiylbdbfm .gt_from_md > :last-child { margin-bottom: 0; } #jpiylbdbfm .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #jpiylbdbfm .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #jpiylbdbfm .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #jpiylbdbfm .gt_row_group_first td { border-top-width: 2px; } #jpiylbdbfm .gt_row_group_first th { border-top-width: 2px; } #jpiylbdbfm .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #jpiylbdbfm .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #jpiylbdbfm .gt_first_summary_row.thick { border-top-width: 2px; } #jpiylbdbfm .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #jpiylbdbfm .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #jpiylbdbfm .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #jpiylbdbfm .gt_last_grand_summary_row_top { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; } #jpiylbdbfm .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #jpiylbdbfm .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #jpiylbdbfm .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #jpiylbdbfm .gt_footnote { margin: 0px; font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #jpiylbdbfm .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #jpiylbdbfm .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #jpiylbdbfm .gt_left { text-align: left; } #jpiylbdbfm .gt_center { text-align: center; } #jpiylbdbfm .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #jpiylbdbfm .gt_font_normal { font-weight: normal; } #jpiylbdbfm .gt_font_bold { font-weight: bold; } #jpiylbdbfm .gt_font_italic { font-style: italic; } #jpiylbdbfm .gt_super { font-size: 65%; } #jpiylbdbfm .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; } #jpiylbdbfm .gt_asterisk { font-size: 100%; vertical-align: 0; } #jpiylbdbfm .gt_indent_1 { text-indent: 5px; } #jpiylbdbfm .gt_indent_2 { text-indent: 10px; } #jpiylbdbfm .gt_indent_3 { text-indent: 15px; } #jpiylbdbfm .gt_indent_4 { text-indent: 20px; } #jpiylbdbfm .gt_indent_5 { text-indent: 25px; } Caractéristique N = 1501 Sepal.Length 0,00 (1,00) Sepal.Width 0,00 (1,00) Petal.Length 0,00 (1,00) Petal.Width 0,00 (1,00) Species     setosa 50 (33%)     versicolor 50 (33%)     virginica 50 (33%) 1 Moyenne (ET); n (%) 7.2 Opérateurs et case_when On appelle opérateur des mots-clefs généralement symbolique comme les +,/,==, etc. Par exemple de très utile, il y a l’opérateur %in%. Il prends un vecteur à gauche et un vecteur à droite. Dans le cas simple, avec un élement dans un vecteur à gauche, il renvoie vrai si l’élement à gauche est présent dans le vecteur de droite : 3 %in% 1:5 ## [1] TRUE -1 %in% 1:5 ## [1] FALSE Quand il y a plusieurs élements à gauche, l’opérateur renvoie une réponse pour chaque élement à gauche : c(1,3) %in% 1:5 ## [1] TRUE TRUE c(-1,3) %in% 1:5 ## [1] FALSE TRUE Si on veut transformer msq en items dichotomiques, c’est-à-dire coder 0 ou 1 en 0 et 2 et 3 en 1. Alors ça devient facile. En fait il y a deux façons de l’écrire. la première est old school. On utilise la fonction ifelse pour renvoyer 0 ou 1 selon la réponse : Pour comprendre ifelse un exemple : ifelse(c(TRUE,FALSE,TRUE,FALSE,FALSE),1,0) ## [1] 1 0 1 0 0 ifelse renvoie 1 quand c’est vrai et 0 quand c’est faux. Ce qui nous donne associé à notre nouvel opérateur: active &lt;- ifelse(msq$active %in% c(2,3),1,0) table(active) ## active ## 0 1 ## 156 44 C’est un peu brutal car on ne précise pas explicitement ce que va prendre les valeurs 0 et 1. En plus élégant, il y a une variante à privilégier avec le tidyverse: msq2 &lt;- msq %&gt;% mutate(active=case_when( active %in% c(0,1) ~ 0, active %in% c(2,3) ~ 1, .default = NA )) table(msq2$active) ## ## 0 1 ## 156 44 Mais là, on ne fait qu’un variable à la fois, il faudrait appliquer une fonction pour avoir le résultat sur toutes les variables. Une fonction se définit par un corps de fonction, des arguments et un nom. ma.fonction &lt;- function(x) { return(x) } Ce qui donne : ma.fonction(1) ## [1] 1 Ce qui est en dernière ligne ou bien (c’est mieux) ce qui est indiqué entre parenthèses pour la fonction return est renvoyée. Donc notre fonction devient : dichotomiser &lt;- function(x) { resultat &lt;- case_when( x %in% c(0,1) ~ 0, x %in% c(2,3) ~ 1, .default = NA ) return(resultat) } table(dichotomiser(msq$active)) ## ## 0 1 ## 156 44 Pour l’appliquer, il faut se rappeler de mutate_at: msq2 &lt;- msq %&gt;% mutate(across(active:at.ease,dichotomiser)) Ce qui donne bien : tbl_summary(msq2) #anewmlwevc table { font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } #anewmlwevc thead, #anewmlwevc tbody, #anewmlwevc tfoot, #anewmlwevc tr, #anewmlwevc td, #anewmlwevc th { border-style: none; } #anewmlwevc p { margin: 0; padding: 0; } #anewmlwevc .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #anewmlwevc .gt_caption { padding-top: 4px; padding-bottom: 4px; } #anewmlwevc .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #anewmlwevc .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #anewmlwevc .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #anewmlwevc .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #anewmlwevc .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #anewmlwevc .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #anewmlwevc .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #anewmlwevc .gt_column_spanner_outer:first-child { padding-left: 0; } #anewmlwevc .gt_column_spanner_outer:last-child { padding-right: 0; } #anewmlwevc .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #anewmlwevc .gt_spanner_row { border-bottom-style: hidden; } #anewmlwevc .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; } #anewmlwevc .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #anewmlwevc .gt_from_md > :first-child { margin-top: 0; } #anewmlwevc .gt_from_md > :last-child { margin-bottom: 0; } #anewmlwevc .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #anewmlwevc .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #anewmlwevc .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #anewmlwevc .gt_row_group_first td { border-top-width: 2px; } #anewmlwevc .gt_row_group_first th { border-top-width: 2px; } #anewmlwevc .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #anewmlwevc .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #anewmlwevc .gt_first_summary_row.thick { border-top-width: 2px; } #anewmlwevc .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #anewmlwevc .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #anewmlwevc .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #anewmlwevc .gt_last_grand_summary_row_top { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; } #anewmlwevc .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #anewmlwevc .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #anewmlwevc .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #anewmlwevc .gt_footnote { margin: 0px; font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #anewmlwevc .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #anewmlwevc .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #anewmlwevc .gt_left { text-align: left; } #anewmlwevc .gt_center { text-align: center; } #anewmlwevc .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #anewmlwevc .gt_font_normal { font-weight: normal; } #anewmlwevc .gt_font_bold { font-weight: bold; } #anewmlwevc .gt_font_italic { font-style: italic; } #anewmlwevc .gt_super { font-size: 65%; } #anewmlwevc .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; } #anewmlwevc .gt_asterisk { font-size: 100%; vertical-align: 0; } #anewmlwevc .gt_indent_1 { text-indent: 5px; } #anewmlwevc .gt_indent_2 { text-indent: 10px; } #anewmlwevc .gt_indent_3 { text-indent: 15px; } #anewmlwevc .gt_indent_4 { text-indent: 20px; } #anewmlwevc .gt_indent_5 { text-indent: 25px; } Caractéristique N = 2001 active 44 (22%) alert 49 (25%)     Manquant 1 aroused 24 (12%) sleepy 101 (51%)     Manquant 2 tired 123 (62%) drowsy 98 (49%) anxious 26 (13%) jittery 31 (16%) nervous 20 (10%) calm 106 (53%) relaxed 119 (60%)     Manquant 1 at.ease 91 (46%)     Manquant 2 gender     1 62 (46%)     2 74 (54%)     Manquant 64 drug     1 68 (50%)     2 68 (50%)     Manquant 64 1 n (%) 7.3 Réutilisation de statistiques Contrairement aux autres logiciels, les résultats statistiques sont la plupart du temps réutilisable par l’utilisateur. Par exemple, sous Jamovi, il faut créer des variables à la main pour créer des variables avec les quantiles. Pour créer ces variables sous R, c’est beaucoup plus simple, il n’y a pas besoin de faire de tests (if): quantile(iris$Sepal.Length) ## 0% 25% 50% 75% 100% ## -1.86378030 -0.89767388 -0.05233076 0.67224905 2.48369858 La fonction quantile nous renvoie les quartiles sous la forme d’un vecteur qu’il suffit de combiner avec une autre fonction cut. Cette dernière crée des variables facteurs à partir d’une variable quantitative et de points de césure. Les points de césure sont fournis par la fonction quantile, par conséquent : table(cut(iris$Sepal.Length, breaks=quantile(iris$Sepal.Length))) ## ## (-1.86,-0.898] (-0.898,-0.0523] (-0.0523,0.672] (0.672,2.48] ## 40 39 35 35 Pour généraliser : quartiles &lt;- function(x) { cut(x, breaks=quantile(x)) } iris2 &lt;- iris %&gt;% mutate(across(where(is.numeric),quartiles)) tbl_summary(iris2) #mycqmslfcr table { font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } #mycqmslfcr thead, #mycqmslfcr tbody, #mycqmslfcr tfoot, #mycqmslfcr tr, #mycqmslfcr td, #mycqmslfcr th { border-style: none; } #mycqmslfcr p { margin: 0; padding: 0; } #mycqmslfcr .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #mycqmslfcr .gt_caption { padding-top: 4px; padding-bottom: 4px; } #mycqmslfcr .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #mycqmslfcr .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #mycqmslfcr .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #mycqmslfcr .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #mycqmslfcr .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #mycqmslfcr .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #mycqmslfcr .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #mycqmslfcr .gt_column_spanner_outer:first-child { padding-left: 0; } #mycqmslfcr .gt_column_spanner_outer:last-child { padding-right: 0; } #mycqmslfcr .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #mycqmslfcr .gt_spanner_row { border-bottom-style: hidden; } #mycqmslfcr .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; } #mycqmslfcr .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #mycqmslfcr .gt_from_md > :first-child { margin-top: 0; } #mycqmslfcr .gt_from_md > :last-child { margin-bottom: 0; } #mycqmslfcr .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #mycqmslfcr .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #mycqmslfcr .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #mycqmslfcr .gt_row_group_first td { border-top-width: 2px; } #mycqmslfcr .gt_row_group_first th { border-top-width: 2px; } #mycqmslfcr .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #mycqmslfcr .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #mycqmslfcr .gt_first_summary_row.thick { border-top-width: 2px; } #mycqmslfcr .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #mycqmslfcr .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #mycqmslfcr .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #mycqmslfcr .gt_last_grand_summary_row_top { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; } #mycqmslfcr .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #mycqmslfcr .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #mycqmslfcr .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #mycqmslfcr .gt_footnote { margin: 0px; font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #mycqmslfcr .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #mycqmslfcr .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #mycqmslfcr .gt_left { text-align: left; } #mycqmslfcr .gt_center { text-align: center; } #mycqmslfcr .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #mycqmslfcr .gt_font_normal { font-weight: normal; } #mycqmslfcr .gt_font_bold { font-weight: bold; } #mycqmslfcr .gt_font_italic { font-style: italic; } #mycqmslfcr .gt_super { font-size: 65%; } #mycqmslfcr .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; } #mycqmslfcr .gt_asterisk { font-size: 100%; vertical-align: 0; } #mycqmslfcr .gt_indent_1 { text-indent: 5px; } #mycqmslfcr .gt_indent_2 { text-indent: 10px; } #mycqmslfcr .gt_indent_3 { text-indent: 15px; } #mycqmslfcr .gt_indent_4 { text-indent: 20px; } #mycqmslfcr .gt_indent_5 { text-indent: 25px; } Caractéristique N = 1501 Sepal.Length     (-1.86,-0.898] 40 (27%)     (-0.898,-0.0523] 39 (26%)     (-0.0523,0.672] 35 (23%)     (0.672,2.48] 35 (23%)     Manquant 1 Sepal.Width     (-2.43,-0.59] 46 (31%)     (-0.59,-0.132] 36 (24%)     (-0.132,0.557] 30 (20%)     (0.557,3.08] 37 (25%)     Manquant 1 Petal.Length     (-1.56,-1.22] 43 (29%)     (-1.22,0.335] 31 (21%)     (0.335,0.76] 41 (28%)     (0.76,1.78] 34 (23%)     Manquant 1 Petal.Width     (-1.44,-1.18] 36 (25%)     (-1.18,0.132] 37 (26%)     (0.132,0.788] 38 (26%)     (0.788,1.71] 34 (23%)     Manquant 5 Species     setosa 50 (33%)     versicolor 50 (33%)     virginica 50 (33%) 1 n (%) 7.4 Chargement ## spc_tbl_ [200 × 17] (S3: spec_tbl_df/tbl_df/tbl/data.frame) ## $ UID : chr [1:200] &quot;100A&quot; &quot;100B&quot; &quot;101A&quot; &quot;101B&quot; ... ## $ Hopital : chr [1:200] &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;B&quot; ... ## $ sexe : chr [1:200] &quot;Masculin&quot; &quot;Feminin&quot; &quot;Masculin&quot; &quot;Masculin&quot; ... ## $ poids : num [1:200] 45 80 37 28 18 13.7 16 35 40 32 ... ## $ vitaux : num [1:200] 22 8 17 28 6 21 9 10 17 11 ... ## $ CIM2 : num [1:200] 2 2 1 2 3 3 3 1 2 1 ... ## $ age : num [1:200] 13.54 15.72 10.94 11.14 4.05 ... ## $ dureeopmin : num [1:200] 90 125 50 133 250 180 260 15 90 55 ... ## $ postopj : num [1:200] 2.208 1.014 4.667 2.24 0.938 ... ## $ scoliose : chr [1:200] NA NA NA NA ... ## $ drepano : chr [1:200] NA &quot;rien&quot; NA &quot;drepanocytose&quot; ... ## $ ACP : num [1:200] 0 0 0 0 0 0 0 0 0 0 ... ## $ peridurale : num [1:200] 0 0 0 0 0 1 0 0 0 0 ... ## $ periACP : num [1:200] 0 0 0 0 0 2 0 0 0 0 ... ## $ nbttt : num [1:200] 3 4 4 5 3 10 3 2 3 7 ... ## $ totalechelle: num [1:200] 463 503 146 306 40 200 0 110 0 NA ... ## $ nbechelle : num [1:200] 16 17 12 17 6 27 4 7 6 0 ... ## - attr(*, &quot;spec&quot;)= ## .. cols( ## .. UID = col_character(), ## .. Hopital = col_character(), ## .. sexe = col_character(), ## .. poids = col_double(), ## .. vitaux = col_double(), ## .. CIM2 = col_double(), ## .. age = col_double(), ## .. dureeopmin = col_double(), ## .. postopj = col_double(), ## .. scoliose = col_character(), ## .. drepano = col_character(), ## .. ACP = col_double(), ## .. peridurale = col_double(), ## .. periACP = col_double(), ## .. nbttt = col_double(), ## .. totalechelle = col_double(), ## .. nbechelle = col_double() ## .. ) ## - attr(*, &quot;problems&quot;)=&lt;externalptr&gt; Ouch… Remettre en factor, les variables qui doivent l’être. Lequelles ? Scoliose ça sera plus propre avec les différents champs et “non” en l’absence de scoliose… patient$scoliose[is.na(patient$scoliose)] &lt;- &quot;Non&quot; table(patient$scoliose) ## ## ante autre Non post ## 3 2 175 20 Ca serait bien de faire scoliose2 Et pareil avec les drépanocytose donc avec drepano et drepano2: Calculer la variable moyechelle qui fait la moyenne des échelles de douleur : ## Min. 1st Qu. Median Mean 3rd Qu. Max. ## -8.31250 -1.94531 -0.79167 -0.08893 0.46875 40.60417 Juste pour voir case : faire des catégories quand nbttt &lt; 0, entre 0 et 10 et est supérieur à 10 ## ## Entre 0 et -5 Inf à -5 Sup à 0 ## 127 7 66 "],["données-des-lycées-pro..html", "Chapter 8 Données des lycées pro. 8.1 Importation des données 8.2 Analyses 8.3 Quiz.. 8.4 Bénéficiaires 8.5 Par groupe politique 8.6 Exportation 8.7 Les sommes par acteurs 8.8 Quoi faire avec le descriptif ?", " Chapter 8 Données des lycées pro. 8.1 Importation des données On importe les données qui sont contenues dans un fichier Excel. lycee &lt;- read_excel(&quot;data/fr-en-taux-de-pression-et-demploi.xlsx&quot;) str(lycee) ## tibble [185 × 18] (S3: tbl_df/tbl/data.frame) ## $ Année diplôme : num [1:185] 2019 2019 2019 2019 2019 ... ## $ Diplôme : chr [1:185] &quot;BACPRO BOULANGER-PÂTISSIER&quot; &quot;BACPRO ARTISANAT ET METIERS D&#39;ART OPTION : VERRERIE SCIENTIFIQUE ET TECHNIQUE&quot; &quot;BACPRO ARTISANAT ET METIERS D&#39;ART OPTION : METIERS DE L&#39;ENSEIGNE ET DE LA SIGNALETIQUE&quot; &quot;BACPRO TECHNICIEN DE MAINTENANCE DES SYSTEMES ENERGETIQUES ET CLIMATIQUES&quot; ... ## $ Type de diplôme : chr [1:185] &quot;BACPRO&quot; &quot;BACPRO&quot; &quot;BACPRO&quot; &quot;BACPRO&quot; ... ## $ Filière : chr [1:185] &quot;Alimentation, hôtellerie, restauration, tourisme&quot; &quot;Métiers d&#39;art&quot; &quot;Industries graphiques, communication, audiovisuel, spectacle&quot; &quot;Electricité, électronique/numérique, environnement&quot; ... ## $ Spécialité libellé : chr [1:185] &quot;BOULANGER-PÂTISSIER&quot; &quot;ARTISANAT ET METIERS D&#39;ART OPTION : VERRERIE SCIENTIFIQUE ET TECHNIQUE&quot; &quot;ARTISANAT ET METIERS D&#39;ART OPTION : METIERS DE L&#39;ENSEIGNE ET DE LA SIGNALETIQUE&quot; &quot;TECHNICIEN DE MAINTENANCE DES SYSTEMES ENERGETIQUES ET CLIMATIQUES&quot; ... ## $ Taux d&#39;emploi : num [1:185] 50.3 80 34.1 46.1 36.2 34.1 49.2 40 44.7 56.3 ... ## $ Année première année : num [1:185] 2020 2020 2020 2020 2020 2020 2020 2020 2020 2020 ... ## $ MEFSTAT libellé : chr [1:185] &quot;2NDPRO BOULANGER-PÂTISSIER&quot; &quot;2NDPRO ARTIS.&amp; MET.ART:VERR.SCIENT.TECHN&quot; &quot;2NDPRO ARTIS. ET MET. D&#39;ART 2NDE COMMUNE&quot; &quot;2NDPRO TECHN. MAINT. SYST.ENERG.CLIMATIQ&quot; ... ## $ Taux de pression : num [1:185] 2.367 0.5 0.725 0.658 0 ... ## $ Demandes : num [1:185] 284 3 29 634 0 ... ## $ Capacité : num [1:185] 120 6 40 963 3 ... ## $ Code diplôme...12 : chr [1:185] &quot;40022105&quot; &quot;40022402&quot; &quot;40022403&quot; &quot;40022704&quot; ... ## $ MEFSTAT11 : chr [1:185] &quot;23810022105&quot; &quot;23810022402&quot; &quot;23810022404&quot; &quot;23810022704&quot; ... ## $ Code type diplôme : num [1:185] 400 400 400 400 400 400 400 400 400 400 ... ## $ Code diplôme...15 : chr [1:185] &quot;40022105&quot; &quot;40022402&quot; &quot;40022404&quot; &quot;40022704&quot; ... ## $ MEFSTAT libellé court : chr [1:185] &quot;2NDPRO22105&quot; &quot;2NDPRO22402&quot; &quot;2NDPRO22404&quot; &quot;2NDPRO22704&quot; ... ## $ Admis apprentissage 2019: num [1:185] 163 0 9 196 42 29 96 3 69 164 ... ## $ Admis voie scolaire 2019: num [1:185] 1092 11 125 799 220 ... On a 185 lignes et 18 colonnes. A aller vérifier dans le fichier Excel. C’est bon. On a les colonnes Code diplome…12 et Code diplome…15 qui ont eu un problème car elle porte le même nom sous Excel ce qui n’est pas possible dans R. R a donc ajouter le numéro de la colonne lors de l’importation. On vérifie qu’on a bien une seule année de diplôme : table(lycee$`Année diplôme`) ## ## 2019 ## 185 On a vu que dans le tableau Excel, on a autant de valeurs pour le diplôme et le la Spécialité libellé que de lignes… De même pour les colonnes MEFSTAT et Code Diplôme. On voit que la variable première année n’est pas très utile non plus. On regarde de loin comment ça se comporte : theme_gtsummary_compact(set_theme = TRUE, font_size = NULL) lycee %&gt;% select(-`Année diplôme`,-Diplôme,-`Spécialité libellé`, -starts_with(&quot;MEFSTAT&quot;), -starts_with(&quot;Code Diplôme&quot;), -`Année première année` ) %&gt;% tbl_summary() #wvxsztrywb table { font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } #wvxsztrywb thead, #wvxsztrywb tbody, #wvxsztrywb tfoot, #wvxsztrywb tr, #wvxsztrywb td, #wvxsztrywb th { border-style: none; } #wvxsztrywb p { margin: 0; padding: 0; } #wvxsztrywb .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 13px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #wvxsztrywb .gt_caption { padding-top: 4px; padding-bottom: 4px; } #wvxsztrywb .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #wvxsztrywb .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #wvxsztrywb .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #wvxsztrywb .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #wvxsztrywb .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #wvxsztrywb .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #wvxsztrywb .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #wvxsztrywb .gt_column_spanner_outer:first-child { padding-left: 0; } #wvxsztrywb .gt_column_spanner_outer:last-child { padding-right: 0; } #wvxsztrywb .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #wvxsztrywb .gt_spanner_row { border-bottom-style: hidden; } #wvxsztrywb .gt_group_heading { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; } #wvxsztrywb .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #wvxsztrywb .gt_from_md > :first-child { margin-top: 0; } #wvxsztrywb .gt_from_md > :last-child { margin-bottom: 0; } #wvxsztrywb .gt_row { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #wvxsztrywb .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #wvxsztrywb .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #wvxsztrywb .gt_row_group_first td { border-top-width: 2px; } #wvxsztrywb .gt_row_group_first th { border-top-width: 2px; } #wvxsztrywb .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #wvxsztrywb .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #wvxsztrywb .gt_first_summary_row.thick { border-top-width: 2px; } #wvxsztrywb .gt_last_summary_row { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #wvxsztrywb .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #wvxsztrywb .gt_first_grand_summary_row { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #wvxsztrywb .gt_last_grand_summary_row_top { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; } #wvxsztrywb .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #wvxsztrywb .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #wvxsztrywb .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #wvxsztrywb .gt_footnote { margin: 0px; font-size: 90%; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #wvxsztrywb .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #wvxsztrywb .gt_sourcenote { font-size: 90%; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #wvxsztrywb .gt_left { text-align: left; } #wvxsztrywb .gt_center { text-align: center; } #wvxsztrywb .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #wvxsztrywb .gt_font_normal { font-weight: normal; } #wvxsztrywb .gt_font_bold { font-weight: bold; } #wvxsztrywb .gt_font_italic { font-style: italic; } #wvxsztrywb .gt_super { font-size: 65%; } #wvxsztrywb .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; } #wvxsztrywb .gt_asterisk { font-size: 100%; vertical-align: 0; } #wvxsztrywb .gt_indent_1 { text-indent: 5px; } #wvxsztrywb .gt_indent_2 { text-indent: 10px; } #wvxsztrywb .gt_indent_3 { text-indent: 15px; } #wvxsztrywb .gt_indent_4 { text-indent: 20px; } #wvxsztrywb .gt_indent_5 { text-indent: 25px; } Caractéristique N = 1851 Type de diplôme     BACPRO 96 (52%)     CAP 89 (48%) Filière     Aéronautique 6 (3,2%)     Alimentation, hôtellerie, restauration, tourisme 11 (5,9%)     Automobile, engins 17 (9,2%)     Biochimie industrielle 6 (3,2%)     Construction, bâtiment, travaux publics 27 (15%)     Electricité, électronique/numérique, environnement 13 (7,0%)     Gestion-administration, transport, logistique, sécurité 14 (7,6%)     Industries graphiques, communication, audiovisuel, spectacle 15 (8,1%)     Mer 3 (1,6%)     Métiers d'art 19 (10%)     Productique, mécanique, automatisation 17 (9,2%)     Relation client, commerce, vente 3 (1,6%)     Santé, social, services à la personne et à la collectivité 14 (7,6%)     Textile, habillement, cuir 20 (11%) Taux d'emploi 41 (31 – 50) Taux de pression 0,80 (0,53 – 1,17)     Manquant 2 Demandes 174 (27 – 1 123) Capacité 234 (40 – 963) Code type diplôme     400 96 (52%)     500 89 (48%) Admis apprentissage 2019 29 (4 – 164) Admis voie scolaire 2019 220 (28 – 699) 1 n (%); Médiane (EI) reset_gtsummary_theme() On voit que les libellés sont assez variés, un peu trop avec des libellés comme Mer qui n’ont que 3 diplômes comme Relation client, etc.. On regarde les valeurs extrèmes et les quantiles pour les variables quantitatives. theme_gtsummary_compact(set_theme = TRUE, font_size = NULL) lycee %&gt;% select(-`Année diplôme`,-Diplôme,-`Spécialité libellé`, -starts_with(&quot;MEFSTAT&quot;), -starts_with(&quot;Code Diplôme&quot;), -`Année première année` ) %&gt;% select(where(is.numeric)) %&gt;% tbl_summary(statistic = all_continuous() ~ &quot;{mean} ({sd}) {min}-{max}&quot;) #saoogunbpt table { font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } #saoogunbpt thead, #saoogunbpt tbody, #saoogunbpt tfoot, #saoogunbpt tr, #saoogunbpt td, #saoogunbpt th { border-style: none; } #saoogunbpt p { margin: 0; padding: 0; } #saoogunbpt .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 13px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #saoogunbpt .gt_caption { padding-top: 4px; padding-bottom: 4px; } #saoogunbpt .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #saoogunbpt .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #saoogunbpt .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #saoogunbpt .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #saoogunbpt .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #saoogunbpt .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #saoogunbpt .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #saoogunbpt .gt_column_spanner_outer:first-child { padding-left: 0; } #saoogunbpt .gt_column_spanner_outer:last-child { padding-right: 0; } #saoogunbpt .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #saoogunbpt .gt_spanner_row { border-bottom-style: hidden; } #saoogunbpt .gt_group_heading { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; } #saoogunbpt .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #saoogunbpt .gt_from_md > :first-child { margin-top: 0; } #saoogunbpt .gt_from_md > :last-child { margin-bottom: 0; } #saoogunbpt .gt_row { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #saoogunbpt .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #saoogunbpt .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #saoogunbpt .gt_row_group_first td { border-top-width: 2px; } #saoogunbpt .gt_row_group_first th { border-top-width: 2px; } #saoogunbpt .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #saoogunbpt .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #saoogunbpt .gt_first_summary_row.thick { border-top-width: 2px; } #saoogunbpt .gt_last_summary_row { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #saoogunbpt .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #saoogunbpt .gt_first_grand_summary_row { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #saoogunbpt .gt_last_grand_summary_row_top { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; } #saoogunbpt .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #saoogunbpt .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #saoogunbpt .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #saoogunbpt .gt_footnote { margin: 0px; font-size: 90%; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #saoogunbpt .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #saoogunbpt .gt_sourcenote { font-size: 90%; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #saoogunbpt .gt_left { text-align: left; } #saoogunbpt .gt_center { text-align: center; } #saoogunbpt .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #saoogunbpt .gt_font_normal { font-weight: normal; } #saoogunbpt .gt_font_bold { font-weight: bold; } #saoogunbpt .gt_font_italic { font-style: italic; } #saoogunbpt .gt_super { font-size: 65%; } #saoogunbpt .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; } #saoogunbpt .gt_asterisk { font-size: 100%; vertical-align: 0; } #saoogunbpt .gt_indent_1 { text-indent: 5px; } #saoogunbpt .gt_indent_2 { text-indent: 10px; } #saoogunbpt .gt_indent_3 { text-indent: 15px; } #saoogunbpt .gt_indent_4 { text-indent: 20px; } #saoogunbpt .gt_indent_5 { text-indent: 25px; } Characteristic N = 1851 Taux d'emploi 41 (16) 0-82 Taux de pression 0.92 (0.57) 0.00-2.94     Unknown 2 Demandes 1,754 (5,267) 0-36,249 Capacité 1,658 (4,776) 0-31,004 Code type diplôme     400 96 (52%)     500 89 (48%) Admis apprentissage 2019 242 (579) 0-3,893 Admis voie scolaire 2019 952 (2,396) 0-18,297 1 Mean (SD) Minimum-Maximum; n (%) reset_gtsummary_theme() On voit que le code type diplome est reconnu comme numérique alors que c’est un code, donc on corrige : lycee$`Code type diplôme` &lt;- factor(lycee$`Code type diplôme`) Il y a aussi baleineau sous gravillons, il y a des zéros dans les taux et les admis. Donc des spécialités ne doivent pas être assuré cette année là : nuls &lt;- lycee %&gt;% select(-`Année diplôme`,-`Spécialité libellé`, -starts_with(&quot;MEFSTAT&quot;), -starts_with(&quot;Code Diplôme&quot;), -`Année première année`) %&gt;% filter(`Admis apprentissage 2019`==0 | `Admis voie scolaire 2019` == 0) kable(nuls) Diplôme Type de diplôme Filière Taux d’emploi Taux de pression Demandes Capacité Code type diplôme Admis apprentissage 2019 Admis voie scolaire 2019 BACPRO ARTISANAT ET METIERS D’ART OPTION : VERRERIE SCIENTIFIQUE ET TECHNIQUE BACPRO Métiers d’art 80.0 0.5000000 3 6 400 0 11 CAP DOREUR A LA FEUILLE ORNEMANISTE CAP Métiers d’art 57.1 0.0000000 0 1 500 6 0 CAP OUTILLAGES EN OUTILS A DECOUPER ET A EMBOUTIR CAP Productique, mécanique, automatisation 0.0 0.3750000 9 24 500 0 11 BACPRO ETUDE ET REALISATION D’AGENCEMENT BACPRO Construction, bâtiment, travaux publics 28.3 1.2448980 549 441 400 0 303 BACPRO METIERS DU PRESSING ET DE LA BLANCHISSERIE BACPRO Textile, habillement, cuir 29.4 0.0444444 2 45 400 0 13 BACPRO METIERS DU CUIR OPTION CHAUSSURES BACPRO Textile, habillement, cuir 28.6 0.5869565 162 276 400 0 11 BACPRO ARTISANAT ET METIERS D’ART OPTION : VERRERIE SCIENTIFIQUE ET TECHNIQUE BACPRO Métiers d’art 80.0 0.7250000 29 40 400 0 11 BACPRO TECHNICIEN EN APPAREILLAGE ORTHOPEDIQUE BACPRO Santé, social, services à la personne et à la collectivité 34.5 0.8771930 50 57 400 0 49 CAP PLASTURGIE CAP Biochimie industrielle 42.9 0.1481481 4 27 500 0 14 CAP CANNAGE ET PAILLAGE EN AMEUBLEMENT CAP Métiers d’art 0.0 0.1250000 1 8 500 0 1 CAP VETEMENT DE PEAU CAP Textile, habillement, cuir 60.0 0.5000000 3 6 500 0 13 CAP ORTHO-PROTHESISTE CAP Santé, social, services à la personne et à la collectivité 30.8 0.5384615 21 39 500 0 17 BACPRO ARTISANAT ET METIERS D’ART OPTION : TAPISSIER D’AMEUBLEMENT BACPRO Textile, habillement, cuir 31.8 0.5092251 138 271 400 0 174 BACPRO ACCOMPAGNEMENT SOINS ET SERVICES A LA PERSONNE OPTION A - A DOMICILE BACPRO Santé, social, services à la personne et à la collectivité 31.1 0.6772334 235 347 400 0 2557 CAP BOUCHER CAP Alimentation, hôtellerie, restauration, tourisme 59.4 0.3300000 33 100 500 2134 0 CAP ARTS DU BOIS OPTION A : SCULPTEUR ORNEMANISTE CAP Métiers d’art 36.2 0.6538462 34 52 500 0 81 CAP CHARPENTIER DE MARINE CAP Mer 42.9 0.4000000 12 30 500 0 23 CAP METIERS DE LA GRAVURE OPTION C : GRAVURE EN MODELE CAP Industries graphiques, communication, audiovisuel, spectacle 25.0 0.2000000 1 5 500 0 5 CAP ACCORDEUR DE PIANO CAP Industries graphiques, communication, audiovisuel, spectacle 0.0 0.1250000 1 8 500 0 5 CAP AGENT DE PREVENTION ET DE MEDIATION CAP Santé, social, services à la personne et à la collectivité 13.3 1.0000000 26 26 500 0 2305 CAP AGENT DE LA QUALITE DE L’EAU CAP Electricité, électronique/numérique, environnement 12.5 0.7966102 47 59 500 0 35 BACPRO ETUDE ET DEFINITION DE PRODUITS INDUSTRIELS BACPRO Productique, mécanique, automatisation 25.8 0.5706751 541 948 400 0 523 BACPRO ARTISANAT ET METIERS D’ART OPTION MARCHANDISAGE VISUEL BACPRO Industries graphiques, communication, audiovisuel, spectacle 22.8 1.0000000 367 367 400 0 308 BACPRO TECHNICIEN MODELEUR BACPRO Productique, mécanique, automatisation 40.5 0.4274809 56 131 400 0 74 BACPRO ACCOMPAGNEMENT SOINS ET SERVICES A LA PERSONNE OPTION A - A DOMICILE BACPRO Santé, social, services à la personne et à la collectivité 31.1 1.2174028 13865 11389 400 0 2557 CAP INDUSTRIES CHIMIQUES CAP Biochimie industrielle 0.0 0.5555556 5 9 500 0 7 CAP ACCESSOIRISTE REALISATEUR CAP Industries graphiques, communication, audiovisuel, spectacle 30.4 1.5000000 9 6 500 0 22 On n’en a 27 qui apparemment ont un nombre admis nul soit dans l’apprentissage soit dans la voie scolaire. nuls &lt;- lycee %&gt;% select(-`Année diplôme`,-`Spécialité libellé`, -starts_with(&quot;MEFSTAT&quot;), -starts_with(&quot;Code Diplôme&quot;), -`Année première année`) %&gt;% filter(`Admis apprentissage 2019`==0 &amp; `Admis voie scolaire 2019` == 0) nrow(nuls) ## [1] 0 Et apparemment aucun n’a de nul en même temps. On vérifie de ce qu’ils ont fait quand Capacités est nulle (division par zéro). nuls &lt;- lycee %&gt;% select(-`Année diplôme`,-`Spécialité libellé`, -starts_with(&quot;MEFSTAT&quot;), -starts_with(&quot;Code Diplôme&quot;), -`Année première année`) %&gt;% filter(`Capacité`==0) kable(nuls) Diplôme Type de diplôme Filière Taux d’emploi Taux de pression Demandes Capacité Code type diplôme Admis apprentissage 2019 Admis voie scolaire 2019 BACPRO AMENAGEMENT ET FINITIONS DU BATIMENT BACPRO Construction, bâtiment, travaux publics 34.1 NA 0 0 400 29 640 CAP ASSISTANT TECHNIQUE EN INSTRUMENTS DE MUSIQUE OPTION GUITARE CAP Industries graphiques, communication, audiovisuel, spectacle 0.0 NA 0 0 500 6 12 En fait ils ont pas fait n’importe quoi, le taux de pression est NA. Par contre au fil de la vérification, on a vu qu’il y avait des taux d’emploi nuls: nuls &lt;- lycee %&gt;% select(-`Année diplôme`,-`Spécialité libellé`, -starts_with(&quot;MEFSTAT&quot;), -starts_with(&quot;Code Diplôme&quot;), -`Année première année`) %&gt;% filter(`Taux d&#39;emploi`==0) kable(nuls) Diplôme Type de diplôme Filière Taux d’emploi Taux de pression Demandes Capacité Code type diplôme Admis apprentissage 2019 Admis voie scolaire 2019 CAP OUTILLAGES EN OUTILS A DECOUPER ET A EMBOUTIR CAP Productique, mécanique, automatisation 0 0.3750000 9 24 500 0 11 CAP ASSISTANT TECHNIQUE EN INSTRUMENTS DE MUSIQUE OPTION GUITARE CAP Industries graphiques, communication, audiovisuel, spectacle 0 NA 0 0 500 6 12 CAP CANNAGE ET PAILLAGE EN AMEUBLEMENT CAP Métiers d’art 0 0.1250000 1 8 500 0 1 CAP ACCORDEUR DE PIANO CAP Industries graphiques, communication, audiovisuel, spectacle 0 0.1250000 1 8 500 0 5 BACPRO INTERVENTIONS SUR LE PATRIMOINE BATI, OPTION B CHARPENTE BACPRO Construction, bâtiment, travaux publics 0 0.7046706 3455 4903 400 1 8 CAP INDUSTRIES CHIMIQUES CAP Biochimie industrielle 0 0.5555556 5 9 500 0 7 Ils sont au nombre de 10 quand même. 8.2 Analyses On représente le taux de pression graphiquement : Demandes en fonction de Capacité ggplot(lycee,aes(Demandes,Capacité,col=`Type de diplôme`))+geom_point() + ggtitle(&quot;Pression&quot;)+ geom_smooth(method=&quot;lm&quot;) On voit que ça a l’air assez linéaire. Et on voit surtout que certains diplômes explose les chiffres en terme de demande. On voit demander à ggplot de passer en log pour mieux faire la différence. ggplot(lycee,aes(Demandes,Capacité,col=`Type de diplôme`))+geom_point() + ggtitle(&quot;Pression&quot;)+ geom_smooth(method=&quot;lm&quot;)+ scale_x_continuous(trans = &#39;log2&#39;) + scale_y_continuous(trans = &#39;log2&#39;) En fait on voit que c’est vers zéro qu’il y a un problème. Ca peut être du au log2. Mais globalement il n’y a pas d’anomalies à l’oeil. Et c’est bien logarithmiquement linéaire. Il y a une différence avec plus de capacités pour les BAC PRO pour les fortes demandes que pour les CAPs où c’est l’inverse. On regarde le TOP10 des formations en terme de candidats ? kable(lycee %&gt;% select(-`Année diplôme`,-`Spécialité libellé`, -starts_with(&quot;MEFSTAT&quot;), -starts_with(&quot;Code Diplôme&quot;), -`Année première année`) %&gt;% arrange(desc(Demandes)) %&gt;% slice(1:10)) Diplôme Type de diplôme Filière Taux d’emploi Taux de pression Demandes Capacité Code type diplôme Admis apprentissage 2019 Admis voie scolaire 2019 BACPRO VENTE BACPRO Relation client, commerce, vente 40.9 1.1691717 36249 31004 400 30 5433 BACPRO ACCUEIL - RELATION CLIENTS ET USAGERS BACPRO Relation client, commerce, vente 32.8 1.1691717 36249 31004 400 407 5830 BACPRO COMMERCE BACPRO Relation client, commerce, vente 41.8 1.1691717 36249 31004 400 2349 17570 BACPRO GESTION-ADMINISTRATION BACPRO Gestion-administration, transport, logistique, sécurité 31.6 0.9008569 17346 19255 400 653 18297 BACPRO LOGISTIQUE BACPRO Gestion-administration, transport, logistique, sécurité 42.4 0.9008569 17346 19255 400 474 1749 BACPRO TRANSPORT BACPRO Gestion-administration, transport, logistique, sécurité 38.7 0.9008569 17346 19255 400 8 675 BACPRO ACCOMPAGNEMENT SOINS ET SERVICES A LA PERSONNE OPTION A - A DOMICILE BACPRO Santé, social, services à la personne et à la collectivité 31.1 1.2174028 13865 11389 400 0 2557 BACPRO METIERS DE L’ELECTRICITE ET DE SES ENVIRONNEMENTS CONNECTES BACPRO Electricité, électronique/numérique, environnement 40.5 0.8501144 11145 13110 400 1365 9960 BACPRO SYSTEMES NUMERIQUES OPTION A SURETE ET SECURITE DES INFRASTRUCTURES, DE L’HABITAT ET DU TERTIAIRE BACPRO Electricité, électronique/numérique, environnement 34.1 1.5346383 10035 6539 400 3 988 BACPRO SYSTEMES NUMERIQUES OPTION C RESEAUX INFORMATIQUES ET SYSTEMES COMMUNICANTS BACPRO Electricité, électronique/numérique, environnement 30.9 1.5346383 10035 6539 400 138 3878 On regarde maintenant le taux d’emploi au regard du taux de pression : ggplot(lycee,aes(`Taux de pression`,`Taux d&#39;emploi`))+ geom_point() + geom_smooth(method=&quot;lm&quot;) + facet_grid(`Type de diplôme` ~ .) Ouf… on s’y attendait pas. ggplot(lycee,aes(`Taux de pression`,`Taux d&#39;emploi`))+ geom_point() + geom_smooth() + facet_grid(`Type de diplôme` ~ .) Apparemment il n’y a pas corrélation claire entre le taux de pression et le taux d’emploi. On a des points extrêmes, on va ajouter les étiquettes. ggplot(lycee,aes(`Taux de pression`,`Taux d&#39;emploi`,label=Diplôme))+ geom_point() + geom_smooth() + facet_grid(`Type de diplôme` ~ .) + geom_text_repel() Y’a comme un souci… ggplot(lycee,aes(`Taux de pression`,`Taux d&#39;emploi`,label=`Code diplôme...12`))+ geom_point() + geom_smooth() + facet_grid(`Type de diplôme` ~ .) + geom_text_repel() Par exemple : kable(lycee %&gt;% select(-`Année diplôme`,-`Spécialité libellé`, -starts_with(&quot;MEFSTAT&quot;), -starts_with(&quot;Code Diplôme...15&quot;), -`Année première année`) %&gt;% filter(`Code diplôme...12` %in% c(40022402,40023206,40031109,50022362))) Diplôme Type de diplôme Filière Taux d’emploi Taux de pression Demandes Capacité Code diplôme…12 Code type diplôme Admis apprentissage 2019 Admis voie scolaire 2019 BACPRO ARTISANAT ET METIERS D’ART OPTION : VERRERIE SCIENTIFIQUE ET TECHNIQUE BACPRO Métiers d’art 80.0 0.5000000 3 6 40022402 400 0 11 CAP ART ET TECHNIQUES DE LA BIJOUTERIE-JOAILLERIE OPTION BIJOUTERIE-SERTISSAGE CAP Métiers d’art 70.6 1.0740741 29 27 50022362 500 26 47 BACPRO ARTISANAT ET METIERS D’ART OPTION : VERRERIE SCIENTIFIQUE ET TECHNIQUE BACPRO Métiers d’art 80.0 0.7250000 29 40 40022402 400 0 11 BACPRO TRANSPORT FLUVIAL BACPRO Gestion-administration, transport, logistique, sécurité 70.3 0.5312500 17 32 40031109 400 16 23 BACPRO INTERVENTIONS SUR LE PATRIMOINE BATI, OPTION B CHARPENTE BACPRO Construction, bâtiment, travaux publics 0.0 0.7046706 3455 4903 40023206 400 1 8 Apparemment les charpentiers ne peuvent pas travailler beaucoup. En fait, on regarde plus systématiquement : TOP 10 des taux d’emploi : kable(lycee %&gt;% group_by(`Type de diplôme`) %&gt;% select(-`Année diplôme`,-`Spécialité libellé`, -starts_with(&quot;MEFSTAT&quot;), -starts_with(&quot;Code Diplôme&quot;), -`Année première année`) %&gt;% slice_max(`Taux d&#39;emploi`,n=10)) Diplôme Type de diplôme Filière Taux d’emploi Taux de pression Demandes Capacité Code type diplôme Admis apprentissage 2019 Admis voie scolaire 2019 BACPRO ARTISANAT ET METIERS D’ART OPTION : VERRERIE SCIENTIFIQUE ET TECHNIQUE BACPRO Métiers d’art 80.0 0.5000000 3 6 400 0 11 BACPRO ARTISANAT ET METIERS D’ART OPTION : VERRERIE SCIENTIFIQUE ET TECHNIQUE BACPRO Métiers d’art 80.0 0.7250000 29 40 400 0 11 BACPRO TRANSPORT FLUVIAL BACPRO Gestion-administration, transport, logistique, sécurité 70.3 0.5312500 17 32 400 16 23 BACPRO FONDERIE BACPRO Productique, mécanique, automatisation 69.4 0.4395604 40 91 400 6 32 BACPRO CONDUCTEUR TRANSPORT ROUTIER MARCHANDISES BACPRO Gestion-administration, transport, logistique, sécurité 68.6 1.6021362 2400 1498 400 5 1116 BACPRO MAINTENANCE DES MATERIELS OPTION A MATERIELS AGRICOLES BACPRO Automobile, engins 65.6 1.3103448 114 87 400 281 501 BACPRO METIERS ET ARTS DE LA PIERRE BACPRO Métiers d’art 65.0 0.4712644 41 87 400 7 35 BACPRO MAINTENANCE DES MATERIELS OPTION B MATERIELS DE CONSTRUCTION ET DE MANUTENTION BACPRO Automobile, engins 65.0 0.5352113 38 71 400 137 375 BACPRO CONSTRUCTION DES CARROSSERIES BACPRO Automobile, engins 60.0 0.5508475 65 118 400 23 58 BACPRO MAINTENANCE DES VEHICULES OPTION B VEHICULES DE TRANSPORT ROUTIER BACPRO Automobile, engins 59.0 0.6148410 174 283 400 356 440 CAP PODO-ORTHESISTE CAP Santé, social, services à la personne et à la collectivité 81.8 0.1666667 2 12 500 9 5 CAP CONDUCTEUR ROUTIER “MARCHANDISES” CAP Gestion-administration, transport, logistique, sécurité 71.6 2.1282051 249 117 500 959 464 CAP ART ET TECHNIQUES DE LA BIJOUTERIE-JOAILLERIE OPTION BIJOUTERIE-SERTISSAGE CAP Métiers d’art 70.6 1.0740741 29 27 500 26 47 CAP CHOCOLATIER CONFISEUR CAP Alimentation, hôtellerie, restauration, tourisme 67.0 0.6046512 26 43 500 611 86 CAP CONDUCTEUR D’ENGINS : TRAVAUX PUBLICS ET CARRIERES CAP Construction, bâtiment, travaux publics 66.7 2.2166065 614 277 500 468 385 CAP MODELES ET MOULES CERAMIQUES CAP Métiers d’art 66.7 0.5000000 9 18 500 1 5 CAP CONSTRUCTEUR DE ROUTES CAP Construction, bâtiment, travaux publics 65.9 0.7804878 64 82 500 257 25 CAP TAILLEUR DE PIERRE CAP Métiers d’art 65.2 0.3939394 52 132 500 66 52 CAP COUVREUR CAP Construction, bâtiment, travaux publics 64.6 0.5316456 126 237 500 966 108 CAP ARTS ET TECHNIQUES DU VERRE OPTION DECORATEUR CAP Métiers d’art 63.6 0.4166667 15 36 500 4 26 et l’inverse kable(lycee %&gt;% group_by(`Type de diplôme`) %&gt;% select(-`Année diplôme`,-`Spécialité libellé`, -starts_with(&quot;MEFSTAT&quot;), -starts_with(&quot;Code Diplôme&quot;), -`Année première année`) %&gt;% slice_min(`Taux d&#39;emploi`,n=10)) Diplôme Type de diplôme Filière Taux d’emploi Taux de pression Demandes Capacité Code type diplôme Admis apprentissage 2019 Admis voie scolaire 2019 BACPRO INTERVENTIONS SUR LE PATRIMOINE BATI, OPTION B CHARPENTE BACPRO Construction, bâtiment, travaux publics 0.0 0.7046706 3455 4903 400 1 8 BACPRO GESTION DES POLLUTIONS ET PROTECTION DE L’ENVIRONNEMENT BACPRO Electricité, électronique/numérique, environnement 13.5 0.3975904 33 83 400 6 55 BACPRO AVIATION GENERALE BACPRO Aéronautique 18.8 2.0467153 1402 685 400 4 20 BACPRO PHOTOGRAPHIE BACPRO Industries graphiques, communication, audiovisuel, spectacle 21.8 2.1865672 586 268 400 7 300 BACPRO ARTISANAT ET METIERS D’ART OPTION : COMMUNICATION VISUELLE PLURI-MEDIA BACPRO Industries graphiques, communication, audiovisuel, spectacle 22.3 2.7258523 1919 704 400 33 1322 BACPRO ARTISANAT ET METIERS D’ART OPTION MARCHANDISAGE VISUEL BACPRO Industries graphiques, communication, audiovisuel, spectacle 22.8 1.0000000 367 367 400 0 308 BACPRO REALISATION DE PRODUITS IMPRIMES ET PLURIMEDIA OPTION A PRODUCTIONS GRAPHIQUES BACPRO Industries graphiques, communication, audiovisuel, spectacle 23.9 0.9823651 947 964 400 54 514 BACPRO ETUDE ET DEFINITION DE PRODUITS INDUSTRIELS BACPRO Productique, mécanique, automatisation 25.8 0.5706751 541 948 400 0 523 BACPRO SERVICES DE PROXIMITE ET VIE LOCALE BACPRO Santé, social, services à la personne et à la collectivité 27.5 1.2163683 2378 1955 400 5 2187 BACPRO ETUDE ET REALISATION D’AGENCEMENT BACPRO Construction, bâtiment, travaux publics 28.3 1.2448980 549 441 400 0 303 CAP OUTILLAGES EN OUTILS A DECOUPER ET A EMBOUTIR CAP Productique, mécanique, automatisation 0.0 0.3750000 9 24 500 0 11 CAP ASSISTANT TECHNIQUE EN INSTRUMENTS DE MUSIQUE OPTION GUITARE CAP Industries graphiques, communication, audiovisuel, spectacle 0.0 NA 0 0 500 6 12 CAP CANNAGE ET PAILLAGE EN AMEUBLEMENT CAP Métiers d’art 0.0 0.1250000 1 8 500 0 1 CAP ACCORDEUR DE PIANO CAP Industries graphiques, communication, audiovisuel, spectacle 0.0 0.1250000 1 8 500 0 5 CAP INDUSTRIES CHIMIQUES CAP Biochimie industrielle 0.0 0.5555556 5 9 500 0 7 CAP AGENT DE LA QUALITE DE L’EAU CAP Electricité, électronique/numérique, environnement 12.5 0.7966102 47 59 500 0 35 CAP AGENT DE PREVENTION ET DE MEDIATION CAP Santé, social, services à la personne et à la collectivité 13.3 1.0000000 26 26 500 0 2305 CAP TOURNAGE EN CERAMIQUE CAP Métiers d’art 14.3 0.4166667 10 24 500 3 19 CAP ASSISTANT(E) TECHNIQUE EN MILIEUX FAMILIAL ET COLLECTIF CAP Santé, social, services à la personne et à la collectivité 15.8 0.8788660 2728 3104 500 43 2810 CAP METIERS DE LA MODE-VÊTEMENT FLOU CAP Textile, habillement, cuir 18.8 0.8470705 853 1007 500 26 699 Est-ce qu’il y a un lien entre l’effectif et le taux d’emploi ? ggplot(lycee,aes(`Taux de pression`,`Demandes`))+ geom_point() + geom_smooth() + facet_grid(`Type de diplôme` ~ .) Il faut qu’on retourne aux log2. ggplot(lycee,aes(`Taux de pression`,`Demandes`))+ geom_point() + geom_smooth() + facet_grid(`Type de diplôme` ~ .) + scale_y_continuous(trans=&quot;log2&quot;) Apparemment oui mais ce n’est pas linéaire. Pour faire un graphique avec le taux moyen d’emploi selon la filière ? graphique &lt;- lycee %&gt;% group_by(Filière) %&gt;% summarise(Moyenne=mean(`Taux d&#39;emploi`)) ggplot(graphique,aes(Filière,Moyenne,fill=Filière)) + geom_bar(color=&quot;black&quot;,stat=&quot;identity&quot;) on enlève l’axe des abscisses… graphique &lt;- lycee %&gt;% group_by(Filière) %&gt;% summarise(Moyenne=mean(`Taux d&#39;emploi`)) ggplot(graphique,aes(Filière,Moyenne,fill=Filière)) + geom_bar(color=&quot;black&quot;,stat=&quot;identity&quot;) + theme(axis.title.x=element_blank(), axis.text.x=element_blank(), axis.ticks.x=element_blank()) 8.3 Quiz.. Faire les TOP10 et l’inverse pour les Taux de pression Faire le graphique du taux moyen selon la Filières du Taux de pression Dans cette partie, on étudie l’utilisation de la réserve parlementaire par les députés. Ce sont les données de 2014 Les questions sont celles d’une personne naïve et sans a priori : Est-ce que les groupes ont dépensé chacun autant ? Est-ce que les groupes ont dépensé chacun autant en moyenne ? Est-ce vrai pour les députés en moyenne ? Quel est l’enveloppe dépensé au total ? Est-ce possible avec le descriptif d’avoir les mots-clefs pour les sous dépensés ? reserve &lt;- fromJSON(&quot;data/reserve/2014_reserve_parlementaire.json&quot;) Pourquoi c’est compliqué de faire un gtsummary direct ? En fait on va se demander si il y a un bénéficiaire qui apparait plusieurs fois. 8.4 Bénéficiaires tb &lt;- table(reserve$Bénéficiaire) tb1 &lt;- tb[tb&gt;1] names(tb1) ## [1] &quot;35 Lez&#39;arts dans l&#39;école&quot; ## [2] &quot;7B15&quot; ## [3] &quot;ADMR&quot; ## [4] &quot;AIDES&quot; ## [5] &quot;Albert&quot; ## [6] &quot;AMOPA&quot; ## [7] &quot;ANDELARRE&quot; ## [8] &quot;ANSORAA&quot; ## [9] &quot;APAJH&quot; ## [10] &quot;APF&quot; ## [11] &quot;ASPTT&quot; ## [12] &quot;Assas&quot; ## [13] &quot;Association Ah?&quot; ## [14] &quot;Association des Paralysés de France&quot; ## [15] &quot;Association La Cimade&quot; ## [16] &quot;Association Le Refuge&quot; ## [17] &quot;ATTIGNY&quot; ## [18] &quot;Autisme Picardie 80&quot; ## [19] &quot;Baby Loup&quot; ## [20] &quot;Baby-Loup&quot; ## [21] &quot;Badminton Club&quot; ## [22] &quot;Balard Bouge&quot; ## [23] &quot;Banque alimentaire&quot; ## [24] &quot;Banque Alimentaire&quot; ## [25] &quot;Banque Alimentaire de l&#39;Isère&quot; ## [26] &quot;Banque alimentaire de la Loire&quot; ## [27] &quot;Basket Club&quot; ## [28] &quot;BEUGNEUX&quot; ## [29] &quot;Bibliothèque pour tous&quot; ## [30] &quot;BLEIGNY-LE-CARREAU&quot; ## [31] &quot;BRIGNOLES&quot; ## [32] &quot;CANNES&quot; ## [33] &quot;Carpe Diem&quot; ## [34] &quot;CASAS&quot; ## [35] &quot;CDHA&quot; ## [36] &quot;Centre d&#39;Information sur les Droits des Femmes et des Familles&quot; ## [37] &quot;CERNAY&quot; ## [38] &quot;Chambly&quot; ## [39] &quot;Chanteloup-les-Vignes&quot; ## [40] &quot;Chaux&quot; ## [41] &quot;Chorale Sainte-Cécile&quot; ## [42] &quot;CIDFF&quot; ## [43] &quot;Cimade&quot; ## [44] &quot;CIMADE&quot; ## [45] &quot;CLCV&quot; ## [46] &quot;Cloyes sur le Loir&quot; ## [47] &quot;Club d&#39;Automne&quot; ## [48] &quot;Club de l&#39;Amitié&quot; ## [49] &quot;Club de Rugby&quot; ## [50] &quot;Club de Tennis&quot; ## [51] &quot;CNIID&quot; ## [52] &quot;Comité Bataillon Rémy&quot; ## [53] &quot;Comité d&#39;entente des associations patriotiques de la région de Saint-Lô&quot; ## [54] &quot;Comité de jumelage&quot; ## [55] &quot;Comité de Jumelage&quot; ## [56] &quot;Comité des fêtes&quot; ## [57] &quot;Comité des Fêtes&quot; ## [58] &quot;Communauté de Communes du Pays d&#39;Ornans&quot; ## [59] &quot;Commune Blaringhem&quot; ## [60] &quot;Commune d&#39;Auneuil&quot; ## [61] &quot;Commune de Boisemont&quot; ## [62] &quot;Commune de Bondy&quot; ## [63] &quot;Commune de Chalandray&quot; ## [64] &quot;Commune de Chelles&quot; ## [65] &quot;Commune de Crest&quot; ## [66] &quot;Commune de Gonnehem&quot; ## [67] &quot;Commune de Grandvilliers&quot; ## [68] &quot;Commune de Grenoble&quot; ## [69] &quot;Commune de Grosseto-Prugna&quot; ## [70] &quot;Commune de LA TABLE&quot; ## [71] &quot;Commune de Ligugé&quot; ## [72] &quot;Commune de Pantin&quot; ## [73] &quot;Commune de Reims&quot; ## [74] &quot;COMMUNE DE SAINT PAIR&quot; ## [75] &quot;COMMUNE DE SAINT PIERRE DU JONQUET&quot; ## [76] &quot;Commune de St Pierre de Manneville&quot; ## [77] &quot;Commune de Venon&quot; ## [78] &quot;Commune de Villemeux sur Eure&quot; ## [79] &quot;Commune du Perreux-sur-Marne&quot; ## [80] &quot;Commune Hazebrouck&quot; ## [81] &quot;Commune Merville&quot; ## [82] &quot;Commune Nepvant&quot; ## [83] &quot;Commune Sercus&quot; ## [84] &quot;Confluences&quot; ## [85] &quot;Consulat de France à Londres&quot; ## [86] &quot;Côté Cour&quot; ## [87] &quot;COUDES&quot; ## [88] &quot;Coup de Pouce&quot; ## [89] &quot;Crespin&quot; ## [90] &quot;Croix Rouge&quot; ## [91] &quot;Croix Rouge Française&quot; ## [92] &quot;CSV Rugby&quot; ## [93] &quot;Culture et Loisirs&quot; ## [94] &quot;DAGNY&quot; ## [95] &quot;DAMPIERRE-SUR-SALON&quot; ## [96] &quot;District de l&#39;Isère de Football&quot; ## [97] &quot;Diverses communes&quot; ## [98] &quot;Don Bosco&quot; ## [99] &quot;Ecole de musique&quot; ## [100] &quot;Ecole de Musique&quot; ## [101] &quot;Emergence&quot; ## [102] &quot;Emmaüs&quot; ## [103] &quot;Ener&#39;gym&quot; ## [104] &quot;Energie Citoyenne&quot; ## [105] &quot;Epaignes&quot; ## [106] &quot;Equeurdreville&quot; ## [107] &quot;Espace commercial Monplaisir&quot; ## [108] &quot;ESSISES&quot; ## [109] &quot;Etrun&quot; ## [110] &quot;FACE GARD&quot; ## [111] &quot;Fairplaylist&quot; ## [112] &quot;Familles rurales&quot; ## [113] &quot;FDSEA 25&quot; ## [114] &quot;Fédération départementale des Foyers Ruraux des Deux-Sèvres&quot; ## [115] &quot;Femmes d&#39;histoire&quot; ## [116] &quot;FLEURY-LA-RIVIERE&quot; ## [117] &quot;FMES&quot; ## [118] &quot;FNACA&quot; ## [119] &quot;FNATH&quot; ## [120] &quot;Fondation Concorde&quot; ## [121] &quot;Fondation Jean Jaurès&quot; ## [122] &quot;FONDATION NICOLAS HULOT&quot; ## [123] &quot;Fondation pour l&#39;écologie politique&quot; ## [124] &quot;Foyer rural&quot; ## [125] &quot;France Alzheimer Var&quot; ## [126] &quot;FRANCHEVAL&quot; ## [127] &quot;FRCIVAM LR&quot; ## [128] &quot;FRESNE-LES-REIMS&quot; ## [129] &quot;FROMONT&quot; ## [130] &quot;GERBEROY&quot; ## [131] &quot;GOUPILLIERES&quot; ## [132] &quot;Groupement Sportif Figeacois&quot; ## [133] &quot;Gym Paris 15&quot; ## [134] &quot;Gymnastique volontaire&quot; ## [135] &quot;Hand Ball Club&quot; ## [136] &quot;Handi Racing Club&quot; ## [137] &quot;Herbault&quot; ## [138] &quot;IPPO&quot; ## [139] &quot;Issy les Moulineaux&quot; ## [140] &quot;Jeunes talents&quot; ## [141] &quot;Kick Boxing&quot; ## [142] &quot;L&#39;AIGLE&quot; ## [143] &quot;L&#39;Escale&quot; ## [144] &quot;L&#39;ISLE-ADAM&quot; ## [145] &quot;La Cimade&quot; ## [146] &quot;LA FERTE-IMBAULT&quot; ## [147] &quot;La Marelle&quot; ## [148] &quot;La Seyne Var Handball&quot; ## [149] &quot;LA VACHERESSE-ET-LA ROUILLIE&quot; ## [150] &quot;LABRUYERE&quot; ## [151] &quot;LE BEULAY&quot; ## [152] &quot;LE HOMMET-D&#39;ARTHENAY&quot; ## [153] &quot;Le mille pattes&quot; ## [154] &quot;Le Moulin à Café&quot; ## [155] &quot;Le Pallium&quot; ## [156] &quot;Le refuge&quot; ## [157] &quot;Le Refuge&quot; ## [158] &quot;Le Souvenir Français&quot; ## [159] &quot;Les Fleurs de la Mémoire&quot; ## [160] &quot;LES MOERES&quot; ## [161] &quot;Les Restaurants du Coeur&quot; ## [162] &quot;Les Restaurants du Cœur&quot; ## [163] &quot;LES RICEYS&quot; ## [164] &quot;Ligue des Droits de l&#39;Homme&quot; ## [165] &quot;Lille&quot; ## [166] &quot;Lisle&quot; ## [167] &quot;LONGWY&quot; ## [168] &quot;LOUVECIENNES&quot; ## [169] &quot;Mairie d&#39;Angliers&quot; ## [170] &quot;Mairie d&#39;Auriol&quot; ## [171] &quot;Mairie de Bègles&quot; ## [172] &quot;Mairie de Maisoncelles-sur-Ajon&quot; ## [173] &quot;Mairie de Ploermel&quot; ## [174] &quot;Maison d&#39;Izieu&quot; ## [175] &quot;Maison de l&#39;Europe&quot; ## [176] &quot;Maison de la Francophonie&quot; ## [177] &quot;Maison des Femmes&quot; ## [178] &quot;Maison des Lycéens&quot; ## [179] &quot;Maizières-la-Grande-Paroisse&quot; ## [180] &quot;Marins du Monde&quot; ## [181] &quot;MARSEILLE&quot; ## [182] &quot;Médecins du monde&quot; ## [183] &quot;Mémorial AFN 92&quot; ## [184] &quot;MESNIL-THOMAS&quot; ## [185] &quot;Mieux vivre au Noyer renard&quot; ## [186] &quot;MILLAS&quot; ## [187] &quot;Miré&quot; ## [188] &quot;MJC&quot; ## [189] &quot;Mobil&#39;Douche&quot; ## [190] &quot;MODENE&quot; ## [191] &quot;MONTMACHOUX&quot; ## [192] &quot;MUADIR&quot; ## [193] &quot;Musique Municipale&quot; ## [194] &quot;Nice Judo&quot; ## [195] &quot;Noratlas de Provence&quot; ## [196] &quot;Office Central de Coopération à l&#39;Ecole - Section Hautes-Alpes&quot; ## [197] &quot;OIP&quot; ## [198] &quot;OMC&quot; ## [199] &quot;OMS&quot; ## [200] &quot;PAVANT&quot; ## [201] &quot;Pfastatt&quot; ## [202] &quot;Planning Familial&quot; ## [203] &quot;PROVINS&quot; ## [204] &quot;Pugilist Club Niçois&quot; ## [205] &quot;Recidev&quot; ## [206] &quot;REMILLY&quot; ## [207] &quot;Reporters sans frontières&quot; ## [208] &quot;Réserve naturelle&quot; ## [209] &quot;Restaurants du cœur&quot; ## [210] &quot;Restaurants du Cœur&quot; ## [211] &quot;Resto du Cœur&quot; ## [212] &quot;Restos du Coeur&quot; ## [213] &quot;Restos du cœur&quot; ## [214] &quot;Restos du Cœur&quot; ## [215] &quot;RETONFEY&quot; ## [216] &quot;Rêves&quot; ## [217] &quot;Rugby Club&quot; ## [218] &quot;Rumegies&quot; ## [219] &quot;Saint Germain sur Avre&quot; ## [220] &quot;SAINT REMY&quot; ## [221] &quot;Saint-Barthélemy d’Anjou&quot; ## [222] &quot;SAINT-DENIS-DES-PUITS&quot; ## [223] &quot;SAINT-FELIX&quot; ## [224] &quot;Saint-Joseph&quot; ## [225] &quot;SAINTE-MARGUERITE&quot; ## [226] &quot;SARTES&quot; ## [227] &quot;Scènes et Marne 1914&quot; ## [228] &quot;Scouts et guides de France&quot; ## [229] &quot;Scouts et Guides de France&quot; ## [230] &quot;Secours catholique&quot; ## [231] &quot;Secours Catholique&quot; ## [232] &quot;Secours populaire&quot; ## [233] &quot;Secours Populaire&quot; ## [234] &quot;SECOURS POPULAIRE&quot; ## [235] &quot;Secours populaire Français&quot; ## [236] &quot;Secours Populaire Français&quot; ## [237] &quot;Skoazell Diwan Paris&quot; ## [238] &quot;SNL&quot; ## [239] &quot;Société Saint Vincent de Paul&quot; ## [240] &quot;Société Saint-Vincent de Paul&quot; ## [241] &quot;Solidarité Paysans&quot; ## [242] &quot;Solidarité Paysans du Finistère&quot; ## [243] &quot;Solidarités Nouvelles pour le Logement&quot; ## [244] &quot;Somain&quot; ## [245] &quot;Sou des Ecoles&quot; ## [246] &quot;Sou des Ecoles Laïques&quot; ## [247] &quot;Soucelles&quot; ## [248] &quot;Souvenir Français&quot; ## [249] &quot;Sur les bancs de l&#39;école&quot; ## [250] &quot;Télé Bocal&quot; ## [251] &quot;Tennis Club&quot; ## [252] &quot;Trait d&#39;Union&quot; ## [253] &quot;Trait d’union&quot; ## [254] &quot;UCOL&quot; ## [255] &quot;UNC&quot; ## [256] &quot;Union nationale des Combattants du Var&quot; ## [257] &quot;Vaincre la Mucoviscidose&quot; ## [258] &quot;Vanault les Dames&quot; ## [259] &quot;Varrains&quot; ## [260] &quot;Via Nova&quot; ## [261] &quot;Vie Libre&quot; ## [262] &quot;Vignement&quot; ## [263] &quot;VIGNY&quot; ## [264] &quot;Ville de Besançon&quot; ## [265] &quot;Villeneuve&quot; ## [266] &quot;VILLERET&quot; ## [267] &quot;Women in Europe for a Common Future&quot; Si oui, est-ce qu’on peut le mettre sous forme de data.frame ? Pourquoi on a besoin d’une data.frame pour représenter graphiquement ces informations ? dt &lt;- data.frame(Nom=names(tb1),Nombre=as.numeric(tb1)) dt ## Nom Nombre ## 1 35 Lez&#39;arts dans l&#39;école 2 ## 2 7B15 2 ## 3 ADMR 3 ## 4 AIDES 6 ## 5 Albert 2 ## 6 AMOPA 2 ## 7 ANDELARRE 2 ## 8 ANSORAA 2 ## 9 APAJH 3 ## 10 APF 2 ## 11 ASPTT 3 ## 12 Assas 2 ## 13 Association Ah? 2 ## 14 Association des Paralysés de France 3 ## 15 Association La Cimade 2 ## 16 Association Le Refuge 3 ## 17 ATTIGNY 2 ## 18 Autisme Picardie 80 2 ## 19 Baby Loup 3 ## 20 Baby-Loup 2 ## 21 Badminton Club 2 ## 22 Balard Bouge 2 ## 23 Banque alimentaire 3 ## 24 Banque Alimentaire 4 ## 25 Banque Alimentaire de l&#39;Isère 2 ## 26 Banque alimentaire de la Loire 2 ## 27 Basket Club 2 ## 28 BEUGNEUX 2 ## 29 Bibliothèque pour tous 2 ## 30 BLEIGNY-LE-CARREAU 2 ## 31 BRIGNOLES 6 ## 32 CANNES 2 ## 33 Carpe Diem 2 ## 34 CASAS 3 ## 35 CDHA 2 ## 36 Centre d&#39;Information sur les Droits des Femmes et des Familles 2 ## 37 CERNAY 2 ## 38 Chambly 2 ## 39 Chanteloup-les-Vignes 2 ## 40 Chaux 2 ## 41 Chorale Sainte-Cécile 3 ## 42 CIDFF 4 ## 43 Cimade 2 ## 44 CIMADE 3 ## 45 CLCV 2 ## 46 Cloyes sur le Loir 2 ## 47 Club d&#39;Automne 2 ## 48 Club de l&#39;Amitié 3 ## 49 Club de Rugby 2 ## 50 Club de Tennis 2 ## 51 CNIID 2 ## 52 Comité Bataillon Rémy 2 ## 53 Comité d&#39;entente des associations patriotiques de la région de Saint-Lô 2 ## 54 Comité de jumelage 3 ## 55 Comité de Jumelage 3 ## 56 Comité des fêtes 4 ## 57 Comité des Fêtes 7 ## 58 Communauté de Communes du Pays d&#39;Ornans 2 ## 59 Commune Blaringhem 2 ## 60 Commune d&#39;Auneuil 2 ## 61 Commune de Boisemont 2 ## 62 Commune de Bondy 2 ## 63 Commune de Chalandray 2 ## 64 Commune de Chelles 2 ## 65 Commune de Crest 8 ## 66 Commune de Gonnehem 2 ## 67 Commune de Grandvilliers 3 ## 68 Commune de Grenoble 3 ## 69 Commune de Grosseto-Prugna 2 ## 70 Commune de LA TABLE 2 ## 71 Commune de Ligugé 2 ## 72 Commune de Pantin 4 ## 73 Commune de Reims 2 ## 74 COMMUNE DE SAINT PAIR 2 ## 75 COMMUNE DE SAINT PIERRE DU JONQUET 2 ## 76 Commune de St Pierre de Manneville 2 ## 77 Commune de Venon 2 ## 78 Commune de Villemeux sur Eure 5 ## 79 Commune du Perreux-sur-Marne 3 ## 80 Commune Hazebrouck 2 ## 81 Commune Merville 2 ## 82 Commune Nepvant 2 ## 83 Commune Sercus 2 ## 84 Confluences 2 ## 85 Consulat de France à Londres 2 ## 86 Côté Cour 2 ## 87 COUDES 2 ## 88 Coup de Pouce 4 ## 89 Crespin 2 ## 90 Croix Rouge 2 ## 91 Croix Rouge Française 4 ## 92 CSV Rugby 2 ## 93 Culture et Loisirs 2 ## 94 DAGNY 2 ## 95 DAMPIERRE-SUR-SALON 2 ## 96 District de l&#39;Isère de Football 2 ## 97 Diverses communes 2 ## 98 Don Bosco 2 ## 99 Ecole de musique 3 ## 100 Ecole de Musique 2 ## 101 Emergence 2 ## 102 Emmaüs 4 ## 103 Ener&#39;gym 2 ## 104 Energie Citoyenne 2 ## 105 Epaignes 3 ## 106 Equeurdreville 2 ## 107 Espace commercial Monplaisir 2 ## 108 ESSISES 2 ## 109 Etrun 2 ## 110 FACE GARD 2 ## 111 Fairplaylist 3 ## 112 Familles rurales 5 ## 113 FDSEA 25 2 ## 114 Fédération départementale des Foyers Ruraux des Deux-Sèvres 2 ## 115 Femmes d&#39;histoire 2 ## 116 FLEURY-LA-RIVIERE 2 ## 117 FMES 2 ## 118 FNACA 7 ## 119 FNATH 5 ## 120 Fondation Concorde 3 ## 121 Fondation Jean Jaurès 2 ## 122 FONDATION NICOLAS HULOT 2 ## 123 Fondation pour l&#39;écologie politique 2 ## 124 Foyer rural 2 ## 125 France Alzheimer Var 2 ## 126 FRANCHEVAL 2 ## 127 FRCIVAM LR 2 ## 128 FRESNE-LES-REIMS 2 ## 129 FROMONT 2 ## 130 GERBEROY 2 ## 131 GOUPILLIERES 3 ## 132 Groupement Sportif Figeacois 2 ## 133 Gym Paris 15 2 ## 134 Gymnastique volontaire 2 ## 135 Hand Ball Club 2 ## 136 Handi Racing Club 2 ## 137 Herbault 2 ## 138 IPPO 2 ## 139 Issy les Moulineaux 2 ## 140 Jeunes talents 2 ## 141 Kick Boxing 2 ## 142 L&#39;AIGLE 2 ## 143 L&#39;Escale 2 ## 144 L&#39;ISLE-ADAM 2 ## 145 La Cimade 5 ## 146 LA FERTE-IMBAULT 2 ## 147 La Marelle 2 ## 148 La Seyne Var Handball 2 ## 149 LA VACHERESSE-ET-LA ROUILLIE 2 ## 150 LABRUYERE 2 ## 151 LE BEULAY 2 ## 152 LE HOMMET-D&#39;ARTHENAY 2 ## 153 Le mille pattes 2 ## 154 Le Moulin à Café 2 ## 155 Le Pallium 2 ## 156 Le refuge 2 ## 157 Le Refuge 11 ## 158 Le Souvenir Français 5 ## 159 Les Fleurs de la Mémoire 2 ## 160 LES MOERES 2 ## 161 Les Restaurants du Coeur 2 ## 162 Les Restaurants du Cœur 2 ## 163 LES RICEYS 2 ## 164 Ligue des Droits de l&#39;Homme 4 ## 165 Lille 2 ## 166 Lisle 2 ## 167 LONGWY 2 ## 168 LOUVECIENNES 2 ## 169 Mairie d&#39;Angliers 2 ## 170 Mairie d&#39;Auriol 2 ## 171 Mairie de Bègles 5 ## 172 Mairie de Maisoncelles-sur-Ajon 2 ## 173 Mairie de Ploermel 2 ## 174 Maison d&#39;Izieu 2 ## 175 Maison de l&#39;Europe 2 ## 176 Maison de la Francophonie 2 ## 177 Maison des Femmes 2 ## 178 Maison des Lycéens 2 ## 179 Maizières-la-Grande-Paroisse 2 ## 180 Marins du Monde 2 ## 181 MARSEILLE 2 ## 182 Médecins du monde 2 ## 183 Mémorial AFN 92 2 ## 184 MESNIL-THOMAS 2 ## 185 Mieux vivre au Noyer renard 2 ## 186 MILLAS 2 ## 187 Miré 2 ## 188 MJC 2 ## 189 Mobil&#39;Douche 2 ## 190 MODENE 4 ## 191 MONTMACHOUX 2 ## 192 MUADIR 3 ## 193 Musique Municipale 2 ## 194 Nice Judo 2 ## 195 Noratlas de Provence 2 ## 196 Office Central de Coopération à l&#39;Ecole - Section Hautes-Alpes 2 ## 197 OIP 2 ## 198 OMC 2 ## 199 OMS 2 ## 200 PAVANT 2 ## 201 Pfastatt 2 ## 202 Planning Familial 2 ## 203 PROVINS 3 ## 204 Pugilist Club Niçois 2 ## 205 Recidev 2 ## 206 REMILLY 2 ## 207 Reporters sans frontières 2 ## 208 Réserve naturelle 2 ## 209 Restaurants du cœur 3 ## 210 Restaurants du Cœur 3 ## 211 Resto du Cœur 3 ## 212 Restos du Coeur 3 ## 213 Restos du cœur 2 ## 214 Restos du Cœur 6 ## 215 RETONFEY 2 ## 216 Rêves 2 ## 217 Rugby Club 2 ## 218 Rumegies 2 ## 219 Saint Germain sur Avre 2 ## 220 SAINT REMY 2 ## 221 Saint-Barthélemy d’Anjou 2 ## 222 SAINT-DENIS-DES-PUITS 2 ## 223 SAINT-FELIX 2 ## 224 Saint-Joseph 2 ## 225 SAINTE-MARGUERITE 2 ## 226 SARTES 2 ## 227 Scènes et Marne 1914 2 ## 228 Scouts et guides de France 2 ## 229 Scouts et Guides de France 4 ## 230 Secours catholique 9 ## 231 Secours Catholique 6 ## 232 Secours populaire 5 ## 233 Secours Populaire 12 ## 234 SECOURS POPULAIRE 2 ## 235 Secours populaire Français 2 ## 236 Secours Populaire Français 2 ## 237 Skoazell Diwan Paris 2 ## 238 SNL 2 ## 239 Société Saint Vincent de Paul 2 ## 240 Société Saint-Vincent de Paul 2 ## 241 Solidarité Paysans 3 ## 242 Solidarité Paysans du Finistère 2 ## 243 Solidarités Nouvelles pour le Logement 2 ## 244 Somain 2 ## 245 Sou des Ecoles 4 ## 246 Sou des Ecoles Laïques 7 ## 247 Soucelles 2 ## 248 Souvenir Français 5 ## 249 Sur les bancs de l&#39;école 2 ## 250 Télé Bocal 4 ## 251 Tennis Club 3 ## 252 Trait d&#39;Union 2 ## 253 Trait d’union 2 ## 254 UCOL 2 ## 255 UNC 3 ## 256 Union nationale des Combattants du Var 2 ## 257 Vaincre la Mucoviscidose 3 ## 258 Vanault les Dames 4 ## 259 Varrains 2 ## 260 Via Nova 2 ## 261 Vie Libre 3 ## 262 Vignement 2 ## 263 VIGNY 3 ## 264 Ville de Besançon 4 ## 265 Villeneuve 2 ## 266 VILLERET 2 ## 267 Women in Europe for a Common Future 2 Une représentation visuelle de la répartition du nombre sur ceux qui ont plus de 2 donations et après sur l’ensemble. ggplot(dt,aes(Nombre))+geom_histogram() Quels sont les bénéficiaires de plus de 5 donations ? Ce sont des termes génériques ou des entités ? tbt &lt;- table(reserve$Bénéficiaire) dt &lt;- data.frame(Nom=names(tbt),Nombre=as.numeric(tbt)) dt[dt$Nombre&gt;5,] ## Nom Nombre ## 325 AIDES 6 ## 2927 BRIGNOLES 6 ## 3982 Comité des Fêtes 7 ## 4475 Commune de Crest 8 ## 6416 FNACA 7 ## 8059 Le Refuge 11 ## 10509 Restos du Cœur 6 ## 11095 Secours catholique 9 ## 11096 Secours Catholique 6 ## 11116 Secours Populaire 12 ## 11527 Sou des Ecoles Laïques 7 tbt &lt;- table(reserve$Bénéficiaire) dt &lt;- data.frame(Nom=names(tbt),Nombre=as.numeric(tbt)) ggplot(dt,aes(Nombre))+geom_histogram() 8.5 Par groupe politique Si on regarde les dépenses par groupe. ggplot(dt,aes(Nombre))+geom_histogram()+scale_y_log10() ggplot(reserve,aes(Groupe,Montant))+geom_bar(stat=&quot;identity&quot;,position=&quot;dodge&quot;) Mais que ? table(reserve$Groupe) ## ## Ecolo GDR NI RRDP SRC UDI UMP ## 52 549 148 128 262 5172 741 6081 Il faut trouver et corriger. maisque &lt;- reserve %&gt;% filter(Groupe==&quot;&quot;) table(maisque$Nom) ## ## Présidence de l&#39;Assemblée nationale ## 52 table(maisque$Descriptif) ## ## Agir en faveur de l&#39;emploi des jeunes diplômés issus des quartiers prioritaires ou de milieux sociaux défavorisés. ## 1 ## Association de juriste dans la lutte contre l&#39;exclusion ## 1 ## Création d&#39;un système d&#39;information pour le réseau Habitat Jeunes ## 1 ## Equipement du futur 3ème siège de l&#39;Alliance française de la Havane ## 1 ## Fonctionnement ## 44 ## Fonctionnement Mardis de l&#39;Avenir ## 1 ## Insertion sociale et professionnelle par le sport ## 1 ## Soutien projet consacré aux femmes de l&#39;immigration ## 1 ## Travaux d&#39;intérêt local ## 1 reserve &lt;- reserve %&gt;% mutate(Groupe=ifelse(Groupe==&quot;&quot;,&quot;Présidence AN&quot;,Groupe)) L’erreur corrigée ggplot(reserve,aes(Groupe,Montant))+geom_bar(stat=&quot;identity&quot;,position=&quot;dodge&quot;) Les résultats par groupe avec gtsummary ou summarize. on en profite pour calculer la somme des donations, la donation moyenne par Acteur et le nombre d’acteur par groupe groupe &lt;- reserve %&gt;% group_by(Groupe) res &lt;- groupe %&gt;% summarize(min=min(Montant),max=max(Montant), Moyenne=mean(Montant),EC=sd(Montant), Somme=sum(Montant),nbActeur=length(unique(ID_Acteur)), Somme_par_acteur=Somme/nbActeur) res ## # A tibble: 8 × 8 ## Groupe min max Moyenne EC Somme nbActeur Somme_par_acteur ## &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; ## 1 Ecolo 500 50000 4805. 4039. 2637890 18 146549. ## 2 GDR 67 130000 14198. 18951. 2101366 16 131335. ## 3 NI 800 90000 8926. 10212. 1142574 9 126953. ## 4 Présidence AN 1000 250000 54923. 53608. 2856000 1 2856000 ## 5 RRDP 650 98000 8813. 11365. 2309018 18 128279. ## 6 SRC 300 190000 7797. 10387. 40323770 290 139047. ## 7 UDI 960 88000 5523. 6880. 4092383 31 132012. ## 8 UMP 240 200000 4047. 7410. 24608557 200 123043. 8.6 Exportation Comment l’exporter pour ses collègues ? require(writexl) write_xlsx(res,&quot;Résultats/Résultats-Deputes-Reserve.xlsx&quot;) 8.7 Les sommes par acteurs Les sommes par acteurs selon les groupes ggplot(res %&gt;% filter(nbActeur != 1),aes(x=Groupe,y=Somme_par_acteur,fill=Groupe))+ geom_bar(,stat=&quot;identity&quot;,position=&quot;dodge&quot;) 8.8 Quoi faire avec le descriptif ? En utilisant le descriptif : reserve &lt;- reserve %&gt;% mutate(doc_id=paste0(&quot;A&quot;,1:nrow(reserve))) reserve_corpus &lt;- corpus( reserve, text_field = &quot;Descriptif&quot;, docid_field = &quot;doc_id&quot; ) mystopwords &lt;- c(&quot;loire-atlantique&quot;) tok &lt;- tokens(reserve_corpus, remove_punct = TRUE, remove_numbers = TRUE) %&gt;% tokens_remove(pattern = mystopwords,valuetype = &#39;fixed&#39;) %&gt;% tokens_tolower() %&gt;% tokens_remove(stopwords(&quot;fr&quot;)) %&gt;% tokens_wordstem(language=&quot;fr&quot;) dtm &lt;- dfm(tok) res &lt;- rainette(dtm, k = 5) #rainette_explor(res, dtm, reserve_corpus) tok &lt;- tokens(reserve_corpus, remove_punct = TRUE, remove_numbers = TRUE) %&gt;% tokens_remove(pattern = mystopwords,valuetype = &#39;fixed&#39;) %&gt;% tokens_tolower() %&gt;% tokens_remove(stopwords(&quot;fr&quot;)) dtm &lt;- dfm(tok) top=topfeatures(dtm, 30) topall=topfeatures(dtm, 300) top ## fonctionnement d&#39;un travaux local aménagement d&#39;une d&#39;intérêt ## 5251 871 813 488 415 411 404 ## culture achat salle création réfection mise matériel ## 400 396 354 339 320 317 313 ## rénovation mairie vie construction associative l&#39;école l&#39;aménagement ## 308 293 290 270 256 235 234 ## l&#39;église sport organisation locale rue soutien restauration ## 234 218 212 209 203 196 186 ## acquisition aide ## 185 185 dfreq &lt;- data.frame(word=names(topall),freq=as.numeric(topall)) wordcloud2(dfreq,size=2) "],["enquête-emploi.html", "Chapter 9 Enquête Emploi 9.1 Exemple de calcul d’indicateurs", " Chapter 9 Enquête Emploi 9.1 Exemple de calcul d’indicateurs summarize(EEC,tauxchom = 100*sum(EXTRIAN*(ACTEU %in% c(2)))/sum(EXTRIAN*(ACTEU %in% c(1,2)))) ## tauxchom ## 1 8.443378 summarize(EEC,proportion=sum((ACTEU %in% 2))/sum((ACTEU %in% c(1,2))))*100 ## proportion ## 1 8.788914 summarize(EEC,proportion=sum((SEXE %in% 2))/sum((SEXE %in% c(1,2))))*100 ## proportion ## 1 52.8948 summarize(EEC,proportion=sum(EXTRIAN*(SEXE %in% 2))/sum(EXTRIAN*(SEXE %in% c(1,2))))*100 ## proportion ## 1 52.25345 summarize(EEC,proportion=sum((SEXE %in% 2 &amp; ACTEU %in% 2))/sum((ACTEU %in% c(1,2) &amp; SEXE %in% 2)))*100 ## proportion ## 1 8.800153 summarize(EEC,proportion=sum((SEXE %in% 1 &amp; ACTEU %in% 2))/sum((ACTEU %in% c(1,2) &amp; SEXE %in% 1)))*100 ## proportion ## 1 8.777967 summarize(EEC,proportion=sum(EXTRIAN*(SEXE %in% 2 &amp; ACTEU %in% 2))/sum(EXTRIAN*(SEXE %in% c(1,2) &amp; ACTEU %in% c(2))))*100 ## proportion ## 1 48.10994 summarize(EEC,tauxCDD50 = 100*sum(EXTRIAN*(AGE3 %in% c(50) &amp; STAT2 %in% c(2) &amp; STATUTR %in% c(4)))/ sum(EXTRIAN*(AGE3 %in% c(50) &amp; STAT2 %in% c(2)))) ## tauxCDD50 ## 1 6.017983 Calcul de la part de temps partiel parmi les femmes en emploi en moyenne annuelle sur 2019 28,4 % en arrondissant à une décimale summarize(EEC,tauxFTP = 100*sum(EXTRIAN*(SEXE %in% c(2) &amp; ACTEU %in% c(1) &amp; TPPRED %in% c(2)))/ sum(EXTRIAN*(SEXE %in% c(2) &amp; ACTEU %in% c(1)))) ## tauxFTP ## 1 28.43296 "],["exercices.html", "Chapter 10 Exercices 10.1 Ask A Manager 10.2 PISA", " Chapter 10 Exercices 10.1 Ask A Manager Ask A Manager Which industry pays the most? How does salary increase given years of experience? How do salaries compare for the same role in different locations? How much do salaries differ by gender and years of experience? How do factors like race and education level correlate with salary? Is there a “sweet spot” total work experience vs years in the specific field? 10.2 PISA PISA 2022 # require(haven) # data &lt;- read_spss(&quot;data/CY08MSP_STU_QQQ.sav&quot;) # extract &lt;- data[,colnames(data)[grep(&quot;^(CNT)$|^(WB1[567])|^(ST00\\\\d)|^(PV\\\\d+(MATH|READ))&quot;,colnames(data))]] # colnames(extract) # save(extract,file=&quot;data/Pisa.RData&quot;) load(&quot;data/Pisa.RData&quot;) "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
